{"version":3,"sources":["webpack:///./components/dnd-classes.js","webpack:///./components/views/dnd-classes-view.js"],"names":["classes","type","Object","observer","hash","String","value","itemOpened","loading","Boolean","super","this","then","data","set","connectedCallback","populateHandlers","addEventListener","selectionChangeEventHandler","deselectionChangeEventHandler","$","backToTop","backToTopEventHandler","window","scrollEventHandler","disconnectedCallback","removeEventListener","e","selection","detail","scrollY","classList","remove","add","shadowRoot","querySelector","top","document","body","scrollTop","contains","style","height","dispatchEvent","CustomEvent","bubbles","composed","selectedClass","selectedSubclass","indexOf","hashParts","split","slice","isNewClass","prevClass","scrollTo","title","name","customElements","define"],"mappings":"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","file":"10.bundle.js","sourcesContent":["import {PolymerElement, html} from '@polymer/polymer';\nimport \"./styles/material-styles.js\";\nimport \"./styles/my-styles.js\";\nimport './dnd-svg.js';\nimport loadModel from '../util/data.js';\nimport { resolveHash } from '../util/renderTable.js';\nimport { onDataLoad, onClassChange, onSubChange } from \"../js/classes.js\";\nimport { readRouteSelection, routeEventChannel, clearRouteSelection } from '../util/routing.js';\nimport { scrollToTop } from '../util/animateScroll.js';\nimport { jqOffset, jqHeight, throttle } from '../js/utils.js';\n\n\nclass DndClasses extends PolymerElement {\n  static get properties() {\n    return {\n      classes: {\n        type: Object,\n        observer: \"_dataLoaded\"\n      },\n      hash: {\n        type: String,\n        value: ''\n      },\n      itemOpened: {\n        value: false\n      },\n      loading: {\n        type: Boolean,\n        value: true,\n        observer: '_loadingChange'\n      }\n    };\n  }\n\n  static get observers() {\n    return [\"_updateClassFromHash(classes, hash)\"]\n  }\n\n  constructor() {\n    super();\n    this.loading = true;\n    loadModel(\"classes\").then(data => {\n      this.set(\"classes\", data);\n      this.loading = false;\n    });\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.populateHandlers();\n\n    routeEventChannel().addEventListener(\"selection-change\", this.selectionChangeEventHandler);\n    routeEventChannel().addEventListener(\"selection-deselected\", this.deselectionChangeEventHandler);\n    this.$.backToTop.addEventListener(\"click\", this.backToTopEventHandler);\n    window.addEventListener(\"scroll\", this.scrollEventHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.deselectionChangeEventHandler();\n    routeEventChannel().removeEventListener(\"selection-change\", this.selectionChangeEventHandler);\n    routeEventChannel().removeEventListener(\"selection-deselected\", this.deselectionChangeEventHandler);\n    this.$.backToTop.removeEventListener(\"click\", this.backToTopEventHandler);\n    window.removeEventListener(\"scroll\", this.scrollEventHandler);\n  }\n\n  populateHandlers() {\n    this.selectionChangeEventHandler = (e) => {\n      let selection = e ? e.detail.selection : readRouteSelection();\n      if (selection) {\n        this.set(\"hash\", selection);\n      }\n    };\n    this.selectionChangeEventHandler();\n    this.deselectionChangeEventHandler = () => {\n      this.set(\"hash\", \"\");\n    }\n\n    this.backToTopEventHandler = () => {\n      scrollToTop(400);\n    };\n    this.scrollEventHandler = throttle(() => {\n      if (window.scrollY > 850) {\n        this.$.backToTop.classList.remove(\"hidden\");\n      } else {\n        this.$.backToTop.classList.add(\"hidden\");\n      }\n      // setSubclassFixation\n      if (jqOffset(this.shadowRoot.querySelector(\"#subclassHeight\")).top - document.body.scrollTop < 34) {\n        if (!this.shadowRoot.querySelector(\"#subclasses\").classList.contains(\"fixed\")) {\n          this.shadowRoot.querySelector(\"#subclasses\").classList.add(\"fixed\");\n          this.shadowRoot.querySelector(\"#subclassHeight\").style.height =\n            jqHeight(this.shadowRoot.querySelector(\"#subclasses\")) + 40 + \"px\";\n        }\n      } else {\n        this.shadowRoot.querySelector(\"#subclasses\").classList.remove(\"fixed\");\n        this.shadowRoot.querySelector(\"#subclassHeight\").style.height = \"0\";\n      }\n    }, 100);\n  }\n\n  _loadingChange() {\n    this.dispatchEvent(new CustomEvent(\"loading-data\", {\n      bubbles: true,\n      composed: true,\n      detail: {\n        loading: this.loading\n      }\n    }));\n  }\n\n  _dataLoaded() {\n    onDataLoad(this.classes, this.shadowRoot);\n  }\n\n  _updateClassFromHash() {\n    if (this.classes && this.hash) {\n      let selectedClass, selectedSubclass;\n\n      if (this.hash.indexOf(',') > -1) {\n        let hashParts = this.hash.split(',');\n        selectedClass = resolveHash(this.classes, hashParts[0]);\n        selectedSubclass = hashParts.slice(1);\n      } else {\n        selectedClass = resolveHash(this.classes, this.hash);\n      }\n\n      if (selectedClass) {\n        this.itemOpened = true;\n\n        let isNewClass = selectedClass !== this.prevClass;\n        this.prevClass = selectedClass;\n\n        // Only reload the Class\n        if (isNewClass) {\n          window.scrollTo(0,0);\n          onClassChange(selectedClass, this.shadowRoot);\n        }\n        if (selectedSubclass) {\n          onSubChange(selectedSubclass, this.hash, this.shadowRoot);\n        }\n        this.dispatchEvent(new CustomEvent(\"title-change\", {\n          bubbles: true,\n          composed: true,\n          detail: { title: selectedClass.name }\n        }));\n      } else {\n        clearRouteSelection(true);\n      }\n    }\n    if (!this.hash) {\n      this.itemOpened = false;\n    }\n  }\n\n  _clearSelectionHandler() {\n    clearRouteSelection(true);\n  }\n\n  _mainClass() {\n    return this.itemOpened ? \"main item-opened\" : \"main\";\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n      <div class$=\"[[_mainClass(itemOpened)]]\">\n\n        <button class=\"mdc-icon-button close-item material-icons\" on-click=\"_clearSelectionHandler\">close</button>\n        <button id=\"backToTop\" class=\"mdc-icon-button mdc-button--raised back-to-top material-icons hidden\">arrow_upward</button>\n\n        <div class=\"class-container\"></div>\n\n        <div class=\"class-page--class-container\">\n          <div id=\"classtable\">\n            <table class=\"table\">\n              <tr id=\"groupHeaders\" class=\"table-row table-row--header\">\n                <th colspan=\"3\"></th>\n                <!-- spacer to match the 3 default cols (level, prof, features) -->\n              </tr>\n              <tr id=\"colHeaders\" class=\"table-row table-row--header\">\n                <th class=\"level table-cell\">Level</th>\n                <th class=\"pb table-cell\">Proficiency Bonus</th>\n                <th class=\"features table-cell\">Features</th>\n              </tr>\n              <tr id=\"level1\" class=\"table-row\">\n                <td class=\"level table-cell\">1st</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level2\" class=\"table-row\">\n                <td class=\"level table-cell\">2nd</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level3\" class=\"table-row\">\n                <td class=\"level table-cell\">3rd</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level4\" class=\"table-row\">\n                <td class=\"level table-cell\">4th</td>\n                <td class=\"pb table-cell\">+2</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level5\" class=\"table-row\">\n                <td class=\"level table-cell\">5th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level6\" class=\"table-row\">\n                <td class=\"level table-cell\">6th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level7\" class=\"table-row\">\n                <td class=\"level table-cell\">7th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level8\" class=\"table-row\">\n                <td class=\"level table-cell\">8th</td>\n                <td class=\"pb table-cell\">+3</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level9\" class=\"table-row\">\n                <td class=\"level table-cell\">9th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level10\" class=\"table-row\">\n                <td class=\"level table-cell\">10th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level11\" class=\"table-row\">\n                <td class=\"level table-cell\">11th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level12\" class=\"table-row\">\n                <td class=\"level table-cell\">12th</td>\n                <td class=\"pb table-cell\">+4</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level13\" class=\"table-row\">\n                <td class=\"level table-cell\">13th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level14\" class=\"table-row\">\n                <td class=\"level table-cell\">14th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level15\" class=\"table-row\">\n                <td class=\"level table-cell\">15th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level16\" class=\"table-row\">\n                <td class=\"level table-cell\">16th</td>\n                <td class=\"pb table-cell\">+5</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level17\" class=\"table-row\">\n                <td class=\"level table-cell\">17th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level18\" class=\"table-row\">\n                <td class=\"level table-cell\">18th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level19\" class=\"table-row\">\n                <td class=\"level table-cell\">19th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n              <tr id=\"level20\" class=\"table-row\">\n                <td class=\"level table-cell\">20th</td>\n                <td class=\"pb table-cell\">+6</td>\n                <td class=\"features table-cell\"></td>\n              </tr>\n            </table>\n          </div>\n\n          <div id=\"statsprof\" class=\"stats\">\n            <div id=\"hp\" colspan=\"6\">\n              <h5>Hit Points</h5>\n              <div id=\"hitdice\">\n                <strong>Hit Dice:</strong>\n                <span> </span>\n              </div>\n              <div id=\"hp1stlevel\">\n                <strong>Hit Points at 1st Level:</strong>\n                <span> </span>\n              </div>\n              <div id=\"hphigherlevels\">\n                <strong>Hit Points at Higher Levels:</strong>\n                <span> </span>\n              </div>\n            </div>\n            <div id=\"prof\" colspan=\"6\">\n              <h5>Proficiencies</h5>\n              <span\n                >You are proficient with the following items, in addition to any proficiencies provided by your race or\n                background.</span\n              >\n              <div id=\"armor\">\n                <strong>Armor:</strong>\n                <span> </span>\n              </div>\n              <div id=\"weapons\">\n                <strong>Weapons:</strong>\n                <span> </span>\n              </div>\n              <div id=\"tools\">\n                <strong>Tools:</strong>\n                <span> </span>\n              </div>\n              <div id=\"saves\">\n                <strong>Saving Throws:</strong>\n                <span> </span>\n              </div>\n              <div id=\"skills\">\n                <strong>Skills:</strong>\n                <span> </span>\n              </div>\n              <div id=\"equipment\" colspan=\"6\">\n                <h5>Starting Equipment</h5>\n                <div></div>\n              </div>\n            </div>\n          </div>\n\n          <div id=\"subclassHeight\"></div>\n          <div id=\"subclasses\"></div>\n          <div id=\"stats\" class=\"stats\">\n            <!-- populate with JS -->\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('dnd-classes', DndClasses);","import {PolymerElement, html} from '@polymer/polymer';\nimport \"../styles/material-styles.js\";\nimport \"../styles/my-styles.js\";\nimport \"../dnd-layout\";\nimport \"../dnd-classes\";\n\nclass DndClassesView extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n      \n      <dnd-classes></dnd-classes>\n    `;\n  }\n}\n\ncustomElements.define('dnd-classes-view', DndClassesView);"],"sourceRoot":""}