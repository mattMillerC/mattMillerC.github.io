{"version":3,"sources":["webpack:///./node_modules/@vaadin/vaadin-checkbox/theme/lumo/vaadin-checkbox-styles.js","webpack:///./node_modules/@vaadin/vaadin-checkbox/src/vaadin-checkbox.js","webpack:///./node_modules/@vaadin/vaadin-grid/theme/lumo/vaadin-grid-styles.js","webpack:///./node_modules/@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/iron-list.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-scroller.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-a11y-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-active-item-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-array-data-provider-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-resizing-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-data-provider-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-dynamic-columns-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-event-context-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-filter-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-templatizer.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-row-details-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-scroll-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-selection-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-sort-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-styling-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-drag-and-drop-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-keyboard-navigation-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-reordering-mixin.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-outer-scroller.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid-styles.js","webpack:///./node_modules/@vaadin/vaadin-grid/src/vaadin-grid.js"],"names":["$_documentContainer","document","head","appendChild","content","checked","type","Boolean","value","notify","observer","reflectToAttribute","indeterminate","String","_nativeCheckbox","Object","super","this","name","_storedName","ready","setAttribute","shadowRoot","querySelector","addEventListener","_handleClick","bind","_addActiveListeners","attrName","getAttribute","_updateLabelAttribute","label","assignedNodes","firstElementChild","_isAssignedNodesEmpty","removeAttribute","nodes","length","nodeType","Node","TEXT_NODE","textContent","trim","_addEventListenerToNode","e","__interactionsAllowed","keyCode","preventDefault","_toggleChecked","disabled","target","localName","composedPath","dispatchEvent","CustomEvent","composed","bubbles","customElements","define","is","IronScrollTargetBehavior","properties","scrollTarget","HTMLElement","_defaultScrollTarget","observers","_shouldHaveListener","_scrollTargetChanged","isAttached","_oldScrollTarget","_toggleScrollListener","_doc","domHost","$","ownerDocument","_isValidScrollTarget","_scrollHandler","documentElement","window","pageYOffset","scrollTop","pageXOffset","scrollLeft","top","scrollTo","left","scroll","leftOrOptions","innerWidth","offsetWidth","innerHeight","offsetHeight","yes","eventTarget","_boundScrollHandler","removeEventListener","toggleScrollListener","IOS","navigator","userAgent","match","IOS_TOUCH_SCROLLING","ANIMATION_FRAME","IDLE_TIME","MICRO_TASK","PolymerIronList","behaviors","_ratio","_scrollerPaddingTop","_scrollPosition","_physicalSize","_physicalAverage","_physicalAverageCount","_physicalTop","_virtualCount","_estScrollHeight","_scrollHeight","_viewportHeight","_viewportWidth","_physicalItems","_physicalSizes","_firstVisibleIndexVal","_collection","_lastVisibleIndexVal","_maxPages","_focusedVirtualIndex","_itemsPerRow","_rowHeight","_templateCost","_virtualStart","_physicalCount","grid","_physicalRows","_scrollOffset","virtualCount","_convertIndexToCompleteRow","Math","max","val","_clamp","_maxVirtualStart","_virtualStartVal","_physicalStartVal","_physicalStart","_physicalCountVal","Infinity","idx","physicalOffset","_iterateItems","pidx","vidx","_getPhysicalSizeIncrement","min","firstVisibleIndex","_estRowsInView","_scrollBottom","attached","_debounce","_render","listen","detached","unlisten","updateViewportBoundaries","styles","getComputedStyle","parseInt","_isRTL","direction","items","_scrollTargetHeight","_updateGridMetrics","_maxScrollTop","_scrollTop","delta","isScrollingDown","abs","idxAdjustment","round","floor","_update","reusables","_getReusables","physicalTop","indexes","_increasePoolIfNeeded","fromTop","ith","offsetContent","physicalItemHeight","idxs","protectedOffsetContent","_hiddenContentSize","virtualStart","virtualEnd","_virtualEnd","physicalCount","bottom","_physicalBottom","scrollBottom","_physicalEnd","push","itemSet","movingUp","_manageFocus","_assignModels","_updateMetrics","pop","_positionItems","_updateScrollerSize","_isClientFull","count","nextPhysicalCount","nextIncrease","ts","performance","now","apply","_createPool","i","_isIndexRendered","_getPhysicalIndex","_optPhysicalSize","_isVisible","_itemsChanged","change","path","_physicalIndexForKey","_resetScrollPosition","_removeFocusedItem","fn","rtn","arguments","_computeVidx","call","flush","newPhysicalSize","oldPhysicalSize","prevAvgCount","prevPhysicalAvg","ceil","_adjustScrollPosition","y","translate3d","deltaHeight","pos","forceUpdate","_virtualRowCount","style","height","scrollToIndex","currentTopItem","currentVirtualItem","targetOffsetTop","hiddenContentSize","_resetAverage","_resizeHandler","v","cb","asyncModule","_debouncers","debounce","size","Number","_vidxOffset","connectedCallback","item","index","_warnPrivateAPIAccess","_pendingScrollToIndex","borderTopWidth","_scrollingToIndex","_effectiveSize","table","scrollHeight","_accessIronListAPI","_adjustVirtualIndexOffset","row","Array","from","children","filter","child","headerOffset","getBoundingClientRect","header","fvi","fviOffset","_firstVisibleIndex","isArray","maxVirtualItems","_edge","_ie","_scrollToIndex","_focusedItemIndex","_itemsFocusable","contains","activeElement","cellIndex","parentElement","indexOf","focus","requestAnimationFrame","rePosition","isNaN","transform","_canPopulate","_initialPoolCreated","_debounceIncreasePool","remainingPhysicalSize","estimatedMissingRowCount","__reorderChildNodes","childNodes","reduce","inOrder","current","currentIndex","array","sort","row1","row2","forEach","fragment","createDocumentFragment","physicalItems","_createScrollerRows","inst","_getRowTarget","slot","_updateHeaderFooterMetrics","notifyResize","el","_toggleAttribute","_updateScrollerItem","oldOffset","_afterScroll","_noScale","scale","offset","threshold","maxShift","maxOffset","_warnPrivateAPIAccessAsyncEnabled","returnValue","_debouncerWarnPrivateAPIAccess","_debounceRender","apiName","console","warn","lastVisibleIndex","A11yMixin","superClass","_columnTree","level","some","col","_headerTemplate","headerRenderer","undefined","bodyColumns","_a11yGetHeaderRowCount","_a11yGetFooterRowCount","_a11yUpdateHeaderRows","_a11yUpdateFooterRows","headerRow","footer","footerRow","selected","cell","detailsOpened","hasAttribute","detailsCell","id","colspan","querySelectorAll","sorter","cellContent","parentNode","assignedSlot","ActiveItemMixin","activeItem","scroller","_onClick","_activateItem","model","detail","clickedItem","_itemsEqual","defaultPrevented","_content","getRootNode","_isFocusable","__getRowModel","isFocusableElement","element","splices","dataProvider","_arrayDataProvider","clearCache","_ensureFirstPageLoaded","opts","slice","_filters","_checkPaths","_filter","sortOrders","_sorters","_multiSort","start","page","pageSize","end","arrayToCheck","action","result","parentProperty","replace","get","a","b","map","_compare","p","n","toString","_normalizeEmptyValue","filterValueLowercase","toLowerCase","_onHeaderTrack","handle","column","_column","prototype","_childColumns","_order","hidden","columnRowCells","targetCell","minWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","marginLeft","marginRight","maxWidth","__isRTL","x","right","width","flexGrow","state","resizedColumn","ItemCache","parentCache","parentItem","itemCaches","effectiveSize","pendingRequests","keys","isLoading","cache","scaledIndex","getCacheAndIndex","_isExpanded","prev","curr","subCache","updateSize","_loadPage","thisLevelIndex","expandedIndex","loading","readOnly","_cache","itemIdPath","expandedItems","_updateItem","ensureSubCacheForScaledIndex","_getPageForIndex","expandItem","collapseItem","__expandedKeys","has","getItemId","__cacheExpandedKeys","Set","add","splice","_getItemIndexInArray","_hasData","_setLoading","params","_mapSorters","filters","_mapFilters","currentItems","_item","itemsIndex","itemIndex","cachedItem","getItemForIndex","__itemsReceived","_instance","_setPendingProperty","oldPageSize","oldDataProvider","_debouncerCheckSize","after","_checkSize","hadData","item1","item2","_addNodeObserver","columns","getFlattenedNodes","_isColumnElement","_getChildColumns","concat","c","_hasColumnGroups","_flattenColumnGroups","columnTree","_getColumnTree","_arrayEquals","_observer","info","rowDetailsTemplate","addedNodes","classList","_rowDetailsTemplate","removedNodes","_updateColumnTree","_debouncerCheckImports","_checkImports","arr1","arr2","l","elementName","_updateFirstAndLastColumnForRow","node","ELEMENT_NODE","test","EventContextMixin","event","context","section","assign","FilterMixin","_filterChanged","stopPropagation","dataHost","template","_templateInstances","_parentPathValues","_grid","_instanceProps","expanded","_ensureTemplatized","instance","_TemplateClass","addInstance","notifyPath","templatize","instanceProps","parentModel","forwardHostProp","prop","_forwardParentProp","notifyInstanceProp","originalProp","gridCallback","t","addedCount","keyName","set","detailsOpenedItems","rowDetailsRenderer","Function","_detailsCells","Error","templatizer","_updateRow","_a11yUpdateRowDetailsOpened","_toggleDetailsCell","changeRecord","_isDetailsOpened","detailsHidden","hiddenChanged","_renderer","removeProperty","createInstance","innerHTML","root","setProperty","_detailsOpenedInstanceChangedCallback","openItemDetails","closeItemDetails","SCROLL_PERIOD","WHEEL_SCROLLING","SCROLLING","IGNORE_WHEEL","_frozenCells","_scrollbarWidth","scrollDiv","createElement","overflow","position","body","scrollbarWidth","clientWidth","removeChild","_rowWithFocusedElement","Element","_deltaYAcc","_scrollLineHeight","_getScrollLineHeight","fontSize","display","_scrollPageHeight","clientHeight","_wheelScrolling","_debouncerWheelScrolling","_timeouts","_onWheel","outerscroller","outerScrolling","stopImmediatePropagation","ctrlKey","_hasScrolledAncestor","deltaX","deltaY","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","_wheelAnimationFrame","_debouncerWheelAnimationFrame","momentum","_canScroll","_hasResidualMomentum","_ignoreNewWheel","_debouncerIgnoreNewWheel","_previousMomentum","scrollWidth","_scrollingFrame","_debounceScrolling","cancelAnimationFrame","_reorderRows","_scrollPeriodFrame","_debounceScrollPeriod","_translateStationaryElements","_scheduleScrolling","os","_ios","passthrough","syncOuterScroller","overScroll","_updateOverflow","_debounceOverflow","adjustedVirtualStart","targetRow","targetPhysicalIndex","insertBefore","_debouncerCacheElements","_updateScrollerMeasurements","_updateLastFrozen","__scrollerMetrics","columnsRow","lastFrozen","_lastFrozen","frozen","_getTranslate","_scrollLeft","__getNormalizedScrollLeft","frozenCellTransform","outersizer","fixedsizer","SelectionMixin","selectedItems","_isSelected","selectItem","deselectItem","_selectedInstanceChangedCallback","multiSort","_previousSorters","_onSorterChanged","ShadyDOM","run","sorters","_removeArrayItem","unshift","JSON","stringify","_a11yUpdateSorters","StylingMixin","cellClassNameGenerator","cellClassGenerator","generateCellClassNames","_generateCellClassNames","rowData","__generatedClasses","className","remove","split","DropMode","DropLocation","DragAndDropMixin","dropMode","rowsDraggable","dragFilter","dropFilter","__dndAutoScrollThreshold","_onDragStart","_onDragEnd","_onDragOver","_onDragLeave","_onDrop","_safari","exec","rowRect","dataTransfer","setDragImage","clientX","clientY","rows","__getViewportRows","setData","__formatDefaultTransferData","updateStyles","draggedItems","setDragData","data","setDraggedItemsCount","originalEvent","_clearDragStyles","_dropLocation","_dragOverItem","__dndAutoScroll","dropAbove","__dndAutoScrolling","headerBottom","footerTop","topDiff","bottomDiff","scrollTopDelta","setTimeout","dragData","types","getData","cancelable","dropTargetItem","dropLocation","join","filterDragAndDrop","_filterDragAndDrop","dragDisabled","dropDisabled","KeyboardNavigationMixin","_headerFocusable","_footerFocusable","_navigatingIsHidden","_focusedColumnOrder","_android","_onKeyDown","_onKeyUp","_onFocusIn","_onFocusOut","_onCellFocusIn","_onCellFocusOut","_isMousedown","focusable","oldFocusable","keyGroup","key","_detectInteracting","indexOfChildElement","visibleItemsCount","_lastVisibleIndex","dx","dy","activeCell","columnIndex","isRowDetails","_elementMatches","activeRow","activeRowGroup","maxRowIndex","rowIndex","dstRowIndex","dstIsRowDetails","dstItem","_getColumns","dstColumns","dstSortedColumnOrders","maxOrderedColumnIndex","orderedColumnIndex","dstOrderedColumnIndex","_ensureScrolledToIndex","dstColumnIndex","acc","dstRow","dstCell","_scrollHorizontallyToCell","dstRect","tableIndex","rowGroup","localTarget","localTargetIsTextInput","wantInteracting","_parseEventPath","focusTarget","srcElement","step","tabOrder","focusexit","_predictFocusStepTarget","shiftKey","itemsFocusTarget","focusedItemRow","wasNavigating","click","rootTarget","_activeRowGroup","_detectFocusedItemIndex","columnTreeLevel","firstVisibleIndexRow","dstCellRect","dstCellIndex","tableRect","leftBoundary","rightBoundary","query","matches","columnReorderingAllowed","_orderBaseScope","_onTrackEvent","_reorderGhost","_onTouchStart","_onTouchMove","_onTouchEnd","_onContextMenu","_startTouchReorderTimeout","_onTrackStart","touches","_draggedColumn","clearTimeout","_onTrackEnd","headerCell","_touchDevice","_onTrack","_cellFromPoint","childElementCount","_setSiblingsReorderStatus","_reorderStatus","_updateGhost","visibility","_updateGhostPosition","_autoScroller","targetColumn","_getTargetColumn","_isSwapAllowed","_isSwappableByPosition","_swapColumnOrders","_lastDragClientX","_getColumnsInOrder","elementFromPoint","eventClientX","eventClientY","ghostRect","targetLeft","targetTop","_left","_top","_getInnerText","ghost","propertyName","status","sibling","rightDiff","leftDiff","async","column1","column2","differentColumns","sameParent","sameFrozen","sourceCellRect","targetRect","_updateFirstAndLastColumn","draggedColumn","candidate","resizable","parent","_footerTemplate","textAlign","_emptyCells","_headerCell","_footerCell","footerRenderer","_bodyTemplate","_templateObserver","callback","_allCells","disconnectedCallback","_findHostGrid","_gridValue","_cells","_prepareHeaderTemplate","_prepareFooterTemplate","_prepareBodyTemplate","_prepareTemplatizer","_findTemplate","__runRenderer","renderer","args","cells","_template","setProperties","__setColumnTemplateOrRenderer","headerTemplate","footerTemplate","footerCell","__updateHeaderFooterRowVisibility","_selectFirstTemplate","_rootDataHost","_columnPropChanged","order","__forceReflow","_frozenCellsChanged","bodyTemplate","hasHeaderText","__setTextContent","pathRenderer","owner","_generateHeader","substr","lastIndexOf","toUpperCase","bool","reorderStatus","existingHandle","textAlignFallback","_previousHidden","_debouncerHiddenChanged","_renderColumnTree","_resetKeyboardNavigation","autoWidth","scrollHandler","noScrollbars","_syncScrollTarget","_onMouseMove","webkitOverflowScrolling","_","offsetY","offsetX","VaadinGridStyles","safari","firefox","scrollingStyles","register","TOUCH_DEVICE","createEvent","_this","MSStream","platform","maxTouchPoints","CSS","supports","_firefox","heightByRows","_recalculateColumnWidthOnceLoadingFinished","_onAnimationEnd","recalculateColumnWidths","oldValue","newValue","attributeChangedCallback","__hasRowsWithClientHeight","cols","_origFlexGrow","_currentWidth","cellWidth","_recalculateColumnWidths","tagName","slotName","_contentIndex","chrome","mouseUpListener","isColumnRow","noNotify","contentsFragment","_vacant","_createCell","_configureDetailsCell","_a11ySetRowDetailsCell","visibleRowCells","_preventScrollerRotatingCellFocus","_a11yUpdateRowRowindex","_getItem","_a11yUpdateRowSelected","_a11yUpdateRowLevel","__detailsOpened__","__selected__","__level__","__expanded__","_debouncerUpdateHeights","_updateDetailsCellHeights","headerHeight","footerHeight","borderBottomWidth","animationName","_getIndexLevel","_renderHeaderAndFooter","_debouncerForceReflow"],"mappings":"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","file":"8.bundle.js","sourcesContent":["import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-checkbox\" theme-for=\"vaadin-checkbox\">\n  <template>\n    <style include=\"lumo-checkbox-style lumo-checkbox-effects\">\n      /* IE11 only */\n      ::-ms-backdrop,\n      [part=\"checkbox\"] {\n        line-height: 1;\n      }\n    </style>\n  </template>\n</dom-module><dom-module id=\"lumo-checkbox-style\">\n  <template>\n    <style>\n      :host {\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        cursor: default;\n        outline: none;\n      }\n\n      [part=\"label\"]:not([empty]) {\n        margin: 0.1875em 0.875em 0.1875em 0.375em;\n      }\n\n      [part=\"checkbox\"] {\n        width: calc(1em + 2px);\n        height: calc(1em + 2px);\n        margin: 0.1875em;\n        position: relative;\n        border-radius: var(--lumo-border-radius-s);\n        background-color: var(--lumo-contrast-20pct);\n        transition: transform 0.2s cubic-bezier(.12, .32, .54, 2), background-color 0.15s;\n        pointer-events: none;\n        line-height: 1.2;\n      }\n\n      :host([indeterminate]) [part=\"checkbox\"],\n      :host([checked]) [part=\"checkbox\"] {\n        background-color: var(--lumo-primary-color);\n      }\n\n      /* Needed to align the checkbox nicely on the baseline */\n      [part=\"checkbox\"]::before {\n        content: \"\\\\2003\";\n      }\n\n      /* Checkmark */\n      [part=\"checkbox\"]::after {\n        content: \"\";\n        display: inline-block;\n        width: 0;\n        height: 0;\n        border: 0 solid var(--lumo-primary-contrast-color);\n        border-width: 0.1875em 0 0 0.1875em;\n        box-sizing: border-box;\n        transform-origin: 0 0;\n        position: absolute;\n        top: 0.8125em;\n        left: 0.5em;\n        transform: scale(0.55) rotate(-135deg);\n        opacity: 0;\n      }\n\n      :host([checked]) [part=\"checkbox\"]::after {\n        opacity: 1;\n        width: 0.625em;\n        height: 1.0625em;\n      }\n\n      /* Indeterminate checkmark */\n\n      :host([indeterminate]) [part=\"checkbox\"]::after {\n        transform: none;\n        opacity: 1;\n        top: 45%;\n        height: 10%;\n        left: 22%;\n        right: 22%;\n        width: auto;\n        border: 0;\n        background-color: var(--lumo-primary-contrast-color);\n        transition: opacity 0.25s;\n      }\n\n      /* Focus ring */\n\n      :host([focus-ring]) [part=\"checkbox\"] {\n        box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);\n      }\n\n      /* Disabled */\n\n      :host([disabled]) {\n        pointer-events: none;\n        color: var(--lumo-disabled-text-color);\n      }\n\n      :host([disabled]) [part=\"label\"] ::slotted(*) {\n        color: inherit;\n      }\n\n      :host([disabled]) [part=\"checkbox\"] {\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      :host([disabled]) [part=\"checkbox\"]::after {\n        border-color: var(--lumo-contrast-30pct);\n      }\n\n      :host([indeterminate][disabled]) [part=\"checkbox\"]::after {\n        background-color: var(--lumo-contrast-30pct);\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part=\"label\"]:not([empty]) {\n        margin: 0.1875em 0.375em 0.1875em 0.875em;\n      }\n    </style>\n  </template>\n</dom-module><dom-module id=\"lumo-checkbox-effects\">\n  <template>\n    <style>\n      /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */\n      :host(:hover) [part=\"checkbox\"]::after {\n        transition: width 0.1s, height 0.25s;\n      }\n\n      /* Used for activation \"halo\" */\n      [part=\"checkbox\"]::before {\n        color: transparent;\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        border-radius: inherit;\n        background-color: inherit;\n        transform: scale(1.4);\n        opacity: 0;\n        transition: transform 0.1s, opacity 0.8s;\n      }\n\n      /* Hover */\n\n      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part=\"checkbox\"] {\n        background-color: var(--lumo-contrast-30pct);\n      }\n\n      /* Disable hover for touch devices */\n      @media (pointer: coarse) {\n        :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part=\"checkbox\"] {\n          background-color: var(--lumo-contrast-20pct);\n        }\n      }\n\n      /* Active */\n\n      :host([active]) [part=\"checkbox\"] {\n        transform: scale(0.9);\n        transition-duration: 0.05s;\n      }\n\n      :host([active][checked]) [part=\"checkbox\"] {\n        transform: scale(1.1);\n      }\n\n      :host([active]:not([checked])) [part=\"checkbox\"]::before {\n        transition-duration: 0.01s, 0.01s;\n        transform: scale(0);\n        opacity: 0.4;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-checkbox>` is a Web Component for customized checkboxes.\n *\n * ```html\n * <vaadin-checkbox>\n *   Make my profile visible\n * </vaadin-checkbox>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name         | Description\n * ------------------|----------------\n * `checkbox`        | The wrapper element for the native <input type=\"checkbox\">\n * `label`           | The wrapper element in which the component's children, namely the label, is slotted\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|--------------\n * `active`     | Set when the checkbox is pressed down, either with mouse, touch or the keyboard. | `:host`\n * `disabled`   | Set when the checkbox is disabled. | `:host`\n * `focus-ring` | Set when the checkbox is focused using the keyboard. | `:host`\n * `focused`    | Set when the checkbox is focused. | `:host`\n * `indeterminate` | Set when the checkbox is in indeterminate mode. | `:host`\n * `checked` | Set when the checkbox is checked. | `:host`\n * `empty` | Set when there is no label provided. | `label`\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes ElementMixin\n * @mixes ControlStateMixin\n * @mixes ThemableMixin\n * @mixes GestureEventListeners\n * @demo demo/index.html\n */\nclass CheckboxElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      label {\n        display: inline-flex;\n        align-items: baseline;\n        outline: none;\n      }\n\n      [part=\"checkbox\"] {\n        position: relative;\n        display: inline-block;\n        flex: none;\n      }\n\n      input[type=\"checkbox\"] {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n        margin: 0;\n      }\n\n      :host([disabled]) {\n        -webkit-tap-highlight-color: transparent;\n      }\n    </style>\n\n    <label>\n      <span part=\"checkbox\">\n        <input type=\"checkbox\" checked=\"{{checked::change}}\" disabled\\$=\"[[disabled]]\" indeterminate=\"{{indeterminate::change}}\" role=\"presentation\" tabindex=\"-1\">\n      </span>\n\n      <span part=\"label\">\n        <slot></slot>\n      </span>\n    </label>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-checkbox';\n  }\n\n  static get version() {\n    return '2.3.0';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * True if the checkbox is checked.\n       */\n      checked: {\n        type: Boolean,\n        value: false,\n        notify: true,\n        observer: '_checkedChanged',\n        reflectToAttribute: true\n      },\n\n      /**\n       * Indeterminate state of the checkbox when it's neither checked nor unchecked, but undetermined.\n       * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox#Indeterminate_state_checkboxes\n       */\n      indeterminate: {\n        type: Boolean,\n        notify: true,\n        observer: '_indeterminateChanged',\n        reflectToAttribute: true,\n        value: false\n      },\n\n      /**\n       * The value given to the data submitted with the checkbox's name to the server when the control is inside a form.\n       */\n      value: {\n        type: String,\n        value: 'on'\n      },\n\n      _nativeCheckbox: {\n        type: Object\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    /**\n     * @type {string}\n     * Name of the element.\n     */\n    this.name;\n  }\n\n  get name() {\n    return this.checked ? this._storedName : '';\n  }\n\n  set name(name) {\n    this._storedName = name;\n  }\n\n  ready() {\n    super.ready();\n\n    this.setAttribute('role', 'checkbox');\n\n    this._nativeCheckbox = this.shadowRoot.querySelector('input[type=\"checkbox\"]');\n\n    this.addEventListener('click', this._handleClick.bind(this));\n\n    this._addActiveListeners();\n\n    const attrName = this.getAttribute('name');\n    if (attrName) {\n      this.name = attrName;\n    }\n\n    this.shadowRoot.querySelector('[part~=\"label\"]').querySelector('slot')\n      .addEventListener('slotchange', this._updateLabelAttribute.bind(this));\n\n    this._updateLabelAttribute();\n  }\n\n  _updateLabelAttribute() {\n    const label = this.shadowRoot.querySelector('[part~=\"label\"]');\n    const assignedNodes = label.firstElementChild.assignedNodes();\n    if (this._isAssignedNodesEmpty(assignedNodes)) {\n      label.setAttribute('empty', '');\n    } else {\n      label.removeAttribute('empty');\n    }\n  }\n\n  _isAssignedNodesEmpty(nodes) {\n    // The assigned nodes considered to be empty if there is no slotted content or only one empty text node\n    return nodes.length === 0 ||\n          (nodes.length == 1\n          && nodes[0].nodeType == Node.TEXT_NODE\n          && nodes[0].textContent.trim() === '');\n  }\n\n  _checkedChanged(checked) {\n    if (this.indeterminate) {\n      this.setAttribute('aria-checked', 'mixed');\n    } else {\n      this.setAttribute('aria-checked', Boolean(checked));\n    }\n  }\n\n  _indeterminateChanged(indeterminate) {\n    if (indeterminate) {\n      this.setAttribute('aria-checked', 'mixed');\n    } else {\n      this.setAttribute('aria-checked', this.checked);\n    }\n  }\n\n  _addActiveListeners() {\n    // DOWN\n    this._addEventListenerToNode(this, 'down', (e) => {\n      if (this.__interactionsAllowed(e)) {\n        this.setAttribute('active', '');\n      }\n    });\n\n    // UP\n    this._addEventListenerToNode(this, 'up', () => this.removeAttribute('active'));\n\n    // KEYDOWN\n    this.addEventListener('keydown', e => {\n      if (this.__interactionsAllowed(e) && e.keyCode === 32) {\n        e.preventDefault();\n        this.setAttribute('active', '');\n      }\n    });\n\n    // KEYUP\n    this.addEventListener('keyup', e => {\n      if (this.__interactionsAllowed(e) && e.keyCode === 32) {\n        e.preventDefault();\n        this._toggleChecked();\n        this.removeAttribute('active');\n\n        if (this.indeterminate) {\n          this.indeterminate = false;\n        }\n      }\n    });\n  }\n\n  /** @protected */\n  get focusElement() {\n    return this.shadowRoot.querySelector('input');\n  }\n\n  /**\n   * True if users' interactions (mouse or keyboard)\n   * should toggle the checkbox\n   */\n  __interactionsAllowed(e) {\n    if (this.disabled) {\n      return false;\n    }\n\n    // https://github.com/vaadin/vaadin-checkbox/issues/63\n    if (e.target.localName === 'a') {\n      return false;\n    }\n\n    return true;\n  }\n\n  _handleClick(e) {\n    if (this.__interactionsAllowed(e)) {\n      if (!this.indeterminate) {\n        if (e.composedPath()[0] !== this._nativeCheckbox) {\n          e.preventDefault();\n          this._toggleChecked();\n        }\n      } else {\n        /*\n         * Required for IE 11 and Edge.\n         * See issue here: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7344418/\n         */\n        this.indeterminate = false;\n        e.preventDefault();\n        this._toggleChecked();\n      }\n    }\n  }\n\n  _toggleChecked() {\n    this.checked = !this.checked;\n    this.dispatchEvent(new CustomEvent('change', {composed: false, bubbles: true}));\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n}\n\ncustomElements.define(CheckboxElement.is, CheckboxElement);\n\nexport { CheckboxElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-checkbox/theme/lumo/vaadin-checkbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-grid\" theme-for=\"vaadin-grid\">\n  <template>\n    <style>\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        line-height: var(--lumo-line-height-s);\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n        box-sizing: border-box;\n        -webkit-text-size-adjust: 100%;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n\n        /* For internal use only */\n        --_lumo-grid-border-color: var(--lumo-contrast-20pct);\n        --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);\n        --_lumo-grid-border-width: 1px;\n        --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);\n      }\n\n      /* No (outer) border */\n\n      :host(:not([theme~=\"no-border\"])) {\n        border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);\n      }\n\n      /* Cell styles */\n\n      [part~=\"cell\"] {\n        min-height: var(--lumo-size-m);\n        background-color: var(--lumo-base-color);\n      }\n\n      [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        cursor: default;\n        padding: var(--lumo-space-xs) var(--lumo-space-m);\n      }\n\n      /* Apply row borders by default and introduce the \"no-row-borders\" variant */\n      :host(:not([theme~=\"no-row-borders\"])) [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Hide first body row top border */\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"][first] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        border-top: 0;\n        min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));\n      }\n\n      /* Focus-ring */\n\n      [part~=\"cell\"]:focus {\n        outline: none;\n      }\n\n      :host([navigating]) [part~=\"cell\"]:focus::before {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        pointer-events: none;\n        box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Drag and Drop styles */\n      :host([dragover])::after {\n        content: \"\";\n        position: absolute;\n        z-index: 100;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        pointer-events: none;\n        box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      [part~=\"row\"][dragover] {\n        z-index: 100 !important;\n      }\n\n      [part~=\"row\"][dragover] [part~=\"cell\"] {\n        overflow: visible;\n      }\n\n      [part~=\"row\"][dragover] [part~=\"cell\"]::after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        height: calc(var(--_lumo-grid-border-width) + 2px);\n        pointer-events: none;\n        background: var(--lumo-primary-color-50pct);\n      }\n\n      :host([theme~=\"no-row-borders\"]) [dragover] [part~=\"cell\"]::after {\n        height: 2px;\n      }\n\n      [part~=\"row\"][dragover=\"below\"] [part~=\"cell\"]::after {\n        top: 100%;\n        bottom: auto;\n        margin-top: -1px;\n      }\n\n      [part~=\"row\"][dragover=\"above\"] [part~=\"cell\"]::after {\n        top: auto;\n        bottom: 100%;\n        margin-bottom: -1px;\n      }\n\n      [part~=\"row\"][details-opened][dragover=\"below\"] [part~=\"cell\"]:not([part~=\"details-cell\"])::after,\n      [part~=\"row\"][details-opened][dragover=\"above\"] [part~=\"details-cell\"]::after {\n        display: none;\n      }\n\n      [part~=\"row\"][dragover][dragover=\"on-top\"] [part~=\"cell\"]::after {\n        height: 100%;\n      }\n\n      [part~=\"row\"][dragstart] {\n        /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */\n        border-bottom: 100px solid transparent;\n        z-index: 100 !important;\n        opacity: 0.9;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"] {\n        border: none !important;\n        box-shadow: none !important;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"][last-column] {\n        border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;\n      }\n\n      [part~=\"row\"][dragstart] [part~=\"cell\"][first-column] {\n        border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);\n      }\n\n      [ios] [part~=\"row\"][dragstart] [part~=\"cell\"] {\n        background: var(--lumo-primary-color-50pct);\n      }\n\n      #scroller:not([ios]) [part~=\"row\"][dragstart]:not([dragstart=\"\"])::after {\n        display: block;\n        position: absolute;\n        left: var(--_grid-drag-start-x);\n        top: var(--_grid-drag-start-y);\n        z-index: 100;\n        content: attr(dragstart);\n        align-items: center;\n        justify-content: center;\n        box-sizing: border-box;\n        padding: calc(var(--lumo-space-xs) * 0.8);\n        color: var(--lumo-error-contrast-color);\n        background-color: var(--lumo-error-color);\n        border-radius: var(--lumo-border-radius-m);\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-xxs);\n        line-height: 1;\n        font-weight: 500;\n        text-transform: initial;\n        letter-spacing: initial;\n        min-width: calc(var(--lumo-size-s) * 0.7);\n        text-align: center;\n      }\n\n      /* Headers and footers */\n\n      [part~=\"header-cell\"] ::slotted(vaadin-grid-cell-content),\n      [part~=\"footer-cell\"] ::slotted(vaadin-grid-cell-content),\n      [part~=\"reorder-ghost\"] {\n        font-size: var(--lumo-font-size-s);\n        font-weight: 500;\n      }\n\n      [part~=\"footer-cell\"] ::slotted(vaadin-grid-cell-content) {\n        font-weight: 400;\n      }\n\n      [part=\"row\"]:only-child [part~=\"header-cell\"] {\n        min-height: var(--lumo-size-xl);\n      }\n\n      /* Header borders */\n\n      /* Hide first header row top border */\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:first-child [part~=\"header-cell\"] {\n        border-top: 0;\n      }\n\n      [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom-color: var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Overflow uses a stronger border color */\n      :host([overflow~=\"top\"]) [part=\"row\"]:last-child [part~=\"header-cell\"] {\n        border-bottom-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Footer borders */\n\n      [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host(:not([theme~=\"no-row-borders\"])) [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top-color: var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Overflow uses a stronger border color */\n      :host([overflow~=\"bottom\"]) [part=\"row\"]:first-child [part~=\"footer-cell\"] {\n        border-top-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Column reordering */\n\n      :host([reordering]) [part~=\"cell\"] {\n        background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);\n      }\n\n      :host([reordering]) [part~=\"cell\"][reorder-status=\"allowed\"] {\n        background: var(--lumo-base-color);\n      }\n\n      :host([reordering]) [part~=\"cell\"][reorder-status=\"dragging\"] {\n        background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);\n      }\n\n      [part~=\"reorder-ghost\"] {\n        opacity: 0.85;\n        box-shadow: var(--lumo-box-shadow-s);\n        /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */\n        padding: var(--lumo-space-s) var(--lumo-space-m) !important;\n      }\n\n      /* Column resizing */\n\n      [part=\"resize-handle\"] {\n        width: 3px;\n        background-color: var(--lumo-primary-color-50pct);\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n\n      :host(:not([reordering])) *:not([column-resizing]) [part~=\"cell\"]:hover [part=\"resize-handle\"],\n      [part=\"resize-handle\"]:active {\n        opacity: 1;\n        transition-delay: 0.15s;\n      }\n\n      /* Column borders */\n\n      :host([theme~=\"column-borders\"]) [part~=\"cell\"]:not([last-column]):not([part~=\"details-cell\"]) {\n        border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      /* Frozen columns */\n\n      [last-frozen] {\n        border-right: var(--_lumo-grid-border-width) solid transparent;\n        overflow: hidden;\n      }\n\n      :host([overflow~=\"left\"]) [part~=\"cell\"][last-frozen]:not([part~=\"details-cell\"]) {\n        border-right-color: var(--_lumo-grid-border-color);\n      }\n\n      /* Row stripes */\n\n      :host([theme~=\"row-stripes\"]) [part~=\"row\"]:not([odd]) [part~=\"body-cell\"],\n      :host([theme~=\"row-stripes\"]) [part~=\"row\"]:not([odd]) [part~=\"details-cell\"] {\n        background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));\n        background-repeat: repeat-x;\n      }\n\n      /* Selected row */\n\n      /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */\n      :host(:not([reordering])) [part~=\"row\"][selected] {\n        z-index: 1;\n      }\n\n      :host(:not([reordering])) [part~=\"row\"][selected] [part~=\"body-cell\"]:not([part~=\"details-cell\"]) {\n        background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));\n        background-repeat: repeat;\n      }\n\n      /* Cover the border of an unselected row */\n      :host(:not([theme~=\"no-row-borders\"])) [part~=\"row\"][selected] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);\n      }\n\n      /* Compact */\n\n      :host([theme~=\"compact\"]) [part=\"row\"]:only-child [part~=\"header-cell\"] {\n        min-height: var(--lumo-size-m);\n      }\n\n      :host([theme~=\"compact\"]) [part~=\"cell\"] {\n        min-height: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"compact\"]) [part=\"row\"][first] [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n        min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));\n      }\n\n      :host([theme~=\"compact\"]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        padding: var(--lumo-space-xs) var(--lumo-space-s);\n      }\n\n      /* Wrap cell contents */\n\n      :host([theme~=\"wrap-cell-content\"]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n        white-space: normal;\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part~=\"row\"][dragstart] [part~=\"cell\"][last-column] {\n        border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);\n      }\n\n      :host([dir=\"rtl\"]) [part~=\"row\"][dragstart] [part~=\"cell\"][first-column] {\n        border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;\n      }\n\n      :host([dir=\"rtl\"][theme~=\"column-borders\"]) [part~=\"cell\"]:not([last-column]):not([part~=\"details-cell\"]) {\n        border-right: none;\n        border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);\n      }\n\n      :host([dir=\"rtl\"]) [last-frozen] {\n        border-right: none;\n        border-left: var(--_lumo-grid-border-width) solid transparent;\n      }\n\n      :host([dir=\"rtl\"][overflow~=\"right\"]) [part~=\"cell\"][last-frozen]:not([part~=\"details-cell\"]) {\n        border-left-color: var(--_lumo-grid-border-color);\n      }\n    </style>\n  </template>\n</dom-module><dom-module theme-for=\"vaadin-checkbox\" id=\"vaadin-grid-select-all-checkbox-lumo\">\n  <template>\n    <style>\n      :host(.vaadin-grid-select-all-checkbox) {\n        font-size: var(--lumo-font-size-m);\n      }\n   </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n * `Polymer.IronScrollTargetBehavior` allows an element to respond to scroll\n * events from a designated scroll target.\n *\n * Elements that consume this behavior can override the `_scrollHandler`\n * method to add logic on the scroll event.\n *\n * @demo demo/scrolling-region.html Scrolling Region\n * @demo demo/document.html Document Element\n * @polymerBehavior\n */\nexport const IronScrollTargetBehavior = {\n\n  properties: {\n\n    /**\n     * Specifies the element that will handle the scroll event\n     * on the behalf of the current element. This is typically a reference to an\n     *element, but there are a few more posibilities:\n     *\n     * ### Elements id\n     *\n     *```html\n     * <div id=\"scrollable-element\" style=\"overflow: auto;\">\n     *  <x-element scroll-target=\"scrollable-element\">\n     *    <!-- Content-->\n     *  </x-element>\n     * </div>\n     *```\n     * In this case, the `scrollTarget` will point to the outer div element.\n     *\n     * ### Document scrolling\n     *\n     * For document scrolling, you can use the reserved word `document`:\n     *\n     *```html\n     * <x-element scroll-target=\"document\">\n     *   <!-- Content -->\n     * </x-element>\n     *```\n     *\n     * ### Elements reference\n     *\n     *```js\n     * appHeader.scrollTarget = document.querySelector('#scrollable-element');\n     *```\n     *\n     * @type {HTMLElement}\n     * @default document\n     */\n    scrollTarget: {\n      type: HTMLElement,\n      value: function() {\n        return this._defaultScrollTarget;\n      }\n    }\n  },\n\n  observers: ['_scrollTargetChanged(scrollTarget, isAttached)'],\n\n  /**\n   * True if the event listener should be installed.\n   */\n  _shouldHaveListener: true,\n\n  _scrollTargetChanged: function(scrollTarget, isAttached) {\n    var eventTarget;\n\n    if (this._oldScrollTarget) {\n      this._toggleScrollListener(false, this._oldScrollTarget);\n      this._oldScrollTarget = null;\n    }\n    if (!isAttached) {\n      return;\n    }\n    // Support element id references\n    if (scrollTarget === 'document') {\n      this.scrollTarget = this._doc;\n\n    } else if (typeof scrollTarget === 'string') {\n      var domHost = this.domHost;\n\n      this.scrollTarget = domHost && domHost.$ ?\n          domHost.$[scrollTarget] :\n          dom(this.ownerDocument).querySelector('#' + scrollTarget);\n\n    } else if (this._isValidScrollTarget()) {\n      this._oldScrollTarget = scrollTarget;\n      this._toggleScrollListener(this._shouldHaveListener, scrollTarget);\n    }\n  },\n\n  /**\n   * Runs on every scroll event. Consumer of this behavior may override this\n   * method.\n   *\n   * @protected\n   */\n  _scrollHandler: function scrollHandler() {},\n\n  /**\n   * The default scroll target. Consumers of this behavior may want to customize\n   * the default scroll target.\n   *\n   * @type {Element}\n   */\n  get _defaultScrollTarget() {\n    return this._doc;\n  },\n\n  /**\n   * Shortcut for the document element\n   *\n   * @type {Element}\n   */\n  get _doc() {\n    return this.ownerDocument.documentElement;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  get _scrollTop() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageYOffset :\n                                               this.scrollTarget.scrollTop;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  get _scrollLeft() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageXOffset :\n                                               this.scrollTarget.scrollLeft;\n    }\n    return 0;\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  set _scrollTop(top) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(window.pageXOffset, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  set _scrollLeft(left) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, window.pageYOffset);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n    }\n  },\n\n  /**\n   * Scrolls the content to a particular place.\n   *\n   * @method scroll\n   * @param {number|!{left: number, top: number}} leftOrOptions The left position or scroll options\n   * @param {number=} top The top position\n   * @return {void}\n   */\n  scroll: function(leftOrOptions, top) {\n    var left;\n\n    if (typeof leftOrOptions === 'object') {\n      left = leftOrOptions.left;\n      top = leftOrOptions.top;\n    } else {\n      left = leftOrOptions;\n    }\n\n    left = left || 0;\n    top = top || 0;\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Gets the width of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetWidth() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerWidth :\n                                               this.scrollTarget.offsetWidth;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the height of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetHeight() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerHeight :\n                                               this.scrollTarget.offsetHeight;\n    }\n    return 0;\n  },\n\n  /**\n   * Returns true if the scroll target is a valid HTMLElement.\n   *\n   * @return {boolean}\n   */\n  _isValidScrollTarget: function() {\n    return this.scrollTarget instanceof HTMLElement;\n  },\n\n  _toggleScrollListener: function(yes, scrollTarget) {\n    var eventTarget = scrollTarget === this._doc ? window : scrollTarget;\n    if (yes) {\n      if (!this._boundScrollHandler) {\n        this._boundScrollHandler = this._scrollHandler.bind(this);\n        eventTarget.addEventListener('scroll', this._boundScrollHandler);\n      }\n    } else {\n      if (this._boundScrollHandler) {\n        eventTarget.removeEventListener('scroll', this._boundScrollHandler);\n        this._boundScrollHandler = null;\n      }\n    }\n  },\n\n  /**\n   * Enables or disables the scroll event listener.\n   *\n   * @param {boolean} yes True to add the event, False to remove it.\n   */\n  toggleScrollListener: function(yes) {\n    this._shouldHaveListener = yes;\n    this._toggleScrollListener(yes, this.scrollTarget);\n  }\n\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n\nThis is a fork of <iron-list> for <vaadin-grid>'s internal purposes only!\nTo update:\n1. Get the most recent code from https://github.com/PolymerElements/iron-list/\n2. Remove the  <dom-module id=\"iron-list\"> to avoid collisions with actual <iron-list>\n3. Change \"Polymer({\" to \"window.PolymerIronList = Polymer.Class({\" to expose the class\n3.1. Add @namespace\n4. Optional: Remove all properties and functions not needed by <vaadin-grid>\n5. Profit!\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { IronScrollTargetBehavior } from '@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js';\nimport { animationFrame, idlePeriod, microTask } from '@polymer/polymer/lib/utils/async.js';\nimport { Class } from '@polymer/polymer/lib/legacy/class.js';\nimport { flush, enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\nimport { flush as flush$0 } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nvar IOS = navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/);\nvar IOS_TOUCH_SCROLLING = IOS && IOS[1] >= 8;\nvar DEFAULT_PHYSICAL_COUNT = 3;\nvar ANIMATION_FRAME = animationFrame;\nvar IDLE_TIME = idlePeriod;\nvar MICRO_TASK = microTask;\n\nexport const PolymerIronList = Class({\n\n  behaviors: [\n    IronResizableBehavior,\n    IronScrollTargetBehavior\n  ],\n\n  /**\n   * The ratio of hidden tiles that should remain in the scroll direction.\n   * Recommended value ~0.5, so it will distribute tiles evenly in both directions.\n   */\n  _ratio: 0.5,\n\n  /**\n   * The padding-top value for the list.\n   */\n  _scrollerPaddingTop: 0,\n\n  /**\n   * This value is the same as `scrollTop`.\n   */\n  _scrollPosition: 0,\n\n  /**\n   * The sum of the heights of all the tiles in the DOM.\n   */\n  _physicalSize: 0,\n\n  /**\n   * The average `offsetHeight` of the tiles observed till now.\n   */\n  _physicalAverage: 0,\n\n  /**\n   * The number of tiles which `offsetHeight` > 0 observed until now.\n   */\n  _physicalAverageCount: 0,\n\n  /**\n   * The Y position of the item rendered in the `_physicalStart`\n   * tile relative to the scrolling list.\n   */\n  _physicalTop: 0,\n\n  /**\n   * The number of items in the list.\n   */\n  _virtualCount: 0,\n\n  /**\n   * The estimated scroll height based on `_physicalAverage`\n   */\n  _estScrollHeight: 0,\n\n  /**\n   * The scroll height of the dom node\n   */\n  _scrollHeight: 0,\n\n  /**\n   * The height of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportHeight: 0,\n\n  /**\n   * The width of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportWidth: 0,\n\n  /**\n   * An array of DOM nodes that are currently in the tree\n   * @type {?Array<!TemplatizerNode>}\n   */\n  _physicalItems: null,\n\n  /**\n   * An array of heights for each item in `_physicalItems`\n   * @type {?Array<number>}\n   */\n  _physicalSizes: null,\n\n  /**\n   * A cached value for the first visible index.\n   * See `firstVisibleIndex`\n   * @type {?number}\n   */\n  _firstVisibleIndexVal: null,\n\n  /**\n   * A Polymer collection for the items.\n   * @type {?Polymer.Collection}\n   */\n  _collection: null,\n\n  /**\n   * A cached value for the last visible index.\n   * See `lastVisibleIndex`\n   * @type {?number}\n   */\n  _lastVisibleIndexVal: null,\n\n  /**\n   * The max number of pages to render. One page is equivalent to the height of the list.\n   */\n  _maxPages: 2,\n\n  /**\n   * The virtual index of the focused item.\n   */\n  _focusedVirtualIndex: -1,\n\n  /**\n   * The maximum items per row\n   */\n  _itemsPerRow: 1,\n\n  /**\n   * The height of the row in grid layout.\n   */\n  _rowHeight: 0,\n\n  /**\n   * The cost of stamping a template in ms.\n   */\n  _templateCost: 0,\n\n  /**\n   * The bottom of the physical content.\n   */\n  get _physicalBottom() {\n    return this._physicalTop + this._physicalSize;\n  },\n\n  /**\n   * The bottom of the scroll.\n   */\n  get _scrollBottom() {\n    return this._scrollPosition + this._viewportHeight;\n  },\n\n  /**\n   * The n-th item rendered in the last physical item.\n   */\n  get _virtualEnd() {\n    return this._virtualStart + this._physicalCount - 1;\n  },\n\n  /**\n   * The height of the physical content that isn't on the screen.\n   */\n  get _hiddenContentSize() {\n    var size = this.grid ? this._physicalRows * this._rowHeight : this._physicalSize;\n    return size - this._viewportHeight;\n  },\n\n  /**\n   * The maximum scroll top value.\n   */\n  get _maxScrollTop() {\n    return this._estScrollHeight - this._viewportHeight + this._scrollOffset;\n  },\n\n  /**\n   * The largest n-th value for an item such that it can be rendered in `_physicalStart`.\n   */\n  get _maxVirtualStart() {\n    var virtualCount = this._convertIndexToCompleteRow(this._virtualCount);\n    return Math.max(0, virtualCount - this._physicalCount);\n  },\n\n  set _virtualStart(val) {\n    val = this._clamp(val, 0, this._maxVirtualStart);\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._virtualStartVal = val;\n  },\n\n  get _virtualStart() {\n    return this._virtualStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the top of the scrolling list.\n   */\n  set _physicalStart(val) {\n    val = val % this._physicalCount;\n    if (val < 0) {\n      val = this._physicalCount + val;\n    }\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._physicalStartVal = val;\n  },\n\n  get _physicalStart() {\n    return this._physicalStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the bottom of the scrolling list.\n   */\n  get _physicalEnd() {\n    return (this._physicalStart + this._physicalCount - 1) % this._physicalCount;\n  },\n\n  set _physicalCount(val) {\n    this._physicalCountVal = val;\n  },\n\n  get _physicalCount() {\n    return this._physicalCountVal || 0;\n  },\n\n  /**\n   * An optimal physical size such that we will have enough physical items\n   * to fill up the viewport and recycle when the user scrolls.\n   *\n   * This default value assumes that we will at least have the equivalent\n   * to a viewport of physical items above and below the user's viewport.\n   */\n  get _optPhysicalSize() {\n    return this._viewportHeight === 0 ? Infinity : this._viewportHeight * this._maxPages;\n  },\n\n  /**\n   * True if the current list is visible.\n   */\n  get _isVisible() {\n    return Boolean(this.offsetWidth || this.offsetHeight);\n  },\n\n  /**\n   * Gets the index of the first visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get firstVisibleIndex() {\n    var idx = this._firstVisibleIndexVal;\n    if (idx == null) {\n      var physicalOffset = this._physicalTop + this._scrollOffset;\n\n      idx = this._iterateItems(function(pidx, vidx) {\n        physicalOffset += this._getPhysicalSizeIncrement(pidx);\n\n        if (physicalOffset > this._scrollPosition) {\n          return this.grid ? vidx - (vidx % this._itemsPerRow) : vidx;\n        }\n        // Handle a partially rendered final row in grid mode\n        if (this.grid && this._virtualCount - 1 === vidx) {\n          return vidx - (vidx % this._itemsPerRow);\n        }\n      }) || 0;\n      this._firstVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  /**\n   * Gets the index of the last visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get lastVisibleIndex() {\n    var idx = this._lastVisibleIndexVal;\n    if (idx == null) {\n      if (this.grid) {\n        idx = Math.min(this._virtualCount, this.firstVisibleIndex + this._estRowsInView * this._itemsPerRow - 1);\n      } else {\n        var physicalOffset = this._physicalTop + this._scrollOffset;\n        this._iterateItems(function(pidx, vidx) {\n          if (physicalOffset < this._scrollBottom) {\n            idx = vidx;\n          }\n          physicalOffset += this._getPhysicalSizeIncrement(pidx);\n        });\n      }\n      this._lastVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  get _scrollOffset() {\n    return this._scrollerPaddingTop;\n  },\n\n  attached: function() {\n    this._debounce('_render', this._render, ANIMATION_FRAME);\n    // `iron-resize` is fired when the list is attached if the event is added\n    // before attached causing unnecessary work.\n    this.listen(this, 'iron-resize', '_resizeHandler');\n  },\n\n  detached: function() {\n    this.unlisten(this, 'iron-resize', '_resizeHandler');\n  },\n\n  /**\n   * Invoke this method if you dynamically update the viewport's\n   * size or CSS padding.\n   *\n   * @method updateViewportBoundaries\n   */\n  updateViewportBoundaries: function() {\n    var styles = window.getComputedStyle(this);\n    this._scrollerPaddingTop = this.scrollTarget === this ? 0 : parseInt(styles['padding-top'], 10);\n    this._isRTL = Boolean(styles.direction === 'rtl');\n    this._viewportWidth = this.$.items.offsetWidth;\n    this._viewportHeight = this._scrollTargetHeight;\n    this.grid && this._updateGridMetrics();\n  },\n\n  /**\n   * Recycles the physical items when needed.\n   */\n  _scrollHandler: function() {\n    var scrollTop = Math.max(0, Math.min(this._maxScrollTop, this._scrollTop));\n    var delta = scrollTop - this._scrollPosition;\n    var isScrollingDown = delta >= 0;\n    // Track the current scroll position.\n    this._scrollPosition = scrollTop;\n    // Clear indexes for first and last visible indexes.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n    // Random access.\n    if (Math.abs(delta) > this._physicalSize && this._physicalSize > 0) {\n      delta = delta - this._scrollOffset;\n      var idxAdjustment = Math.round(delta / this._physicalAverage) * this._itemsPerRow;\n      this._virtualStart = this._virtualStart + idxAdjustment;\n      this._physicalStart = this._physicalStart + idxAdjustment;\n      // Estimate new physical offset.\n      this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n      this._update();\n    } else if (this._physicalCount > 0) {\n      var reusables = this._getReusables(isScrollingDown);\n      if (isScrollingDown) {\n        this._physicalTop = reusables.physicalTop;\n        this._virtualStart = this._virtualStart + reusables.indexes.length;\n        this._physicalStart = this._physicalStart + reusables.indexes.length;\n      } else {\n        this._virtualStart = this._virtualStart - reusables.indexes.length;\n        this._physicalStart = this._physicalStart - reusables.indexes.length;\n      }\n      this._update(reusables.indexes, isScrollingDown ? null : reusables.indexes);\n      this._debounce('_increasePoolIfNeeded', this._increasePoolIfNeeded.bind(this, 0), MICRO_TASK);\n    }\n  },\n\n  /**\n   * Returns an object that contains the indexes of the physical items\n   * that might be reused and the physicalTop.\n   *\n   * @param {boolean} fromTop If the potential reusable items are above the scrolling region.\n   */\n  _getReusables: function(fromTop) {\n    var ith, offsetContent, physicalItemHeight;\n    var idxs = [];\n    var protectedOffsetContent = this._hiddenContentSize * this._ratio;\n    var virtualStart = this._virtualStart;\n    var virtualEnd = this._virtualEnd;\n    var physicalCount = this._physicalCount;\n    var top = this._physicalTop + this._scrollOffset;\n    var bottom = this._physicalBottom + this._scrollOffset;\n    var scrollTop = this._scrollTop;\n    var scrollBottom = this._scrollBottom;\n\n    if (fromTop) {\n      ith = this._physicalStart;\n      offsetContent = scrollTop - top;\n    } else {\n      ith = this._physicalEnd;\n      offsetContent = bottom - scrollBottom;\n    }\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      physicalItemHeight = this._getPhysicalSizeIncrement(ith);\n      offsetContent = offsetContent - physicalItemHeight;\n      if (idxs.length >= physicalCount || offsetContent <= protectedOffsetContent) {\n        break;\n      }\n      if (fromTop) {\n        // Check that index is within the valid range.\n        if (virtualEnd + idxs.length + 1 >= this._virtualCount) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + physicalItemHeight >= scrollTop - this._scrollOffset) {\n          break;\n        }\n        idxs.push(ith);\n        top = top + physicalItemHeight;\n        ith = (ith + 1) % physicalCount;\n      } else {\n        // Check that index is within the valid range.\n        if (virtualStart - idxs.length <= 0) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + this._physicalSize - physicalItemHeight <= scrollBottom) {\n          break;\n        }\n        idxs.push(ith);\n        top = top - physicalItemHeight;\n        ith = (ith === 0) ? physicalCount - 1 : ith - 1;\n      }\n    }\n    return {indexes: idxs, physicalTop: top - this._scrollOffset};\n  },\n\n  /**\n   * Update the list of items, starting from the `_virtualStart` item.\n   * @param {!Array<number>=} itemSet\n   * @param {!Array<number>=} movingUp\n   */\n  _update: function(itemSet, movingUp) {\n    if ((itemSet && itemSet.length === 0) || this._physicalCount === 0) {\n      return;\n    }\n    this._manageFocus();\n    this._assignModels(itemSet);\n    this._updateMetrics(itemSet);\n    // Adjust offset after measuring.\n    if (movingUp) {\n      while (movingUp.length) {\n        var idx = movingUp.pop();\n        this._physicalTop -= this._getPhysicalSizeIncrement(idx);\n      }\n    }\n    this._positionItems();\n    this._updateScrollerSize();\n  },\n\n  _isClientFull: function() {\n    return this._scrollBottom != 0 && this._physicalBottom - 1 >= this._scrollBottom &&\n        this._physicalTop <= this._scrollPosition;\n  },\n\n  /**\n   * Increases the pool size.\n   */\n  _increasePoolIfNeeded: function(count) {\n    var nextPhysicalCount = this._clamp(this._physicalCount + count,\n      DEFAULT_PHYSICAL_COUNT, this._virtualCount - this._virtualStart);\n    nextPhysicalCount = this._convertIndexToCompleteRow(nextPhysicalCount);\n    var delta = nextPhysicalCount - this._physicalCount;\n    var nextIncrease = Math.round(this._physicalCount * 0.5);\n\n    if (delta < 0) {\n      return;\n    }\n    if (delta > 0) {\n      var ts = window.performance.now();\n      // Concat arrays in place.\n      [].push.apply(this._physicalItems, this._createPool(delta));\n      // Push 0s into physicalSizes. Can't use Array.fill because IE11 doesn't support it.\n      for (var i = 0; i < delta; i++) {\n        this._physicalSizes.push(0);\n      }\n      this._physicalCount = this._physicalCount + delta;\n      // Update the physical start if it needs to preserve the model of the focused item.\n      // In this situation, the focused item is currently rendered and its model would\n      // have changed after increasing the pool if the physical start remained unchanged.\n      if (this._physicalStart > this._physicalEnd &&\n          this._isIndexRendered(this._focusedVirtualIndex) &&\n          this._getPhysicalIndex(this._focusedVirtualIndex) < this._physicalEnd) {\n        this._physicalStart = this._physicalStart + delta;\n      }\n      this._update();\n      this._templateCost = (window.performance.now() - ts) / delta;\n      nextIncrease = Math.round(this._physicalCount * 0.5);\n    }\n    // The upper bounds is not fixed when dealing with a grid that doesn't\n    // fill it's last row with the exact number of items per row.\n    if (this._virtualEnd >= this._virtualCount - 1 || nextIncrease === 0) {\n      // Do nothing.\n    } else if (!this._isClientFull()) {\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          nextIncrease\n        ), MICRO_TASK);\n    } else if (this._physicalSize < this._optPhysicalSize) {\n      // Yield and increase the pool during idle time until the physical size is optimal.\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          this._clamp(Math.round(50 / this._templateCost), 1, nextIncrease)\n        ), IDLE_TIME);\n    }\n  },\n\n  /**\n   * Renders the a new list.\n   */\n  _render: function() {\n    if (!this.isAttached || !this._isVisible) {\n      return;\n    }\n    if (this._physicalCount !== 0) {\n      var reusables = this._getReusables(true);\n      this._physicalTop = reusables.physicalTop;\n      this._virtualStart = this._virtualStart + reusables.indexes.length;\n      this._physicalStart = this._physicalStart + reusables.indexes.length;\n      this._update(reusables.indexes);\n      this._update();\n      this._increasePoolIfNeeded(0);\n    } else if (this._virtualCount > 0) {\n      // Initial render\n      this.updateViewportBoundaries();\n      this._increasePoolIfNeeded(DEFAULT_PHYSICAL_COUNT);\n    }\n  },\n\n  /**\n   * Called when the items have changed. That is, reassignments\n   * to `items`, splices or updates to a single item.\n   */\n  _itemsChanged: function(change) {\n    if (change.path === 'items') {\n      this._virtualStart = 0;\n      this._physicalTop = 0;\n      this._virtualCount = this.items ? this.items.length : 0;\n      this._collection = this.items && undefined ?\n        undefined.get(this.items) : null;\n      this._physicalIndexForKey = {};\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      this._physicalCount = this._physicalCount || 0;\n      this._physicalItems = this._physicalItems || [];\n      this._physicalSizes = this._physicalSizes || [];\n      this._physicalStart = 0;\n      if (this._scrollTop > this._scrollOffset) {\n        this._resetScrollPosition(0);\n      }\n      this._removeFocusedItem();\n      this._debounce('_render', this._render, ANIMATION_FRAME);\n    }\n  },\n\n  /**\n   * Executes a provided function per every physical index in `itemSet`\n   * `itemSet` default value is equivalent to the entire set of physical indexes.\n   *\n   * @param {!function(number, number)} fn\n   * @param {!Array<number>=} itemSet\n   */\n  _iterateItems: function(fn, itemSet) {\n    var pidx, vidx, rtn, i;\n\n    if (arguments.length === 2 && itemSet) {\n      for (i = 0; i < itemSet.length; i++) {\n        pidx = itemSet[i];\n        vidx = this._computeVidx(pidx);\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    } else {\n      pidx = this._physicalStart;\n      vidx = this._virtualStart;\n      for (; pidx < this._physicalCount; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n      for (pidx = 0; pidx < this._physicalStart; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    }\n  },\n\n  /**\n   * Returns the virtual index for a given physical index\n   *\n   * @param {number} pidx Physical index\n   * @return {number}\n   */\n  _computeVidx: function(pidx) {\n    if (pidx >= this._physicalStart) {\n      return this._virtualStart + (pidx - this._physicalStart);\n    }\n    return this._virtualStart + (this._physicalCount - this._physicalStart) + pidx;\n  },\n\n  /**\n   * Updates the height for a given set of items.\n   *\n   * @param {!Array<number>=} itemSet\n   */\n  _updateMetrics: function(itemSet) {\n    // Make sure we distributed all the physical items\n    // so we can measure them.\n    flush ? flush() : flush$0();\n\n    var newPhysicalSize = 0;\n    var oldPhysicalSize = 0;\n    var prevAvgCount = this._physicalAverageCount;\n    var prevPhysicalAvg = this._physicalAverage;\n\n    this._iterateItems(function(pidx, vidx) {\n      oldPhysicalSize += this._physicalSizes[pidx];\n      this._physicalSizes[pidx] = this._physicalItems[pidx].offsetHeight;\n      newPhysicalSize += this._physicalSizes[pidx];\n      this._physicalAverageCount += this._physicalSizes[pidx] ? 1 : 0;\n    }, itemSet);\n\n    if (this.grid) {\n      this._updateGridMetrics();\n      this._physicalSize = Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n    } else {\n      oldPhysicalSize = (this._itemsPerRow === 1) ?\n        oldPhysicalSize :\n        Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n      this._physicalSize = this._physicalSize + newPhysicalSize - oldPhysicalSize;\n      this._itemsPerRow = 1;\n    }\n    // Update the average if it measured something.\n    if (this._physicalAverageCount !== prevAvgCount) {\n      this._physicalAverage = Math.round(\n        ((prevPhysicalAvg * prevAvgCount) + newPhysicalSize) /\n        this._physicalAverageCount);\n    }\n  },\n\n  /**\n   * Updates the position of the physical items.\n   */\n  _positionItems: function() {\n    this._adjustScrollPosition();\n\n    var y = this._physicalTop;\n\n    this._iterateItems(function(pidx, vidx) {\n      this.translate3d(0, y + 'px', 0, this._physicalItems[pidx]);\n      y += this._physicalSizes[pidx];\n    });\n  },\n\n  _getPhysicalSizeIncrement: function(pidx) {\n    if (!this.grid) {\n      return this._physicalSizes[pidx];\n    }\n    if (this._computeVidx(pidx) % this._itemsPerRow !== this._itemsPerRow - 1) {\n      return 0;\n    }\n    return this._rowHeight;\n  },\n\n  /**\n   * Adjusts the scroll position when it was overestimated.\n   */\n  _adjustScrollPosition: function() {\n    var deltaHeight = this._virtualStart === 0 ? this._physicalTop : Math.min(this._scrollPosition + this._physicalTop, 0);\n    // Note: the delta can be positive or negative.\n    if (deltaHeight !== 0) {\n      this._physicalTop = this._physicalTop - deltaHeight;\n      var scrollTop = this._scrollTop;\n      // juking scroll position during interial scrolling on iOS is no bueno\n      if (!IOS_TOUCH_SCROLLING && scrollTop > 0) {\n        this._resetScrollPosition(scrollTop - deltaHeight);\n      }\n    }\n  },\n\n  /**\n   * Sets the position of the scroll.\n   */\n  _resetScrollPosition: function(pos) {\n    if (this.scrollTarget && pos >= 0) {\n      this._scrollTop = pos;\n      this._scrollPosition = this._scrollTop;\n    }\n  },\n\n  /**\n   * Sets the scroll height, that's the height of the content,\n   *\n   * @param {boolean=} forceUpdate If true, updates the height no matter what.\n   */\n  _updateScrollerSize: function(forceUpdate) {\n    if (this.grid) {\n      this._estScrollHeight = this._virtualRowCount * this._rowHeight;\n    } else {\n      this._estScrollHeight = (this._physicalBottom +\n          Math.max(this._virtualCount - this._physicalCount - this._virtualStart, 0) * this._physicalAverage);\n    }\n    forceUpdate = forceUpdate || this._scrollHeight === 0;\n    forceUpdate = forceUpdate || this._scrollPosition >= this._estScrollHeight - this._physicalSize;\n    forceUpdate = forceUpdate || this.grid && this.$.items.style.height < this._estScrollHeight;\n    // Amortize height adjustment, so it won't trigger large repaints too often.\n    if (forceUpdate || Math.abs(this._estScrollHeight - this._scrollHeight) >= this._viewportHeight) {\n      this.$.items.style.height = this._estScrollHeight + 'px';\n      this._scrollHeight = this._estScrollHeight;\n    }\n  },\n\n  /**\n   * Scroll to a specific index in the virtual list regardless\n   * of the physical items in the DOM tree.\n   *\n   * @method scrollToIndex\n   * @param {number} idx The index of the item\n   */\n  scrollToIndex: function(idx) {\n    if (typeof idx !== 'number' || idx < 0 || idx > this.items.length - 1) {\n      return;\n    }\n    flush ? flush() : flush$0();\n    // Items should have been rendered prior scrolling to an index.\n    if (this._physicalCount === 0) {\n      return;\n    }\n    idx = this._clamp(idx, 0, this._virtualCount - 1);\n    // Update the virtual start only when needed.\n    if (!this._isIndexRendered(idx) || idx >= this._maxVirtualStart) {\n      this._virtualStart = this.grid ? (idx - this._itemsPerRow * 2) : (idx - 1);\n    }\n    this._manageFocus();\n    this._assignModels();\n    this._updateMetrics();\n    // Estimate new physical offset.\n    this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n\n    var currentTopItem = this._physicalStart;\n    var currentVirtualItem = this._virtualStart;\n    var targetOffsetTop = 0;\n    var hiddenContentSize = this._hiddenContentSize;\n    // scroll to the item as much as we can.\n    while (currentVirtualItem < idx && targetOffsetTop <= hiddenContentSize) {\n      targetOffsetTop = targetOffsetTop + this._getPhysicalSizeIncrement(currentTopItem);\n      currentTopItem = (currentTopItem + 1) % this._physicalCount;\n      currentVirtualItem++;\n    }\n    this._updateScrollerSize(true);\n    this._positionItems();\n    this._resetScrollPosition(this._physicalTop + this._scrollOffset + targetOffsetTop);\n    this._increasePoolIfNeeded(0);\n    // clear cached visible index.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n  },\n\n  /**\n   * Reset the physical average and the average count.\n   */\n  _resetAverage: function() {\n    this._physicalAverage = 0;\n    this._physicalAverageCount = 0;\n  },\n\n  /**\n   * A handler for the `iron-resize` event triggered by `IronResizableBehavior`\n   * when the element is resized.\n   */\n  _resizeHandler: function() {\n    this._debounce('_render', function() {\n      // clear cached visible index.\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      // Skip the resize event on touch devices when the address bar slides up.\n      this.updateViewportBoundaries();\n      if (this._isVisible) {\n        // Reinstall the scroll event listener.\n        this.toggleScrollListener(true);\n        this._resetAverage();\n        this._render();\n      } else {\n        // Uninstall the scroll event listener.\n        this.toggleScrollListener(false);\n      }\n    }, ANIMATION_FRAME);\n  },\n\n  /**\n   * Converts a random index to the index of the item that completes it's row.\n   * Allows for better order and fill computation when grid == true.\n   */\n  _convertIndexToCompleteRow: function(idx) {\n    // when grid == false _itemPerRow can be unset.\n    this._itemsPerRow = this._itemsPerRow || 1;\n    return this.grid ? Math.ceil(idx / this._itemsPerRow) * this._itemsPerRow : idx;\n  },\n\n  _isIndexRendered: function(idx) {\n    return idx >= this._virtualStart && idx <= this._virtualEnd;\n  },\n\n  _getPhysicalIndex: function(vidx) {\n    return (this._physicalStart + (vidx - this._virtualStart)) % this._physicalCount;\n  },\n\n  _clamp: function(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n  },\n\n  _debounce: function(name, cb, asyncModule) {\n    this._debouncers = this._debouncers || {};\n    this._debouncers[name] = Debouncer.debounce(\n      this._debouncers[name],\n      asyncModule,\n      cb.bind(this));\n    enqueueDebouncer(this._debouncers[name]);\n  }\n\n});\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n\nimport { animationFrame } from '@polymer/polymer/lib/utils/async.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { PolymerIronList } from './iron-list.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n/**\n * This Element is used internally by vaadin-grid.\n *\n * @private\n */\nclass GridScrollerElement extends PolymerIronList {\n\n  static get is() {\n    return 'vaadin-grid-scroller';\n  }\n\n  static get properties() {\n    return {\n      size: {\n        type: Number,\n        notify: true\n      },\n      _vidxOffset: {\n        value: 0\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_effectiveSizeChanged(_effectiveSize)'\n    ];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._scrollHandler();\n  }\n\n  /**\n  * @protected\n  */\n  _updateScrollerItem(item, index) {}\n  /**\n  * @protected\n  */\n  _afterScroll() {}\n  /**\n  * @protected\n  */\n  _getRowTarget() {}\n  /**\n  * @protected\n  */\n  _createScrollerRows() {}\n  /**\n  * @protected\n  */\n  _canPopulate() {}\n\n  /**\n  * @private\n  */\n  scrollToIndex(index) {\n    this._warnPrivateAPIAccess('scrollToIndex');\n\n    if (index > 0) {\n      this._pendingScrollToIndex = null;\n    }\n    if (!parseInt(this.$.items.style.borderTopWidth) && index > 0) {\n      // Schedule another scroll to be invoked once init is complete\n      this._pendingScrollToIndex = index;\n    }\n\n    this._scrollingToIndex = true;\n    index = Math.min(Math.max(index, 0), this._effectiveSize - 1);\n    this.$.table.scrollTop = index / this._effectiveSize * (this.$.table.scrollHeight - this.$.table.offsetHeight);\n    this._scrollHandler();\n\n    if (this._accessIronListAPI(() => this._maxScrollTop) && this._virtualCount < this._effectiveSize) {\n      this._adjustVirtualIndexOffset(1000000);\n    }\n\n    this._accessIronListAPI(() => super.scrollToIndex(index - this._vidxOffset));\n    this._scrollHandler();\n\n    // Ensure scroll position\n    const row = Array.from(this.$.items.children).filter(child => child.index === index)[0];\n    if (row) {\n      const headerOffset = row.getBoundingClientRect().top - this.$.header.getBoundingClientRect().bottom;\n      if (Math.abs(headerOffset) > 1) {\n        this.$.table.scrollTop += headerOffset;\n        this._scrollHandler();\n      }\n    }\n\n    this._scrollingToIndex = false;\n  }\n\n  _effectiveSizeChanged(size) {\n    let fvi; // first visible (adjusted) index\n    let fviOffset = 0;\n    this._iterateItems((pidx, vidx) => {\n      if (vidx === this._firstVisibleIndex) {\n        const row = this._physicalItems[pidx];\n        fvi = row.index;\n        fviOffset = row.getBoundingClientRect().top;\n      }\n    });\n\n    if (this.items && size < this.items.length) {\n      // Size was reduced, scroll to 0 first\n      this._scrollTop = 0;\n    }\n    if (!Array.isArray(this.items)) {\n      // Edge/IE seems to have the lowest maximum\n      const maxVirtualItems = this._edge || this._ie ? 30000 : 100000;\n      this.items = {length: Math.min(size, maxVirtualItems)};\n    }\n\n    this._accessIronListAPI(() => super._itemsChanged({path: 'items'}));\n\n    this._virtualCount = Math.min(this.items.length, size) || 0;\n\n    if (this._scrollTop === 0) {\n      this._accessIronListAPI(() => this._scrollToIndex(Math.min(size - 1, fvi)));\n      this._iterateItems((pidx, vidx) => {\n        const row = this._physicalItems[pidx];\n        if (row.index === fvi) {\n          this.$.table.scrollTop += Math.round(row.getBoundingClientRect().top - fviOffset);\n        }\n        // Restore keyboard focus to the right cell\n        if (row.index === this._focusedItemIndex && this._itemsFocusable && this.$.items.contains(this.shadowRoot.activeElement)) {\n          const cellIndex = Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);\n          row.children[cellIndex].focus();\n        }\n      });\n    }\n    this._assignModels();\n    requestAnimationFrame(() => this._update());\n  }\n\n  _positionItems() {\n    this._adjustScrollPosition();\n\n    let rePosition;\n    if (isNaN(this._physicalTop)) {\n      rePosition = true;\n      this._physicalTop = 0;\n    }\n\n    let y = this._physicalTop;\n    this._iterateItems((pidx, vidx) => {\n      this._physicalItems[pidx].style.transform = `translateY(${y}px)`;\n      y += this._physicalSizes[pidx];\n    });\n\n    if (rePosition) {\n      this._scrollToIndex(0);\n    }\n  }\n\n  _increasePoolIfNeeded(count) {\n    if ((count === 0 && this._scrollingToIndex) || !this._canPopulate() || !this._effectiveSize) {\n      return;\n    }\n\n    if (!this._initialPoolCreated) {\n      this._initialPoolCreated = true;\n      super._increasePoolIfNeeded(25);\n    } else if (this._optPhysicalSize !== Infinity) {\n      this._debounceIncreasePool = Debouncer.debounce(\n        this._debounceIncreasePool,\n        animationFrame,\n        () => {\n          this._updateMetrics();\n          const remainingPhysicalSize = this._optPhysicalSize - this._physicalSize;\n          let estimatedMissingRowCount = Math.ceil(remainingPhysicalSize / this._physicalAverage);\n\n          if (this._physicalCount + estimatedMissingRowCount > this._effectiveSize) {\n            // Do not increase the physical item count above the this._effectiveSize\n            estimatedMissingRowCount = Math.max(0, this._effectiveSize - this._physicalCount);\n          }\n\n          if (this._physicalSize && estimatedMissingRowCount > 0 && this._optPhysicalSize !== Infinity) {\n            super._increasePoolIfNeeded(estimatedMissingRowCount);\n            // Ensure the rows are in order after increasing pool\n            this.__reorderChildNodes();\n          }\n        });\n    }\n  }\n\n  __reorderChildNodes() {\n    const childNodes = Array.from(this.$.items.childNodes);\n    const rowsInOrder = !!childNodes.reduce((inOrder, current, currentIndex, array) => {\n      if (currentIndex === 0 || array[currentIndex - 1].index === current.index - 1) {\n        return inOrder;\n      }\n    }, true);\n\n    if (!rowsInOrder) {\n      childNodes.sort((row1, row2) => {\n        return row1.index - row2.index;\n      }).forEach(row => this.$.items.appendChild(row));\n    }\n  }\n\n  _createPool(size) {\n    const fragment = document.createDocumentFragment();\n    const physicalItems = this._createScrollerRows(size);\n\n    physicalItems.forEach(inst => fragment.appendChild(inst));\n    this._getRowTarget().appendChild(fragment);\n\n    // Weird hack needed to get Safari to actually distribute slots\n    const content = this.querySelector('[slot]');\n    if (content) {\n      const slot = content.getAttribute('slot');\n      content.setAttribute('slot', 'foo-bar');\n      content.setAttribute('slot', slot);\n    }\n\n    this._updateHeaderFooterMetrics();\n\n    afterNextRender(this, () => this.notifyResize());\n    return physicalItems;\n  }\n\n  /**\n   * Assigns the data models to a given set of items.\n   * @param {!Array<number>=} itemSet\n   */\n  _assignModels(itemSet) {\n    this._iterateItems((pidx, vidx) => {\n      const el = this._physicalItems[pidx];\n      this._toggleAttribute('hidden', vidx >= this._effectiveSize, el);\n      this._updateScrollerItem(el, vidx + (this._vidxOffset || 0));\n    }, itemSet);\n  }\n\n  _scrollHandler() {\n    const delta = this.$.table.scrollTop - this._scrollPosition;\n    this._accessIronListAPI(super._scrollHandler);\n    const oldOffset = this._vidxOffset;\n    if (this._accessIronListAPI(() => this._maxScrollTop) && this._virtualCount < this._effectiveSize) {\n      this._adjustVirtualIndexOffset(delta);\n    }\n    if (this._vidxOffset !== oldOffset) {\n      this._update();\n    }\n    this._afterScroll();\n  }\n\n  _adjustVirtualIndexOffset(delta) {\n    if (Math.abs(delta) > 10000) {\n      if (this._noScale) {\n        this._noScale = false;\n        return;\n      }\n      const scale = this.$.table.scrollTop / (this.$.table.scrollHeight - this.$.table.offsetHeight);\n      const offset = scale * this._effectiveSize;\n      this._vidxOffset = Math.round(offset - scale * this._virtualCount);\n    } else {\n      // Make sure user can always swipe/wheel scroll to the start and end\n      const oldOffset = this._vidxOffset || 0;\n      const threshold = 1000;\n      const maxShift = 100;\n      // At start\n      if (this._scrollTop === 0) {\n        this._vidxOffset = 0;\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(0);\n        }\n      } else if (this.firstVisibleIndex < threshold && this._vidxOffset > 0) {\n        this._vidxOffset -= Math.min(this._vidxOffset, maxShift);\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this.firstVisibleIndex + (oldOffset - this._vidxOffset));\n        }\n        this._noScale = true;\n      }\n      // At end\n      const maxOffset = this._effectiveSize - this._virtualCount;\n      if (this._scrollTop >= this._maxScrollTop && this._maxScrollTop > 0) {\n        this._vidxOffset = maxOffset;\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this._virtualCount);\n        }\n      } else if (this.firstVisibleIndex > this._virtualCount - threshold && this._vidxOffset < maxOffset) {\n        this._vidxOffset += Math.min(maxOffset - this._vidxOffset, maxShift);\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this.firstVisibleIndex - (this._vidxOffset - oldOffset));\n        }\n        this._noScale = true;\n      }\n    }\n  }\n\n  _accessIronListAPI(cb) {\n    this._warnPrivateAPIAccessAsyncEnabled = false;\n    const returnValue = cb.apply(this);\n    this._debouncerWarnPrivateAPIAccess = Debouncer.debounce(\n      this._debouncerWarnPrivateAPIAccess,\n      animationFrame,\n      () => this._warnPrivateAPIAccessAsyncEnabled = true\n    );\n    return returnValue;\n  }\n\n  /* Allow iron-list to access its APIs from debounced callbacks without warns */\n  _debounceRender(cb, asyncModule) {\n    super._debounceRender(() => this._accessIronListAPI(cb), asyncModule);\n  }\n\n  /* Warn when iron-list APIs are being accessed directly */\n  _warnPrivateAPIAccess(apiName) {\n    if (this._warnPrivateAPIAccessAsyncEnabled) {\n      console.warn(`Accessing private API (${apiName})!`);\n    }\n  }\n\n  _render() {\n    this._accessIronListAPI(super._render);\n  }\n\n  _createFocusBackfillItem() { /* Ignore */ }\n  _multiSelectionChanged() { /* Ignore */ }\n  clearSelection() { /* Ignore */ }\n  _itemsChanged() { /* Ignore */ }\n  _manageFocus() { /* Ignore */ }\n  _removeFocusedItem() { /* Ignore */ }\n\n  get _firstVisibleIndex() {\n    return this._accessIronListAPI(() => super.firstVisibleIndex);\n  }\n  get _lastVisibleIndex() {\n    return this._accessIronListAPI(() => super.lastVisibleIndex);\n  }\n  _scrollToIndex(index) {\n    this._accessIronListAPI(() => this.scrollToIndex(index));\n  }\n  get firstVisibleIndex() {\n    this._warnPrivateAPIAccess('firstVisibleIndex'); return super.firstVisibleIndex;\n  }\n  set firstVisibleIndex(value) {\n    this._warnPrivateAPIAccess('firstVisibleIndex'); super.firstVisibleIndex = value;\n  }\n  get lastVisibleIndex() {\n    this._warnPrivateAPIAccess('lastVisibleIndex'); return super.lastVisibleIndex;\n  }\n  set lastVisibleIndex(value) {\n    this._warnPrivateAPIAccess('lastVisibleIndex'); super.lastVisibleIndex = value;\n  }\n  updateViewportBoundaries() {\n    this._warnPrivateAPIAccess('updateViewportBoundaries'); super.updateViewportBoundaries.apply(this, arguments);\n  }\n  _resizeHandler() {\n    super._resizeHandler();\n    flush();\n  }\n}\n\ncustomElements.define(GridScrollerElement.is, GridScrollerElement);\n\nexport { GridScrollerElement as ScrollerElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const A11yMixin = superClass => class A11yMixin extends superClass {\n  static get observers() {\n    return [\n      '_a11yUpdateGridSize(size, _columnTree, _columnTree.*)'\n    ];\n  }\n\n  _a11yGetHeaderRowCount(_columnTree) {\n    return _columnTree.filter(level => level.some(col => col._headerTemplate || col.headerRenderer || col.path || col.header)).length;\n  }\n\n  _a11yGetFooterRowCount(_columnTree) {\n    return _columnTree.filter(level => level.some(col => col._headerTemplate || col.headerRenderer)).length;\n  }\n\n  _a11yUpdateGridSize(size, _columnTree) {\n    if (size === undefined || _columnTree === undefined) {\n      return;\n    }\n\n    const bodyColumns = _columnTree[_columnTree.length - 1];\n    this.$.table.setAttribute(\n      'aria-rowcount',\n      size + this._a11yGetHeaderRowCount(_columnTree) + this._a11yGetFooterRowCount(_columnTree)\n    );\n    this.$.table.setAttribute('aria-colcount', bodyColumns && bodyColumns.length || 0);\n\n    this._a11yUpdateHeaderRows();\n    this._a11yUpdateFooterRows();\n  }\n\n  _a11yUpdateHeaderRows() {\n    Array.from(this.$.header.children).forEach((headerRow, index) =>\n      headerRow.setAttribute('aria-rowindex', index + 1)\n    );\n  }\n\n  _a11yUpdateFooterRows() {\n    Array.from(this.$.footer.children).forEach((footerRow, index) =>\n      footerRow.setAttribute(\n        'aria-rowindex',\n        this._a11yGetHeaderRowCount(this._columnTree) + this.size + index + 1\n      )\n    );\n  }\n\n  _a11yUpdateRowRowindex(row, index) {\n    row.setAttribute('aria-rowindex', index + this._a11yGetHeaderRowCount(this._columnTree) + 1);\n  }\n\n  _a11yUpdateRowSelected(row, selected) {\n    // Jaws reads selection only for rows, NVDA only for cells\n    row.setAttribute('aria-selected', Boolean(selected));\n    Array.from(row.children).forEach(cell =>\n      cell.setAttribute('aria-selected', Boolean(selected))\n    );\n  }\n\n  _a11yUpdateRowLevel(row, level) {\n    row.setAttribute('aria-level', level + 1);\n  }\n\n  _a11yUpdateRowDetailsOpened(row, detailsOpened) {\n    Array.from(row.children).forEach(cell => {\n      if (typeof detailsOpened === 'boolean') {\n        cell.setAttribute('aria-expanded', detailsOpened);\n      } else {\n        if (cell.hasAttribute('aria-expanded')) {\n          cell.removeAttribute('aria-expanded');\n        }\n      }\n    });\n  }\n\n  _a11ySetRowDetailsCell(row, detailsCell) {\n    Array.from(row.children).forEach(cell => {\n      if (cell !== detailsCell) {\n        cell.setAttribute('aria-controls', detailsCell.id);\n      }\n    });\n  }\n\n  _a11yUpdateCellColspan(cell, colspan) {\n    cell.setAttribute('aria-colspan', Number(colspan));\n  }\n\n  _a11yUpdateSorters() {\n    Array.from(this.querySelectorAll('vaadin-grid-sorter')).forEach(sorter => {\n      let cellContent = sorter.parentNode;\n      while (cellContent && cellContent.localName !== 'vaadin-grid-cell-content') {\n        cellContent = cellContent.parentNode;\n      }\n      if (cellContent && cellContent.assignedSlot) {\n        const cell = cellContent.assignedSlot.parentNode;\n        cell.setAttribute('aria-sort', {\n          'asc': 'ascending',\n          'desc': 'descending'\n        }[String(sorter.direction)] || 'none');\n      }\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const ActiveItemMixin = superClass => class ActiveItemMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * The item user has last interacted with. Turns to `null` after user deactivates\n       * the item by re-interacting with the currently active item.\n       */\n      activeItem: {\n        type: Object,\n        notify: true,\n        value: null\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this.$.scroller.addEventListener('click', this._onClick.bind(this));\n    this.addEventListener('cell-activate', this._activateItem.bind(this));\n  }\n\n  _activateItem(e) {\n    const model = e.detail.model;\n    const clickedItem = model ? model.item : null;\n\n    if (clickedItem) {\n      this.activeItem = !this._itemsEqual(this.activeItem, clickedItem) ? clickedItem : null;\n    }\n  }\n\n  // we need to listen to click instead of tap because on mobile safari, the\n  // document.activeElement has not been updated (focus has not been shifted)\n  // yet at the point when tap event is being executed.\n  _onClick(e) {\n    if (e.defaultPrevented) {\n      // Something has handled this click already, e. g., <vaadin-grid-sorter>\n      return;\n    }\n\n    const path = e.composedPath();\n    const cell = path[path.indexOf(this.$.table) - 3];\n    if (!cell || cell.getAttribute('part').indexOf('details-cell') > -1) {\n      return;\n    }\n    const cellContent = cell._content;\n\n    const activeElement = this.getRootNode().activeElement;\n    const cellContentHasFocus = cellContent.contains(activeElement) &&\n      // MSIE bug: flex children receive focus. Make type & attributes check.\n      (!this._ie || this._isFocusable(activeElement));\n    if (!cellContentHasFocus && !this._isFocusable(e.target)) {\n      this.dispatchEvent(new CustomEvent('cell-activate', {detail: {\n        model: this.__getRowModel(cell.parentElement)\n      }}));\n    }\n  }\n\n  _isFocusable(target) {\n    if (!target.parentNode) {\n      return false;\n    }\n    const focusables = Array.from(target.parentNode\n      .querySelectorAll('[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]'))\n      .filter(element => element.getAttribute('part') !== 'cell body-cell');\n\n    const isFocusableElement = focusables.indexOf(target) !== -1;\n    return !target.disabled && isFocusableElement;\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Base } from '@polymer/polymer/polymer-legacy.js';\n\n/**\n * @polymerMixin\n */\nexport const ArrayDataProviderMixin = superClass => class ArrayDataProviderMixin extends superClass {\n\n  static get properties() {\n\n    return {\n      /**\n       * An array containing the items which will be stamped to the column template\n       * instances.\n       */\n      items: Array\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_itemsChanged(items, items.*, isAttached)'\n    ];\n  }\n\n  _itemsChanged(items, splices, isAttached) {\n    if (!isAttached) {\n      return;\n    }\n    if (!Array.isArray(items)) {\n      if (items === undefined || items === null) {\n        this.size = 0;\n      }\n      if (this.dataProvider === this._arrayDataProvider) {\n        this.dataProvider = undefined;\n      }\n      return;\n    }\n\n    this.size = items.length;\n    this.dataProvider = this.dataProvider || this._arrayDataProvider;\n    this.clearCache();\n    this._ensureFirstPageLoaded();\n  }\n\n  _arrayDataProvider(opts, cb) {\n    let items = (Array.isArray(this.items) ? this.items : []).slice(0);\n\n    if (this._filters && this._checkPaths(this._filters, 'filtering', items)) {\n      items = this._filter(items);\n    }\n\n    this.size = items.length;\n\n    if (opts.sortOrders.length && this._checkPaths(this._sorters, 'sorting', items)) {\n      items = items.sort(this._multiSort.bind(this));\n    }\n\n    const start = opts.page * opts.pageSize;\n    const end = start + opts.pageSize;\n    const slice = items.slice(start, end);\n    cb(slice, items.length);\n  }\n\n  /**\n   * Check array of filters/sorters for paths validity, console.warn invalid items\n   * @param {Array}  arrayToCheck The array of filters/sorters to check\n   * @param {string} action       The name of action to include in warning (filtering, sorting)\n   * @param {Array}  items\n   */\n  _checkPaths(arrayToCheck, action, items) {\n    if (!items.length) {\n      return false;\n    }\n\n    let result = true;\n\n    for (var i in arrayToCheck) {\n      const path = arrayToCheck[i].path;\n\n      // skip simple paths\n      if (!path || path.indexOf('.') === -1) {\n        continue;\n      }\n\n      const parentProperty = path.replace(/\\.[^\\.]*$/, ''); // a.b.c -> a.b\n      if (Base.get(parentProperty, items[0]) === undefined) {\n        console.warn(`Path \"${path}\" used for ${action} does not exist in all of the items, ${action} is disabled.`);\n        result = false;\n      }\n    }\n\n    return result;\n  }\n\n  _multiSort(a, b) {\n    return this._sorters.map(sort => {\n      if (sort.direction === 'asc') {\n        return this._compare(Base.get(sort.path, a), Base.get(sort.path, b));\n      } else if (sort.direction === 'desc') {\n        return this._compare(Base.get(sort.path, b), Base.get(sort.path, a));\n      }\n      return 0;\n    }).reduce((p, n) => {\n      return p ? p : n;\n    }, 0);\n  }\n\n  _normalizeEmptyValue(value) {\n    if ([undefined, null].indexOf(value) >= 0) {\n      return '';\n    } else if (isNaN(value)) {\n      return value.toString();\n    } else {\n      return value;\n    }\n  }\n\n  _compare(a, b) {\n    a = this._normalizeEmptyValue(a);\n    b = this._normalizeEmptyValue(b);\n\n    if (a < b) {\n      return -1;\n    }\n    if (a > b) {\n      return 1;\n    }\n    return 0;\n  }\n\n  _filter(items) {\n    return items.filter((item, index) => {\n      return this._filters.filter(filter => {\n        const value = this._normalizeEmptyValue(Base.get(filter.path, item));\n        const filterValueLowercase = this._normalizeEmptyValue(filter.value).toString().toLowerCase();\n        return value.toString().toLowerCase().indexOf(filterValueLowercase) === -1;\n      }).length === 0;\n    });\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\n\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnResizingMixin = superClass => class ColumnResizingMixin extends GestureEventListeners(superClass) {\n\n  ready() {\n    super.ready();\n    const scroller = this.$.scroller;\n    addListener(scroller, 'track', this._onHeaderTrack.bind(this));\n\n    // Disallow scrolling while resizing\n    scroller.addEventListener('touchmove', e => scroller.hasAttribute('column-resizing') && e.preventDefault());\n\n    // Disable contextmenu on any resize separator.\n    scroller.addEventListener('contextmenu', e => e.target.getAttribute('part') == 'resize-handle' && e.preventDefault());\n\n    // Disable native cell focus when resizing\n    scroller.addEventListener('mousedown', e => e.target.getAttribute('part') === 'resize-handle' && e.preventDefault());\n  }\n\n  _onHeaderTrack(e) {\n    const handle = e.target;\n    if (handle.getAttribute('part') === 'resize-handle') {\n      const cell = handle.parentElement;\n      let column = cell._column;\n\n      this._toggleAttribute('column-resizing', true, this.$.scroller);\n\n      // Get the target column to resize\n      while (column.localName === 'vaadin-grid-column-group') {\n        column = Array.prototype.slice.call(column._childColumns, 0)\n          .sort(function(a, b) {\n            return a._order - b._order;\n          })\n          .filter(function(column) {\n            return !column.hidden;\n          }).pop();\n      }\n\n      const columnRowCells = Array.from(this.$.header.querySelectorAll('[part~=\"row\"]:last-child [part~=\"cell\"]'));\n      var targetCell = columnRowCells.filter(cell => cell._column === column)[0];\n      // Resize the target column\n      if (targetCell.offsetWidth) {\n        var style = window.getComputedStyle(targetCell);\n        var minWidth = 10 + parseInt(style.paddingLeft) + parseInt(style.paddingRight) + parseInt(style.borderLeftWidth)\n          + parseInt(style.borderRightWidth) + parseInt(style.marginLeft) + parseInt(style.marginRight);\n        const maxWidth = targetCell.offsetWidth + (this.__isRTL ? targetCell.getBoundingClientRect().left - e.detail.x :\n          e.detail.x - targetCell.getBoundingClientRect().right);\n        column.width = Math.max(minWidth, maxWidth) + 'px';\n        column.flexGrow = 0;\n      }\n      // Fix width and flex-grow for all preceding columns\n      columnRowCells\n        .sort(\n          function(a, b) {\n            return a._column._order - b._column._order;\n          })\n        .forEach(function(cell, index, array) {\n          if (index < array.indexOf(targetCell)) {\n            cell._column.width = cell.offsetWidth + 'px';\n            cell._column.flexGrow = 0;\n          }\n        });\n\n      if (e.detail.state === 'end') {\n        this._toggleAttribute('column-resizing', false, this.$.scroller);\n        this.dispatchEvent(new CustomEvent('column-resize', {\n          detail: {resizedColumn: column}\n        }));\n      }\n\n      // Notify resize\n      this._resizeHandler();\n    }\n  }\n\n  /**\n  * Fired when a column in the grid is resized by the user.\n  *\n  * @event column-resize\n  * @param {Object} detail\n  * @param {Object} detail.resizedColumn the column that was resized\n  */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n\nexport const ItemCache = class ItemCache {\n\n  constructor(grid, parentCache, parentItem) {\n    this.grid = grid;\n    this.parentCache = parentCache;\n    this.parentItem = parentItem;\n    this.itemCaches = {};\n    this.items = {};\n    this.effectiveSize = 0;\n    this.size = 0;\n    this.pendingRequests = {};\n  }\n\n  isLoading() {\n    return Object.keys(this.pendingRequests).length || Object.keys(this.itemCaches).filter(index => {\n      return this.itemCaches[index].isLoading();\n    })[0];\n  }\n\n  getItemForIndex(index) {\n    const {cache, scaledIndex} = this.getCacheAndIndex(index);\n    return cache.items[scaledIndex];\n  }\n\n  updateSize() {\n    this.effectiveSize = (!this.parentItem || this.grid._isExpanded(this.parentItem)) ?\n      this.size + Object.keys(this.itemCaches).reduce((prev, curr) => {\n        const subCache = this.itemCaches[curr];\n        subCache.updateSize();\n        return prev + subCache.effectiveSize;\n      }, 0) :\n      0;\n  }\n\n  ensureSubCacheForScaledIndex(scaledIndex) {\n    if (!this.itemCaches[scaledIndex]) {\n      const subCache = new ItemCache(this.grid, this, this.items[scaledIndex]);\n      this.itemCaches[scaledIndex] = subCache;\n      this.grid._loadPage(0, subCache);\n    }\n  }\n\n  getCacheAndIndex(index) {\n    let thisLevelIndex = index;\n    const keys = Object.keys(this.itemCaches);\n    for (var i = 0; i < keys.length; i++) {\n      const expandedIndex = Number(keys[i]);\n      const subCache = this.itemCaches[expandedIndex];\n      if (thisLevelIndex <= expandedIndex) {\n        return {cache: this, scaledIndex: thisLevelIndex};\n      } else if (thisLevelIndex <= expandedIndex + subCache.effectiveSize) {\n        return subCache.getCacheAndIndex(thisLevelIndex - expandedIndex - 1);\n      }\n      thisLevelIndex -= subCache.effectiveSize;\n    }\n    return {cache: this, scaledIndex: thisLevelIndex};\n  }\n\n};\n\n/**\n * @polymerMixin\n */\nexport const DataProviderMixin = superClass => class DataProviderMixin extends superClass {\n\n  static get properties() {\n    return {\n\n      /**\n       * Number of items fetched at a time from the dataprovider.\n       */\n      pageSize: {\n        type: Number,\n        value: 50,\n        observer: '_pageSizeChanged'\n      },\n\n      /**\n       * Function that provides items lazily. Receives arguments `params`, `callback`\n       *\n       * `params.page` Requested page index\n       *\n       * `params.pageSize` Current page size\n       *\n       * `params.filters` Currently applied filters\n       *\n       * `params.sortOrders` Currently applied sorting orders\n       *\n       * `params.parentItem` When tree is used, and sublevel items\n       * are requested, reference to parent item of the requested sublevel.\n       * Otherwise `undefined`.\n       *\n       * `callback(items, size)` Callback function with arguments:\n       *   - `items` Current page of items\n       *   - `size` Total number of items. When tree sublevel items\n       *     are requested, total number of items in the requested sublevel.\n       *     Optional when tree is not used, required for tree.\n       */\n      dataProvider: {\n        type: Object,\n        notify: true,\n        observer: '_dataProviderChanged'\n      },\n\n      /**\n       * `true` while data is being requested from the data provider.\n       */\n      loading: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        reflectToAttribute: true\n      },\n\n      _cache: {\n        type: Object,\n        value: function() {\n          const cache = new ItemCache(this);\n          return cache;\n        }\n      },\n\n      /**\n       * Path to an item sub-property that identifies the item.\n       */\n      itemIdPath: {\n        type: String,\n        value: null\n      },\n\n      /**\n       * An array that contains the expanded items.\n       */\n      expandedItems: {\n        type: Object,\n        notify: true,\n        value: () => []\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_sizeChanged(size)',\n      '_itemIdPathChanged(itemIdPath)',\n      '_expandedItemsChanged(expandedItems.*)'\n    ];\n  }\n\n  _sizeChanged(size) {\n    const delta = size - this._cache.size;\n    this._cache.size += delta;\n    this._cache.effectiveSize += delta;\n    this._effectiveSize = this._cache.effectiveSize;\n  }\n\n  _getItem(index, el) {\n    if (index >= this._effectiveSize) {\n      return;\n    }\n\n    el.index = index;\n    const {cache, scaledIndex} = this._cache.getCacheAndIndex(index);\n    const item = cache.items[scaledIndex];\n    if (item) {\n      this._toggleAttribute('loading', false, el);\n      this._updateItem(el, item);\n      if (this._isExpanded(item)) {\n        cache.ensureSubCacheForScaledIndex(scaledIndex);\n      }\n    } else {\n      this._toggleAttribute('loading', true, el);\n      this._loadPage(this._getPageForIndex(scaledIndex), cache);\n    }\n\n  }\n\n  _expandedInstanceChangedCallback(inst, value) {\n    if (inst.item === undefined) {\n      return;\n    }\n    if (value) {\n      this.expandItem(inst.item);\n    } else {\n      this.collapseItem(inst.item);\n    }\n  }\n\n  /**\n   * Returns a value that identifies the item. Uses `itemIdPath` if available.\n   * Can be customized by overriding.\n   */\n  getItemId(item) {\n    return this.itemIdPath ? this.get(this.itemIdPath, item) : item;\n  }\n\n  _isExpanded(item) {\n    return this.__expandedKeys.has(this.getItemId(item));\n  }\n\n  _expandedItemsChanged(e) {\n    this.__cacheExpandedKeys();\n    this._cache.updateSize();\n    this._effectiveSize = this._cache.effectiveSize;\n    this._assignModels();\n  }\n\n  _itemIdPathChanged(e) {\n    this.__cacheExpandedKeys();\n  }\n\n  __cacheExpandedKeys() {\n    if (this.expandedItems) {\n      this.__expandedKeys = new Set();\n      this.expandedItems.forEach(item => {\n        this.__expandedKeys.add(this.getItemId(item));\n      });\n    }\n  }\n\n  /**\n   * Expands the given item tree.\n   */\n  expandItem(item) {\n    if (!this._isExpanded(item)) {\n      this.push('expandedItems', item);\n    }\n  }\n\n  /**\n   * Collapses the given item tree.\n   */\n  collapseItem(item) {\n    if (this._isExpanded(item)) {\n      this.splice('expandedItems', this._getItemIndexInArray(item, this.expandedItems), 1);\n    }\n  }\n\n  _getIndexLevel(index) {\n    let {cache} = this._cache.getCacheAndIndex(index);\n    let level = 0;\n    while (cache.parentCache) {\n      cache = cache.parentCache;\n      level++;\n    }\n    return level;\n  }\n\n  _canPopulate() {\n    return this._hasData && this._columnTree;\n  }\n\n  _loadPage(page, cache) {\n    // make sure same page isn't requested multiple times.\n    if (!cache.pendingRequests[page] && this.dataProvider) {\n      this._setLoading(true);\n      cache.pendingRequests[page] = true;\n      const params = {\n        page,\n        pageSize: this.pageSize,\n        sortOrders: this._mapSorters(),\n        filters: this._mapFilters(),\n        parentItem: cache.parentItem\n      };\n\n      this.dataProvider(params, (items, size) => {\n        if (size !== undefined) {\n          cache.size = size;\n        } else {\n          if (params.parentItem) {\n            cache.size = items.length;\n          }\n        }\n\n        const currentItems = Array.from(this.$.items.children).map(row => row._item);\n\n        // Populate the cache with new items\n        items.forEach((item, itemsIndex) => {\n          const itemIndex = page * this.pageSize + itemsIndex;\n          cache.items[itemIndex] = item;\n          if (this._isExpanded(item) && currentItems.indexOf(item) > -1) {\n            // Force synchronous data request for expanded item sub-cache\n            cache.ensureSubCacheForScaledIndex(itemIndex);\n          }\n        });\n\n        this._hasData = true;\n\n        delete cache.pendingRequests[page];\n\n        this._setLoading(false);\n        this._cache.updateSize();\n        this._effectiveSize = this._cache.effectiveSize;\n\n        Array.from(this.$.items.children)\n          .filter(row => !row.hidden)\n          .forEach(row => {\n            const cachedItem = this._cache.getItemForIndex(row.index);\n            if (cachedItem) {\n              this._toggleAttribute('loading', false, row);\n              this._updateItem(row, cachedItem);\n            }\n          });\n\n        this._increasePoolIfNeeded(0);\n\n        this.__itemsReceived();\n      });\n    }\n  }\n\n  _getPageForIndex(index) {\n    return Math.floor(index / this.pageSize);\n  }\n\n  /**\n   * Clears the cached pages and reloads data from dataprovider when needed.\n   */\n  clearCache() {\n    this._cache = new ItemCache(this);\n    Array.from(this.$.items.children).forEach(row => {\n      Array.from(row.children).forEach(cell => {\n        // Force data system to pick up subproperty changes\n        cell._instance && cell._instance._setPendingProperty('item', {}, false);\n      });\n    });\n    this._cache.size = this.size || 0;\n    this._cache.updateSize();\n    this._hasData = false;\n    this._assignModels();\n\n    if (!this._effectiveSize) {\n      this._loadPage(0, this._cache);\n    }\n  }\n\n  _pageSizeChanged(pageSize, oldPageSize) {\n    if (oldPageSize !== undefined && pageSize !== oldPageSize) {\n      this.clearCache();\n    }\n  }\n\n  _checkSize() {\n    if (this.size === undefined && this._effectiveSize === 0) {\n      console.warn(\n        'The <vaadin-grid> needs the total number of items' +\n        ' in order to display rows. Set the total number of items' +\n        ' to the `size` property, or provide the total number of items' +\n        ' in the second argument of the `dataProvider`s `callback` call.'\n      );\n    }\n  }\n\n  _dataProviderChanged(dataProvider, oldDataProvider) {\n    if (oldDataProvider !== undefined) {\n      this.clearCache();\n    }\n\n    if (dataProvider && this.items && this.items.length) {\n      // Fixes possibly invalid cached lastVisibleIndex value in <iron-list>\n      this._scrollToIndex(this._firstVisibleIndex);\n    }\n\n    this._ensureFirstPageLoaded();\n\n    this._debouncerCheckSize = Debouncer.debounce(\n      this._debouncerCheckSize,\n      timeOut.after(2000),\n      this._checkSize.bind(this));\n\n    this._scrollHandler();\n  }\n\n  _ensureFirstPageLoaded() {\n    if (!this._hasData) {\n      // load data before adding rows to make sure they have content when\n      // rendered for the first time.\n      this._loadPage(0, this._cache, () => {\n        const hadData = this._hasData;\n        this._hasData = true;\n        if (!hadData) {\n          this.notifyResize();\n        }\n      });\n    }\n  }\n\n  _itemsEqual(item1, item2) {\n    return this.getItemId(item1) === this.getItemId(item2);\n  }\n\n  _getItemIndexInArray(item, array) {\n    let result = -1;\n    array.forEach((i, idx) => {\n      if (this._itemsEqual(i, item)) {\n        result = idx;\n      }\n    });\n    return result;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\n\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * @polymerMixin\n */\nexport const DynamicColumnsMixin = superClass => class DynamicColumnsMixin extends superClass {\n\n  ready() {\n    super.ready();\n    this._addNodeObserver();\n  }\n\n  _hasColumnGroups(columns) {\n    for (let i = 0; i < columns.length; i++) {\n      if (columns[i].localName === 'vaadin-grid-column-group') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  _getChildColumns(el) {\n    return FlattenedNodesObserver.getFlattenedNodes(el).filter(this._isColumnElement);\n  }\n\n  _flattenColumnGroups(columns) {\n    return columns.map(col => {\n      if (col.localName === 'vaadin-grid-column-group') {\n        return this._getChildColumns(col);\n      } else {\n        return [col];\n      }\n    }).reduce((prev, curr) => {\n      return prev.concat(curr);\n    }, []);\n  }\n\n  _getColumnTree() {\n    var rootColumns = FlattenedNodesObserver.getFlattenedNodes(this).filter(this._isColumnElement);\n    var _columnTree = [];\n\n    for (var c = rootColumns; ;) {\n      _columnTree.push(c);\n      if (!this._hasColumnGroups(c)) {\n        break;\n      }\n      c = this._flattenColumnGroups(c);\n    }\n\n    return _columnTree;\n  }\n\n  _updateColumnTree() {\n    var columnTree = this._getColumnTree();\n    if (!this._arrayEquals(columnTree, this._columnTree)) {\n      this._columnTree = columnTree;\n    }\n  }\n\n  _addNodeObserver() {\n    this._observer = new FlattenedNodesObserver(this, info => {\n\n      const rowDetailsTemplate = info.addedNodes.filter(n => n.localName === 'template' && n.classList.contains('row-details'))[0];\n      if (rowDetailsTemplate && this._rowDetailsTemplate !== rowDetailsTemplate) {\n        this._rowDetailsTemplate = rowDetailsTemplate;\n      }\n\n      if (info.addedNodes.filter(this._isColumnElement).length > 0 ||\n        info.removedNodes.filter(this._isColumnElement).length > 0) {\n        this._updateColumnTree();\n      }\n\n      this._debouncerCheckImports = Debouncer.debounce(\n        this._debouncerCheckImports,\n        timeOut.after(2000),\n        this._checkImports.bind(this));\n\n      this._ensureFirstPageLoaded();\n    });\n  }\n\n  _arrayEquals(arr1, arr2) {\n    if (!arr1 || !arr2 || arr1.length != arr2.length) {\n      return false;\n    }\n\n    for (var i = 0, l = arr1.length; i < l; i++) {\n      // Check if we have nested arrays\n      if (arr1[i] instanceof Array && arr2[i] instanceof Array) {\n        // recurse into the nested arrays\n        if (!this._arrayEquals(arr1[i], arr2[i])) {\n          return false;\n        }\n      } else if (arr1[i] != arr2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  _checkImports() {\n    [\n      'vaadin-grid-column-group',\n      'vaadin-grid-filter',\n      'vaadin-grid-filter-column',\n      'vaadin-grid-tree-toggle',\n      'vaadin-grid-selection-column',\n      'vaadin-grid-sort-column',\n      'vaadin-grid-sorter'\n    ].forEach(elementName => {\n      var element = this.querySelector(elementName);\n      if (element && !(element instanceof PolymerElement)) {\n        console.warn(`Make sure you have imported the required module for <${elementName}> element.`);\n      }\n    });\n  }\n\n  _updateFirstAndLastColumn() {\n    Array.from(this.shadowRoot.querySelectorAll('tr')).forEach(row => this._updateFirstAndLastColumnForRow(row));\n  }\n\n  _updateFirstAndLastColumnForRow(row) {\n    Array.from(row.querySelectorAll('[part~=\"cell\"]:not([part~=\"details-cell\"])'))\n      .sort((a, b) => {\n        return a._column._order - b._column._order;\n      }).forEach((cell, cellIndex, children) => {\n        this._toggleAttribute('first-column', cellIndex === 0, cell);\n        this._toggleAttribute('last-column', cellIndex === children.length - 1, cell);\n      });\n  }\n\n  _isColumnElement(node) {\n    return node.nodeType === Node.ELEMENT_NODE && /\\bcolumn\\b/.test(node.localName);\n  }\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const EventContextMixin = superClass => class EventContextMixin extends superClass {\n\n  /**\n   * Returns an object with context information about the event target:\n   * - `item`: the data object corresponding to the targeted row (not specified when targeting header or footer)\n   * - `column`: the column element corresponding to the targeted cell (not specified when targeting row details)\n   * - `section`: whether the event targeted the body, header, footer or details of the grid\n   *\n   * These additional properties are included when `item` is specified:\n   * - `index`: the index of the item\n   * - `selected`: the selected state of the item\n   * - `detailsOpened`: whether the row details are open for the item\n   * - `expanded`: the expanded state of the tree toggle\n   * - `level`: the tree hierarchy level\n   *\n   * The returned object is populated only when a grid cell, header, footer or row details is found in `event.composedPath()`.\n   * This means mostly mouse and keyboard events. If such a grid part is not found in the path, an empty object is returned.\n   * This may be the case eg. if the event is fired on the `<vaadin-grid>` element and not any deeper in the DOM, or if\n   * the event targets the empty part of the grid body.\n   */\n  getEventContext(event) {\n\n    const context = {};\n\n    const path = event.composedPath();\n    const cell = path[path.indexOf(this.$.table) - 3];\n\n    if (!cell) {\n      return context;\n    }\n\n    context.section = ['body', 'header', 'footer', 'details']\n      .filter(section => cell.getAttribute('part').indexOf(section) > -1)[0];\n\n    if (cell._column) {\n      context.column = cell._column;\n    }\n\n    if (context.section === 'body' || context.section === 'details') {\n      Object.assign(context, this.__getRowModel(cell.parentElement));\n    }\n\n    return context;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const FilterMixin = superClass => class FilterMixin extends superClass {\n\n  static get properties() {\n    return {\n      _filters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('filter-changed', this._filterChanged.bind(this));\n  }\n\n  _filterChanged(e) {\n    if (this._filters.indexOf(e.target) === -1) {\n      this._filters.push(e.target);\n    }\n\n    e.stopPropagation();\n\n    if (this.dataProvider) {\n      this.clearCache();\n    }\n  }\n\n  _mapFilters() {\n    return this._filters.map(filter => {\n      return {\n        path: filter.path,\n        value: filter.value\n      };\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\n/**\n * `vaadin-grid-templatizer` is a helper element for the `vaadin-grid` that is preparing and\n * stamping instances of cells and columns templates\n *\n * @extends PolymerElement\n * @private\n */\nclass GridTemplatizer extends (class extends PolymerElement {}) {\n  static get is() {\n    return 'vaadin-grid-templatizer';\n  }\n\n  static get properties() {\n    return {\n      dataHost: Object,\n\n      template: Object,\n\n      _templateInstances: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _parentPathValues: {\n        value: function() {\n          return {};\n        }\n      },\n\n      _grid: Object\n    };\n  }\n\n  static get observers() {\n    return [\n      '_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)'\n    ];\n  }\n\n  constructor() {\n    super();\n\n    this._instanceProps = {\n      detailsOpened: true,\n      index: true,\n      item: true,\n      selected: true,\n      expanded: true,\n      level: true\n    };\n  }\n\n  createInstance() {\n    this._ensureTemplatized();\n    const instance = new this._TemplateClass({});\n    this.addInstance(instance);\n\n    return instance;\n  }\n\n  addInstance(instance) {\n    if (this._templateInstances.indexOf(instance) === -1) {\n      this._templateInstances.push(instance);\n      requestAnimationFrame(() => this.notifyPath('_templateInstances.*', this._templateInstances));\n    }\n  }\n\n  removeInstance(instance) {\n    const index = this._templateInstances.indexOf(instance);\n    this.splice('_templateInstances', index, 1);\n  }\n\n  _ensureTemplatized() {\n    if (!this._TemplateClass) {\n      this._TemplateClass = templatize(this.template, this, {\n        instanceProps: this._instanceProps,\n        parentModel: true,\n\n        forwardHostProp: function(prop, value) {\n          this._forwardParentProp(prop, value);\n\n          if (this._templateInstances) {\n            this._templateInstances.forEach(inst => inst.notifyPath(prop, value));\n          }\n        },\n\n        notifyInstanceProp: function(inst, prop, value) {\n          if (prop === 'index' || prop === 'item') {\n            // We dont need a change notification for these.\n            return;\n          }\n\n          const originalProp = `__${prop}__`;\n\n          // Notify for only user-action changes, not for scrolling updates. E. g.,\n          // if `detailsOpened` is different from `__detailsOpened__`, which was set during render.\n          if (inst[originalProp] === value) {\n            return;\n          }\n          inst[originalProp] = value;\n\n          const row = Array.from(this._grid.$.items.children).filter(row => this._grid._itemsEqual(row._item, inst.item))[0];\n          if (row) {\n            Array.from(row.children).forEach(cell => {\n              if (cell._instance) {\n                cell._instance[originalProp] = value;\n                cell._instance.notifyPath(prop, value);\n              }\n            });\n          }\n\n          const itemPrefix = 'item.';\n          if (Array.isArray(this._grid.items) && prop.indexOf(itemPrefix) === 0) {\n            const itemsIndex = this._grid.items.indexOf(inst.item);\n            const path = prop.slice(itemPrefix.length);\n            this._grid.notifyPath(`items.${itemsIndex}.${path}`, value);\n          }\n\n          const gridCallback = `_${prop}InstanceChangedCallback`;\n          if (this._grid && this._grid[gridCallback]) {\n            this._grid[gridCallback](inst, value);\n          }\n        }\n\n      });\n    }\n  }\n\n  _forwardParentProp(prop, value) {\n    this._parentPathValues[prop] = value;\n    this._templateInstances.forEach(inst => inst.notifyPath(prop, value));\n  }\n\n  _templateInstancesChanged(t, p) {\n    let index, count;\n    if (t.path === '_templateInstances') {\n      // Iterate all instances\n      index = 0;\n      count = this._templateInstances.length;\n    } else if (t.path === '_templateInstances.splices') {\n      // Iterate only new instances\n      index = t.value.index;\n      count = t.value.addedCount;\n    } else {\n      return;\n    }\n    Object.keys(this._parentPathValues || {}).forEach(keyName => {\n      for (var i = index; i < index + count; i++) {\n        this._templateInstances[i].set(keyName, this._parentPathValues[keyName]);\n      }\n    });\n  }\n\n}\n\ncustomElements.define(GridTemplatizer.is, GridTemplatizer);\n\nexport { GridTemplatizer as Templatizer };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Templatizer } from './vaadin-grid-templatizer.js';\n\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\n\n/**\n * @polymerMixin\n */\nexport const RowDetailsMixin = superClass => class RowDetailsMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * An array containing references to items with open row details.\n       */\n      detailsOpenedItems: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _rowDetailsTemplate: Object,\n\n      /**\n       * Custom function for rendering the content of the row details.\n       * Receives three arguments:\n       *\n       * - `root` The row details content DOM element. Append your content to it.\n       * - `grid` The `<vaadin-grid>` element.\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       */\n      rowDetailsRenderer: Function,\n\n      _detailsCells: {\n        type: Array,\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)',\n      '_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)'\n    ];\n  }\n\n  _rowDetailsTemplateOrRendererChanged(rowDetailsTemplate, rowDetailsRenderer) {\n    if (rowDetailsTemplate && rowDetailsRenderer) {\n      throw new Error('You should only use either a renderer or a template for row details');\n    }\n    if (rowDetailsTemplate || rowDetailsRenderer) {\n      if (rowDetailsTemplate && !rowDetailsTemplate.templatizer) {\n        var templatizer = new Templatizer();\n        templatizer._grid = this;\n        templatizer.dataHost = this.dataHost;\n        templatizer.template = rowDetailsTemplate;\n        rowDetailsTemplate.templatizer = templatizer;\n      }\n\n      if (this._columnTree) {\n        // Only update the rows if the column tree has already been initialized\n        Array.from(this.$.items.children).forEach(row => {\n          if (!row.querySelector('[part~=details-cell]')) {\n            this._updateRow(row, this._columnTree[this._columnTree.length - 1]);\n            this._a11yUpdateRowDetailsOpened(row, false);\n          }\n          // Clear any old template instances\n          delete row.querySelector('[part~=details-cell]')._instance;\n        });\n      }\n\n      if (this.detailsOpenedItems.length) {\n        Array.from(this.$.items.children).forEach(this._toggleDetailsCell, this);\n        this._update();\n      }\n    }\n  }\n\n  _detailsOpenedItemsChanged(changeRecord, rowDetailsTemplate, rowDetailsRenderer) {\n    if (changeRecord.path === 'detailsOpenedItems.length' || !changeRecord.value) {\n      // Lets avoid duplicate work of both .splices and .length updates.\n      return;\n    }\n    Array.from(this.$.items.children).forEach(row => {\n      this._toggleDetailsCell(row, row._item);\n      this._a11yUpdateRowDetailsOpened(row, this._isDetailsOpened(row._item));\n      this._toggleAttribute('details-opened', this._isDetailsOpened(row._item), row);\n    });\n  }\n\n  _configureDetailsCell(cell) {\n    cell.setAttribute('part', 'cell details-cell');\n    // Freeze the details cell, so that it does not scroll horizontally\n    // with the normal cells. This way it looks less weird.\n    this._toggleAttribute('frozen', true, cell);\n  }\n\n  _toggleDetailsCell(row, item) {\n    const cell = row.querySelector('[part~=\"details-cell\"]');\n    if (!cell) {\n      return;\n    }\n    const detailsHidden = !this._isDetailsOpened(item);\n    const hiddenChanged = !!cell.hidden !== detailsHidden;\n\n    if (!cell._instance && !cell._renderer || cell.hidden !== detailsHidden) {\n      cell.hidden = detailsHidden;\n      if (detailsHidden) {\n        row.style.removeProperty('padding-bottom');\n      } else {\n        if (this.rowDetailsRenderer) {\n          cell._renderer = this.rowDetailsRenderer;\n          cell._renderer.call(this, cell._content, this, {index: row.index, item: item});\n        } else if (this._rowDetailsTemplate && !cell._instance) {\n          // Stamp the template\n          cell._instance = this._rowDetailsTemplate.templatizer.createInstance();\n          cell._content.innerHTML = '';\n          cell._content.appendChild(cell._instance.root);\n          this._updateItem(row, item);\n        }\n\n        flush();\n        row.style.setProperty('padding-bottom', `${cell.offsetHeight}px`);\n\n        requestAnimationFrame(() => this.notifyResize());\n      }\n    }\n    if (hiddenChanged) {\n      this._updateMetrics();\n      this._positionItems();\n    }\n  }\n\n  _updateDetailsCellHeights() {\n    Array.from(this.$.items.querySelectorAll('[part~=\"details-cell\"]:not([hidden])')).forEach(cell => {\n      cell.parentElement.style.setProperty('padding-bottom', `${cell.offsetHeight}px`);\n    });\n  }\n\n  _isDetailsOpened(item) {\n    return this.detailsOpenedItems && this._getItemIndexInArray(item, this.detailsOpenedItems) !== -1;\n  }\n\n  /**\n   * Open the details row of a given item.\n   */\n  openItemDetails(item) {\n    if (!this._isDetailsOpened(item)) {\n      this.push('detailsOpenedItems', item);\n    }\n  }\n\n  /**\n   * Close the details row of a given item.\n   */\n  closeItemDetails(item) {\n    if (this._isDetailsOpened(item)) {\n      this.splice('detailsOpenedItems', this._getItemIndexInArray(item, this.detailsOpenedItems), 1);\n    }\n  }\n\n  _detailsOpenedInstanceChangedCallback(instance, value) {\n    if (super._detailsOpenedInstanceChangedCallback) {\n      super._detailsOpenedInstanceChangedCallback(instance, value);\n    }\n    if (value) {\n      this.openItemDetails(instance.item);\n    } else {\n      this.closeItemDetails(instance.item);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n\nimport { timeOut, animationFrame, microTask } from '@polymer/polymer/lib/utils/async.js';\n\n/**\n * @polymerMixin\n */\nexport const ScrollMixin = superClass => class ScrollMixin extends superClass {\n\n  get _timeouts() {\n    return {\n      SCROLL_PERIOD: 1000,\n      WHEEL_SCROLLING: 200,\n      SCROLLING: 100,\n      IGNORE_WHEEL: 500\n    };\n  }\n\n  static get properties() {\n    return {\n\n      // Cached array of frozen cells\n      _frozenCells: {\n        type: Array,\n        value: function() {\n          return [];\n        },\n      },\n\n      _scrollbarWidth: {\n        type: Number,\n        value: function() {\n          // Create the measurement node\n          var scrollDiv = document.createElement('div');\n          scrollDiv.style.width = '100px';\n          scrollDiv.style.height = '100px';\n          scrollDiv.style.overflow = 'scroll';\n          scrollDiv.style.position = 'absolute';\n          scrollDiv.style.top = '-9999px';\n          document.body.appendChild(scrollDiv);\n          // Get the scrollbar width\n          var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n          // Delete the DIV\n          document.body.removeChild(scrollDiv);\n          return scrollbarWidth;\n        }\n      },\n\n      _rowWithFocusedElement: Element,\n\n      _deltaYAcc: {\n        type: Number,\n        value: 0\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_scrollHeightUpdated(_estScrollHeight)',\n      '_scrollViewportHeightUpdated(_viewportHeight)'\n    ];\n  }\n\n  // Override (from iron-scroll-target-behavior) to avoid document scroll\n  set _scrollTop(top) {\n    this.$.table.scrollTop = top;\n  }\n\n  get _scrollTop() {\n    return this.$.table.scrollTop;\n  }\n\n  constructor() {\n    super();\n    this._scrollLineHeight = this._getScrollLineHeight();\n  }\n\n  /**\n   * @returns {Number|undefined} - The browser's default font-size in pixels\n   */\n  _getScrollLineHeight() {\n    const el = document.createElement('div');\n    el.style.fontSize = 'initial';\n    el.style.display = 'none';\n    document.body.appendChild(el);\n    const fontSize = window.getComputedStyle(el).fontSize;\n    document.body.removeChild(el);\n    return fontSize ? window.parseInt(fontSize) : undefined;\n  }\n\n  _scrollViewportHeightUpdated(_viewportHeight) {\n    this._scrollPageHeight = _viewportHeight - this.$.header.clientHeight - this.$.footer.clientHeight - this._scrollLineHeight;\n  }\n\n  ready() {\n    super.ready();\n    this.scrollTarget = this.$.table;\n\n    this.addEventListener('wheel', e => {\n      this._wheelScrolling = true;\n      this._debouncerWheelScrolling = Debouncer.debounce(\n        this._debouncerWheelScrolling,\n        timeOut.after(this._timeouts.WHEEL_SCROLLING),\n        () => this._wheelScrolling = false\n      );\n      this._onWheel(e);\n    });\n\n    this.$.table.addEventListener('scroll', e => {\n      if (this.$.outerscroller.outerScrolling) {\n        e.stopImmediatePropagation();\n      }\n    }, true);\n\n    this.$.items.addEventListener('focusin', (e) => {\n      const itemsIndex = e.composedPath().indexOf(this.$.items);\n      this._rowWithFocusedElement = e.composedPath()[itemsIndex - 1];\n    });\n    this.$.items.addEventListener('focusout', () => this._rowWithFocusedElement = undefined);\n  }\n\n  /**\n   * Scroll to a specific row index in the virtual list. Note that the row index is\n   * not always the same for any particular item. For example, sorting/filtering/expanding\n   * or collapsing hierarchical items can affect the row index related to an item.\n   *\n   * @param {number} index Row index to scroll to\n   */\n  scrollToIndex(index) {\n    this._accessIronListAPI(() => super.scrollToIndex(index));\n  }\n\n  _onWheel(e) {\n    if (e.ctrlKey || this._hasScrolledAncestor(e.target, e.deltaX, e.deltaY)) {\n      return;\n    }\n\n    const table = this.$.table;\n\n    let deltaY = e.deltaY;\n    if (e.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      // Scrolling by \"lines of text\" instead of pixels\n      deltaY *= this._scrollLineHeight;\n    } else if (e.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n      // Scrolling by \"pages\" instead of pixels\n      deltaY *= this._scrollPageHeight;\n    }\n\n    if (this._wheelAnimationFrame) {\n      // Skip new wheel events while one is being processed\n      this._deltaYAcc += deltaY;\n      e.preventDefault();\n      return;\n    }\n\n    deltaY += this._deltaYAcc;\n    this._deltaYAcc = 0;\n\n    this._wheelAnimationFrame = true;\n    this._debouncerWheelAnimationFrame = Debouncer.debounce(\n      this._debouncerWheelAnimationFrame,\n      animationFrame,\n      () => this._wheelAnimationFrame = false\n    );\n\n    var momentum = Math.abs(e.deltaX) + Math.abs(deltaY);\n\n    if (this._canScroll(table, e.deltaX, deltaY)) {\n      e.preventDefault();\n      table.scrollTop += deltaY;\n      table.scrollLeft += e.deltaX;\n      this._scrollHandler();\n      this._hasResidualMomentum = true;\n\n      this._ignoreNewWheel = true;\n      this._debouncerIgnoreNewWheel = Debouncer.debounce(\n        this._debouncerIgnoreNewWheel,\n        timeOut.after(this._timeouts.IGNORE_WHEEL),\n        () => this._ignoreNewWheel = false\n      );\n    } else if (this._hasResidualMomentum && momentum <= this._previousMomentum || this._ignoreNewWheel) {\n      e.preventDefault();\n    } else if (momentum > this._previousMomentum) {\n      this._hasResidualMomentum = false;\n    }\n    this._previousMomentum = momentum;\n  }\n\n  /**\n   * Determines if the element has an ancestor prior to this\n   * cell content that handles the scroll delta\n   */\n  _hasScrolledAncestor(el, deltaX, deltaY) {\n    if (el.localName === 'vaadin-grid-cell-content') {\n      return false;\n    } else if (this._canScroll(el, deltaX, deltaY)\n      && ['auto', 'scroll'].indexOf(getComputedStyle(el).overflow) !== -1) {\n      return true;\n    } else if (el !== this && el.parentElement) {\n      return this._hasScrolledAncestor(el.parentElement, deltaX, deltaY);\n    }\n  }\n\n  /**\n   * Determines if the the given scroll deltas can be applied to the element\n   * (fully or partially)\n   */\n  _canScroll(el, deltaX, deltaY) {\n    return (deltaY > 0 && el.scrollTop < el.scrollHeight - el.offsetHeight) ||\n    (deltaY < 0 && el.scrollTop > 0) ||\n    (deltaX > 0 && el.scrollLeft < el.scrollWidth - el.offsetWidth) ||\n    (deltaX < 0 && el.scrollLeft > 0);\n  }\n\n  _scheduleScrolling() {\n    if (!this._scrollingFrame) {\n      // Defer setting state attributes to avoid Edge hiccups\n      this._scrollingFrame = requestAnimationFrame(() => this._toggleAttribute('scrolling', true, this.$.scroller));\n    }\n    this._debounceScrolling = Debouncer.debounce(\n      this._debounceScrolling,\n      timeOut.after(this._timeouts.SCROLLING),\n      () => {\n        cancelAnimationFrame(this._scrollingFrame);\n        delete this._scrollingFrame;\n        this._toggleAttribute('scrolling', false, this.$.scroller);\n        if (!this.$.outerscroller.outerScrolling) {\n          this._reorderRows();\n        }\n      }\n    );\n\n    if (!this._scrollPeriodFrame) {\n      this._scrollPeriodFrame = requestAnimationFrame(() => this._toggleAttribute('scroll-period', true, this.$.scroller));\n    }\n    this._debounceScrollPeriod = Debouncer.debounce(\n      this._debounceScrollPeriod,\n      timeOut.after(this._timeouts.SCROLL_PERIOD),\n      () => {\n        cancelAnimationFrame(this._scrollPeriodFrame);\n        delete this._scrollPeriodFrame;\n        this._toggleAttribute('scroll-period', false, this.$.scroller);\n      }\n    );\n  }\n\n  _afterScroll() {\n    this._translateStationaryElements();\n\n    if (!this.hasAttribute('reordering')) {\n      this._scheduleScrolling();\n    }\n\n    const os = this.$.outerscroller;\n    if (!this._ios && (this._wheelScrolling || os.passthrough)) {\n      os.syncOuterScroller();\n    }\n\n    if (this._ios) {\n      // Enable vertical rubberband feedback\n      const overScroll = Math.max(-os.scrollTop, 0) ||\n        Math.min(0, os.scrollHeight - os.scrollTop - os.offsetHeight);\n      this.$.items.style.transform = `translateY(${overScroll}px)`;\n    }\n\n    this._updateOverflow();\n  }\n\n  _updateOverflow() {\n    // Set overflow styling attributes\n    let overflow = '';\n    const table = this.$.table;\n    if (table.scrollTop < table.scrollHeight - table.clientHeight) {\n      overflow += ' bottom';\n    }\n\n    if (table.scrollTop > 0) {\n      overflow += ' top';\n    }\n\n    if (table.scrollLeft < table.scrollWidth - table.clientWidth) {\n      overflow += ' right';\n    }\n\n    if (table.scrollLeft > 0) {\n      overflow += ' left';\n    }\n\n    this._debounceOverflow = Debouncer.debounce(\n      this._debounceOverflow,\n      animationFrame,\n      () => {\n        const value = overflow.trim();\n        if (value.length > 0 && this.getAttribute('overflow') !== value) {\n          this.setAttribute('overflow', value);\n        } else if (value.length == 0 && this.hasAttribute('overflow')) {\n          this.removeAttribute('overflow');\n        }\n      }\n    );\n  }\n\n  // correct order needed for preserving correct tab order between cell contents.\n  _reorderRows() {\n    const body = this.$.items;\n    const items = body.querySelectorAll('tr');\n    if (!items.length) {\n      return;\n    }\n\n    const adjustedVirtualStart = this._virtualStart + this._vidxOffset;\n\n    // Which row to use as a target?\n    const targetRow = this._rowWithFocusedElement || Array.from(items).filter(row => !row.hidden)[0];\n    if (!targetRow) {\n      // All rows are hidden, don't reorder\n      return;\n    }\n\n    // Where the target row should be?\n    const targetPhysicalIndex = targetRow.index - adjustedVirtualStart;\n\n    // Reodrer the DOM elements to keep the target row at the target physical index\n    const delta = Array.from(items).indexOf(targetRow) - targetPhysicalIndex;\n    if (delta > 0) {\n      for (let i = 0; i < delta; i++) {\n        body.appendChild(items[i]);\n      }\n    } else if (delta < 0) {\n      for (let i = items.length + delta; i < items.length; i++) {\n        body.insertBefore(items[i], items[0]);\n      }\n    }\n  }\n\n  _frozenCellsChanged() {\n    this._debouncerCacheElements = Debouncer.debounce(\n      this._debouncerCacheElements,\n      microTask,\n      () => {\n        Array.from(this.root.querySelectorAll('[part~=\"cell\"]')).forEach(function(cell) {\n          cell.style.transform = '';\n        });\n        this._frozenCells = Array.prototype.slice.call(this.$.table.querySelectorAll('[frozen]'));\n        this._updateScrollerMeasurements();\n        this._translateStationaryElements();\n      }\n    );\n    this._updateLastFrozen();\n  }\n\n  _updateScrollerMeasurements() {\n    if (this._frozenCells.length > 0 && this.__isRTL) {\n      this.__scrollerMetrics = {\n        scrollWidth: this.$.outerscroller.scrollWidth,\n        clientWidth: this.$.outerscroller.clientWidth\n      };\n    }\n  }\n\n  _updateLastFrozen() {\n    if (!this._columnTree) {\n      return;\n    }\n\n    const columnsRow = this._columnTree[this._columnTree.length - 1].slice(0);\n    columnsRow.sort((a, b) => {\n      return a._order - b._order;\n    });\n    const lastFrozen = columnsRow.reduce((prev, col, index) => {\n      col._lastFrozen = false;\n      return col.frozen && !col.hidden ? index : prev;\n    }, undefined);\n    if (lastFrozen !== undefined) {\n      columnsRow[lastFrozen]._lastFrozen = true;\n    }\n  }\n\n  _translateStationaryElements() {\n    if (this._edge && !this._scrollbarWidth) {\n      // Fixed mode (Tablet Edge)\n      this.$.items.style.transform =\n      this._getTranslate(-this._scrollLeft || 0, -this._scrollTop || 0);\n\n      this.$.footer.style.transform = this.$.header.style.transform =\n      this._getTranslate(-this._scrollLeft || 0, 0);\n    } else {\n      this.$.footer.style.transform = this.$.header.style.transform = this._getTranslate(0, this._scrollTop);\n    }\n\n    if (this._frozenCells.length > 0) {\n      const x = this.__isRTL ?\n        this.__getNormalizedScrollLeft(this.$.table) + this.__scrollerMetrics.clientWidth -\n        this.__scrollerMetrics.scrollWidth\n        : this._scrollLeft;\n      var frozenCellTransform = this._getTranslate(x, 0);\n      for (var i = 0; i < this._frozenCells.length; i++) {\n        this._frozenCells[i].style.transform = frozenCellTransform;\n      }\n    }\n  }\n\n  _getTranslate(x, y) {\n    return 'translate(' + x + 'px,' + y + 'px)';\n  }\n\n  _scrollHeightUpdated(_estScrollHeight) {\n    this.$.outersizer.style.top = this.$.fixedsizer.style.top = _estScrollHeight + 'px';\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const SelectionMixin = superClass => class SelectionMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * An array that contains the selected items.\n       */\n      selectedItems: {\n        type: Object,\n        notify: true,\n        value: () => []\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_selectedItemsChanged(selectedItems.*)'\n    ];\n  }\n\n  _isSelected(item) {\n    return this.selectedItems && this._getItemIndexInArray(item, this.selectedItems) > -1;\n  }\n\n  /**\n   * Selects the given item.\n   *\n   * @method selectItem\n   * @param {Object} item The item object\n   */\n  selectItem(item) {\n    if (!this._isSelected(item)) {\n      this.push('selectedItems', item);\n    }\n  }\n\n  /**\n   * Deselects the given item if it is already selected.\n   *\n   * @method deselect\n   * @param {Object} item The item object\n   */\n  deselectItem(item) {\n    const index = this._getItemIndexInArray(item, this.selectedItems);\n    if (index > -1) {\n      this.splice('selectedItems', index, 1);\n    }\n  }\n\n  /**\n   * Toggles the selected state of the given item.\n   *\n   * @method toggle\n   * @param {Object} item The item object\n   */\n  _toggleItem(item) {\n    const index = this._getItemIndexInArray(item, this.selectedItems);\n    if (index === -1) {\n      this.selectItem(item);\n    } else {\n      this.deselectItem(item);\n    }\n  }\n\n  _selectedItemsChanged(e) {\n    if (this.$.items.children.length && (e.path === 'selectedItems' || e.path === 'selectedItems.splices')) {\n      Array.from(this.$.items.children).forEach(row => {\n        this._updateItem(row, row._item);\n      });\n    }\n  }\n\n  _selectedInstanceChangedCallback(instance, value) {\n    if (super._selectedInstanceChangedCallback) {\n      super._selectedInstanceChangedCallback(instance, value);\n    }\n    if (value) {\n      this.selectItem(instance.item);\n    } else {\n      this.deselectItem(instance.item);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { microTask } from '@polymer/polymer/lib/utils/async.js';\n\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * @polymerMixin\n */\nexport const SortMixin = superClass => class SortMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * When `true`, all `<vaadin-grid-sorter>` are applied for sorting.\n       */\n      multiSort: {\n        type: Boolean,\n        value: false\n      },\n\n      _sorters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _previousSorters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('sorter-changed', this._onSorterChanged);\n\n    // With Polymer 2 & shady the 'sorter-changed' listener isn't guaranteed to be registered\n    // before child <vaadin-grid-sorter>'s upgrade and fire the events. The following\n    // makes sure that 'sorter-changed' is fired for all <vaadin-grid-sorter> elements\n    // after this (<vaadin-grid>) is ready (and the listeners are active).\n    if (window.ShadyDOM) {\n      microTask.run(() => {\n        const sorters = this.querySelectorAll('vaadin-grid-sorter');\n        Array.from(sorters).forEach((sorter) => {\n          // Don't try to fire if the sorter hasn't been upgraded yet\n          if (sorter instanceof PolymerElement) {\n            sorter.dispatchEvent(new CustomEvent('sorter-changed', {bubbles: true, composed: true}));\n          }\n        });\n      });\n    }\n  }\n\n  _onSorterChanged(e) {\n    const sorter = e.target;\n\n    this._removeArrayItem(this._sorters, sorter);\n    sorter._order = null;\n\n    if (this.multiSort) {\n      if (sorter.direction) {\n        this._sorters.unshift(sorter);\n      }\n\n      this._sorters.forEach((sorter, index) => sorter._order = this._sorters.length > 1 ? index : null, this);\n    } else {\n      if (sorter.direction) {\n        this._sorters.forEach(sorter => {\n          sorter._order = null;\n          sorter.direction = null;\n        });\n        this._sorters = [sorter];\n      }\n    }\n\n    e.stopPropagation();\n\n    if (this.dataProvider &&\n      // No need to clear cache if sorters didn't change\n      JSON.stringify(this._previousSorters) !== JSON.stringify(this._mapSorters())) {\n      this.clearCache();\n    }\n\n    this._a11yUpdateSorters();\n\n    this._previousSorters = this._mapSorters();\n  }\n\n  _mapSorters() {\n    return this._sorters.map(sorter => {\n      return {\n        path: sorter.path,\n        direction: sorter.direction\n      };\n    });\n  }\n\n  _removeArrayItem(array, item) {\n    const index = array.indexOf(item);\n    if (index > -1) {\n      array.splice(index, 1);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const StylingMixin = superClass => class StylingMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * A function that allows generating CSS class names for grid cells\n       * based on their row and column. The return value should be the generated\n       * class name as a string, or multiple class names separated by whitespace\n       * characters.\n       *\n       * Receives two arguments:\n       * - `column` The `<vaadin-grid-column>` element (`undefined` for details-cell).\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      cellClassNameGenerator: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '__cellClassNameGeneratorChanged(cellClassNameGenerator)'\n    ];\n  }\n\n  __cellClassNameGeneratorChanged(cellClassGenerator) {\n    this.generateCellClassNames();\n  }\n\n  /**\n   * Runs the `cellClassNameGenerator` for the visible cells.\n   * If the generator depends on varying conditions, you need to\n   * call this function manually in order to update the styles when\n   * the conditions change.\n   */\n  generateCellClassNames() {\n    Array.from(this.$.items.children).filter(row => !row.hidden).forEach(\n      row => this._generateCellClassNames(row, this.__getRowModel(row)));\n  }\n\n  _generateCellClassNames(row, rowData) {\n    Array.from(row.children).forEach(cell => {\n      if (cell.__generatedClasses) {\n        cell.__generatedClasses.forEach(className => cell.classList.remove(className));\n      }\n      if (this.cellClassNameGenerator) {\n        const result = this.cellClassNameGenerator(cell._column, rowData);\n        cell.__generatedClasses = result && result.split(' ').filter(className => className.length > 0);\n        if (cell.__generatedClasses) {\n          cell.__generatedClasses.forEach(className => cell.classList.add(className));\n        }\n      }\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2019 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nconst DropMode = {\n  BETWEEN: 'between',\n  ON_TOP: 'on-top',\n  ON_TOP_OR_BETWEEN: 'on-top-or-between',\n  ON_GRID: 'on-grid'\n};\n\nconst DropLocation = {\n  ON_TOP: 'on-top',\n  ABOVE: 'above',\n  BELOW: 'below',\n  EMPTY: 'empty'\n};\n\n/**\n * @polymerMixin\n */\nexport const DragAndDropMixin = superClass => class DragAndDropMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * Defines the locations within the Grid row where an element can be dropped.\n       *\n       * Possible values are:\n       * - `between`: The drop event can happen between Grid rows.\n       * - `on-top`: The drop event can happen on top of Grid rows.\n       * - `on-top-or-between`: The drop event can happen either on top of or between Grid rows.\n       * - `on-grid`: The drop event will not happen on any specific row, it will show the drop target outline around the whole grid.\n       */\n      dropMode: String,\n\n      /**\n       * Marks the grid's rows to be available for dragging.\n       */\n      rowsDraggable: Boolean,\n\n      /**\n       * A function that filters dragging of specific grid rows. The return value should be false\n       * if dragging of the row should be disabled.\n       *\n       * Receives one argument:\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      dragFilter: Function,\n\n      /**\n       * A function that filters dropping on specific grid rows. The return value should be false\n       * if dropping on the row should be disabled.\n       *\n       * Receives one argument:\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      dropFilter: Function,\n\n      __dndAutoScrollThreshold: {\n        value: 50\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this.$.table.addEventListener('dragstart', this._onDragStart.bind(this));\n    this.$.table.addEventListener('dragend', this._onDragEnd.bind(this));\n    this.$.table.addEventListener('dragover', this._onDragOver.bind(this));\n    this.$.table.addEventListener('dragleave', this._onDragLeave.bind(this));\n    this.$.table.addEventListener('drop', this._onDrop.bind(this));\n    this.$.table.addEventListener('dragenter', e => {\n      if (this.dropMode) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    });\n\n  }\n\n  _onDragStart(e) {\n    if (this.rowsDraggable) {\n      let row = e.target;\n      if (row.localName === 'vaadin-grid-cell-content') {\n        // The draggable node is the cell content element on browsers that support native shadow\n        row = row.assignedSlot.parentNode.parentNode;\n      }\n      if (row.parentNode !== this.$.items) {\n        return;\n      }\n\n      e.stopPropagation();\n      this._toggleAttribute('dragging-rows', true, this);\n\n      if (this._safari) {\n        // Safari doesn't get proper drag images from transformed\n        // elements so we need to switch to top temporarily\n        const transform = row.style.transform;\n        row.style.top = /translateY\\((.*)\\)/.exec(transform)[1];\n        row.style.transform = 'none';\n        requestAnimationFrame(() => {\n          row.style.top = '';\n          row.style.transform = transform;\n        });\n      }\n\n      const rowRect = row.getBoundingClientRect();\n      if (!window.ShadyDOM) {\n        if (this._ios) {\n          e.dataTransfer.setDragImage(row);\n        } else {\n          e.dataTransfer.setDragImage(row, e.clientX - rowRect.left, e.clientY - rowRect.top);\n        }\n\n      }\n\n      let rows = [row];\n      if (this._isSelected(row._item)) {\n        rows = this.__getViewportRows()\n          .filter(row => this._isSelected(row._item))\n          .filter(row => !this.dragFilter || this.dragFilter(this.__getRowModel(row)));\n      }\n\n      // Set the default transfer data\n      e.dataTransfer.setData('text', this.__formatDefaultTransferData(rows));\n\n      row.setAttribute('dragstart', rows.length > 1 ? rows.length : '');\n      this.updateStyles({\n        '--_grid-drag-start-x': `${e.clientX - rowRect.left + 20}px`,\n        '--_grid-drag-start-y': `${e.clientY - rowRect.top + 10}px`\n      });\n\n      requestAnimationFrame(() => {\n        row.removeAttribute('dragstart');\n        this.updateStyles({'--_grid-drag-start-x': '', '--_grid-drag-start-y': ''});\n      });\n\n      const event = new CustomEvent('grid-dragstart', {\n        detail: {\n          draggedItems: rows.map(row => row._item),\n          setDragData: (type, data) => e.dataTransfer.setData(type, data),\n          setDraggedItemsCount: count => row.setAttribute('dragstart', count)\n        }\n      });\n      event.originalEvent = e;\n      this.dispatchEvent(event);\n    }\n  }\n\n  _onDragEnd(e) {\n    this._toggleAttribute('dragging-rows', false, this);\n    e.stopPropagation();\n    const event = new CustomEvent('grid-dragend');\n    event.originalEvent = e;\n    this.dispatchEvent(event);\n  }\n\n  _onDragLeave(e) {\n    e.stopPropagation();\n    this._clearDragStyles();\n  }\n\n  _onDragOver(e) {\n\n    if (this.dropMode) {\n      this._dropLocation = undefined;\n      this._dragOverItem = undefined;\n\n      if (this.__dndAutoScroll(e.clientY)) {\n        this._clearDragStyles();\n        return;\n      }\n\n      let row = e.composedPath().filter(node => node.localName === 'tr')[0];\n\n      if (!this._effectiveSize || this.dropMode === DropMode.ON_GRID) {\n        // The grid is empty or \"on-grid\" drop mode was used, always default to \"empty\"\n        this._dropLocation = DropLocation.EMPTY;\n      } else if (!row || row.parentNode !== this.$.items) {\n        // The dragover didn't occur on a body row but the grid has items\n        if (row) {\n          // The dragover occurred over a header/footer row\n          return;\n        } else if (this.dropMode === DropMode.BETWEEN || this.dropMode === DropMode.ON_TOP_OR_BETWEEN) {\n          // The drop mode allows setting the last row as the drag over item\n          row = Array.from(this.$.items.children).filter(row => !row.hidden).pop();\n          this._dropLocation = DropLocation.BELOW;\n        } else {\n          // Drop mode on-top used but the dragover didn't occur over one of the existing rows\n          return;\n        }\n      } else {\n        // The dragover occurred on a body row, determine the drop location from coordinates\n        const rowRect = row.getBoundingClientRect();\n\n        this._dropLocation = DropLocation.ON_TOP;\n\n        if (this.dropMode === DropMode.BETWEEN) {\n          const dropAbove = e.clientY - rowRect.top < rowRect.bottom - e.clientY;\n          this._dropLocation = dropAbove ? DropLocation.ABOVE : DropLocation.BELOW;\n\n        } else if (this.dropMode === DropMode.ON_TOP_OR_BETWEEN) {\n          if (e.clientY - rowRect.top < rowRect.height / 3) {\n            this._dropLocation = DropLocation.ABOVE;\n          } else if (e.clientY - rowRect.top > (rowRect.height / 3) * 2) {\n            this._dropLocation = DropLocation.BELOW;\n          }\n        }\n      }\n\n      if (row && row.hasAttribute('drop-disabled')) {\n        this._dropLocation = undefined;\n        return;\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (this._dropLocation === DropLocation.EMPTY) {\n        this._toggleAttribute('dragover', true, this);\n      } else if (row) {\n        this._dragOverItem = row._item;\n        if (row.getAttribute('dragover') !== this._dropLocation) {\n          row.setAttribute('dragover', this._dropLocation);\n        }\n      } else {\n        this._clearDragStyles();\n      }\n    }\n  }\n\n  __dndAutoScroll(clientY) {\n    if (this.__dndAutoScrolling) {\n      return true;\n    }\n\n    const headerBottom = this.$.header.getBoundingClientRect().bottom;\n    const footerTop = this.$.footer.getBoundingClientRect().top;\n    const topDiff = headerBottom - clientY + this.__dndAutoScrollThreshold;\n    const bottomDiff = clientY - footerTop + this.__dndAutoScrollThreshold;\n    let scrollTopDelta = 0;\n\n    if (bottomDiff > 0) {\n      scrollTopDelta = bottomDiff * 2;\n    } else if (topDiff > 0) {\n      scrollTopDelta = -topDiff * 2;\n    }\n\n    if (scrollTopDelta) {\n      const scrollTop = this.$.table.scrollTop;\n      this.$.table.scrollTop += scrollTopDelta;\n      const scrollTopChanged = scrollTop !== this.$.table.scrollTop;\n      if (scrollTopChanged) {\n        this.__dndAutoScrolling = true;\n        // Disallow more auto-scrolls within 20ms\n        setTimeout(() => this.__dndAutoScrolling = false, 20);\n        this._scrollHandler();\n        return true;\n      }\n    }\n  }\n\n  __getViewportRows() {\n    const headerBottom = this.$.header.getBoundingClientRect().bottom;\n    const footerTop = this.$.footer.getBoundingClientRect().top;\n    return Array.from(this.$.items.children)\n      .filter(row => {\n        const rowRect = row.getBoundingClientRect();\n        return rowRect.bottom > headerBottom && rowRect.top < footerTop;\n      });\n  }\n\n  _clearDragStyles() {\n    this.removeAttribute('dragover');\n    Array.from(this.$.items.children).forEach(row => row.removeAttribute('dragover'));\n  }\n\n  _onDrop(e) {\n    if (this.dropMode) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const dragData = e.dataTransfer.types && Array.from(e.dataTransfer.types).map(type => {\n        return {\n          type,\n          data: e.dataTransfer.getData(type)\n        };\n      });\n\n      this._clearDragStyles();\n\n      const event = new CustomEvent('grid-drop', {\n        bubbles: e.bubbles,\n        cancelable: e.cancelable,\n        detail: {\n          dropTargetItem: this._dragOverItem,\n          dropLocation: this._dropLocation,\n          dragData\n        }\n      });\n      event.originalEvent = e;\n      this.dispatchEvent(event);\n    }\n  }\n\n  __formatDefaultTransferData(rows) {\n    return rows\n      .map(row => {\n        return Array.from(row.children)\n          .filter(cell => !cell.hidden && cell.getAttribute('part').indexOf('details-cell') === -1)\n          .sort((a, b) => {\n            return a._column._order > b._column._order ? 1 : -1;\n          })\n          .map(cell => cell._content.textContent.trim())\n          .filter(content => content)\n          .join('\\t');\n      })\n      .join('\\n');\n  }\n\n  _dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter) {\n    this.filterDragAndDrop();\n  }\n\n  /**\n   * Runs the `dragFilter` and `dropFilter` hooks for the visible cells.\n   * If the filter depends on varying conditions, you may need to\n   * call this function manually in order to update the draggability when\n   * the conditions change.\n   */\n  filterDragAndDrop() {\n    Array.from(this.$.items.children).filter(row => !row.hidden).forEach(\n      row => {\n        this._filterDragAndDrop(row, this.__getRowModel(row));\n      }\n    );\n  }\n\n  _filterDragAndDrop(row, rowData) {\n    const dragDisabled = !this.rowsDraggable || (this.dragFilter && !this.dragFilter(rowData));\n    const dropDisabled = !this.dropMode || (this.dropFilter && !this.dropFilter(rowData));\n\n    const draggableElements = window.ShadyDOM\n      ? [row]\n      : Array.from(row.children).map(cell => cell._content);\n\n    draggableElements.forEach(e => {\n      if (dragDisabled) {\n        e.removeAttribute('draggable');\n      } else {\n        e.setAttribute('draggable', true);\n      }\n    });\n\n    this._toggleAttribute('drag-disabled', dragDisabled, row);\n    this._toggleAttribute('drop-disabled', dropDisabled, row);\n  }\n\n  /**\n   * Fired when starting to drag grid rows.\n   *\n   * @event grid-dragstart\n   * @param {Object} originalEvent The native dragstart event\n   * @param {Object} detail\n   * @param {Object} detail.draggedItems the items in the visible viewport that are dragged\n   * @param {Function} detail.setDraggedItemsCount Overrides the default number shown in the drag image on multi row drag.\n   * Parameter is of type number.\n   * @param {Function} detail.setDragData Sets dataTransfer data for the drag operation.\n   * Note that \"text\" is the only data type supported by all the browsers the grid currently supports (including IE11).\n   * The function takes two parameters:\n   * - type:string The type of the data\n   * - data:string The data\n   */\n\n  /**\n   * Fired when the dragging of the rows ends.\n   *\n   * @event grid-dragend\n   * @param {Object} originalEvent The native dragend event\n   */\n\n  /**\n   * Fired when a drop occurs on top of the grid.\n   *\n   * @event grid-drop\n   * @param {Object} originalEvent The native drop event\n   * @param {Object} detail\n   * @param {Object} detail.dropTargetItem The item of the grid row on which the drop occurred.\n   * @param {string} detail.dropLocation The position at which the drop event took place relative to a row.\n   * Depending on the dropMode value, the drop location can be one of the following\n   * - `on-top`: when the drop occurred on top of the row\n   * - `above`: when the drop occurred above the row\n   * - `below`: when the drop occurred below the row\n   * - `empty`: when the drop occurred over the grid, not relative to any specific row\n   * @param {string} detail.dragData An array of items with the payload as a string representation as the\n   * `data` property and the type of the data as `type` property.\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const KeyboardNavigationMixin = superClass => class KeyboardNavigationMixin extends superClass {\n  static get properties() {\n    return {\n      _headerFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _itemsFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _footerFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n      _navigatingIsHidden: Boolean,\n      _focusedItemIndex: {\n        type: Number,\n        value: 0\n      },\n      _focusedColumnOrder: Number\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    if (this._ios || this._android) {\n      // Disable keyboard navigation on mobile devices\n      return;\n    }\n\n    this.addEventListener('keydown', this._onKeyDown);\n    this.addEventListener('keyup', this._onKeyUp);\n\n    this.addEventListener('focusin', this._onFocusIn);\n    this.addEventListener('focusout', this._onFocusOut);\n\n    // When focus goes from cell to another cell, focusin/focusout events do\n    // not escape the grids shadowRoot, thus listening inside the shadowRoot.\n    this.$.table.addEventListener('focusin', this._onCellFocusIn.bind(this));\n    this.$.table.addEventListener('focusout', this._onCellFocusOut.bind(this));\n\n    this.addEventListener('mousedown', () => {\n      this._toggleAttribute('navigating', false, this);\n      this._isMousedown = true;\n    });\n    this.addEventListener('mouseup', () => this._isMousedown = false);\n  }\n\n  _focusableChanged(focusable, oldFocusable) {\n    if (oldFocusable) {\n      oldFocusable.setAttribute('tabindex', '-1');\n    }\n    if (focusable) {\n      focusable.setAttribute('tabindex', '0');\n    }\n  }\n\n  _onKeyDown(e) {\n    // Ensure standard key value, unified across browsers\n    let key = e.key;\n    if (key === 'Up' || key === 'Down' || key === 'Left' || key === 'Right') {\n      // MSIE & Edge\n      key = 'Arrow' + key;\n    }\n    if (key === 'Esc') {\n      // MSIE & Edge\n      key = 'Escape';\n    }\n    if (key === 'Spacebar') {\n      // MSIE\n      key = ' ';\n    }\n\n    let keyGroup;\n    switch (key) {\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'PageUp':\n      case 'PageDown':\n      case 'Home':\n      case 'End':\n        keyGroup = 'Navigation';\n        break;\n      case 'Enter':\n      case 'Escape':\n      case 'F2':\n        keyGroup = 'Interaction';\n        break;\n      case 'Tab':\n        keyGroup = 'Tab';\n        break;\n      case ' ':\n        keyGroup = 'Space';\n        break;\n    }\n\n    this._detectInteracting(e);\n    if (this.hasAttribute('interacting') && keyGroup !== 'Interaction') {\n      // When in the interacting mode, only the Interaction keys are handled.\n      keyGroup = undefined;\n    }\n\n    if (keyGroup) {\n      this[`_on${keyGroup}KeyDown`](e, key);\n    }\n  }\n\n  _ensureScrolledToIndex(index) {\n    const targetRowInDom = Array.from(this.$.items.children).filter(child => child.index === index)[0];\n    if (!targetRowInDom) {\n      this._scrollToIndex(index);\n    }\n  }\n\n  _onNavigationKeyDown(e, key) {\n    e.preventDefault();\n\n    function indexOfChildElement(el) {\n      return Array.prototype.indexOf.call(el.parentNode.children, el);\n    }\n\n    const visibleItemsCount = this._lastVisibleIndex - this._firstVisibleIndex - 1;\n\n    let dx = 0, dy = 0;\n    switch (key) {\n      case 'ArrowRight':\n        dx = this.__isRTL ? -1 : 1;\n        break;\n      case 'ArrowLeft':\n        dx = this.__isRTL ? 1 : -1;\n        break;\n      case 'Home':\n        dx = -Infinity;\n        e.ctrlKey && (dy = -Infinity);\n        break;\n      case 'End':\n        dx = Infinity;\n        e.ctrlKey && (dy = Infinity);\n        break;\n      case 'ArrowDown':\n        dy = 1;\n        break;\n      case 'ArrowUp':\n        dy = -1;\n        break;\n      case 'PageDown':\n        dy = visibleItemsCount;\n        break;\n      case 'PageUp':\n        dy = -visibleItemsCount;\n        break;\n    }\n\n    const activeCell = e.composedPath()[0];\n    const columnIndex = indexOfChildElement(activeCell);\n    const isRowDetails = this._elementMatches(activeCell, '[part~=\"details-cell\"]');\n\n    const activeRow = activeCell.parentNode;\n\n    const activeRowGroup = activeRow.parentNode;\n    const maxRowIndex = (activeRowGroup === this.$.items ? this._effectiveSize : activeRowGroup.children.length) - 1;\n\n    // Body rows have index property, otherwise DOM child index of the row is used.\n    const rowIndex = (activeRowGroup === this.$.items) ?\n      (this._focusedItemIndex !== undefined ? this._focusedItemIndex : activeRow.index) :\n      indexOfChildElement(activeRow);\n\n    // Index of the destination row\n    let dstRowIndex = Math.max(0, Math.min(rowIndex + dy, maxRowIndex));\n\n    // Row details navigation logic\n    let dstIsRowDetails = false;\n    if (activeRowGroup === this.$.items) {\n      const item = activeRow._item;\n      const dstItem = this._cache.getItemForIndex(dstRowIndex);\n      // Should we navigate to row details?\n      if (isRowDetails) {\n        dstIsRowDetails = dy === 0;\n      } else {\n        dstIsRowDetails = dy === 1 && this._isDetailsOpened(item) ||\n          dy === -1 && dstRowIndex !== rowIndex && this._isDetailsOpened(dstItem);\n      }\n      // Should we navigate between details and regular cells of the same row?\n      if (dstIsRowDetails !== isRowDetails &&\n          (dy === 1 && dstIsRowDetails || dy === -1 && !dstIsRowDetails)) {\n        dstRowIndex = rowIndex;\n      }\n    }\n\n    // Header and footer could have hidden rows, e. g., if none of the columns\n    // or groups on the given column tree level define template. Skip them\n    // in vertical keyboard navigation.\n    if (activeRowGroup !== this.$.items) {\n      if (dstRowIndex > rowIndex) {\n        while (\n          dstRowIndex < maxRowIndex &&\n          activeRowGroup.children[dstRowIndex].hidden\n        ) {\n          dstRowIndex++;\n        }\n      } else if (dstRowIndex < rowIndex) {\n        while (\n          dstRowIndex > 0 &&\n          activeRowGroup.children[dstRowIndex].hidden\n        ) {\n          dstRowIndex--;\n        }\n      }\n    }\n\n    // _focusedColumnOrder is memoized  this is to ensure predictable\n    // navigation when entering and leaving detail and column group cells.\n    if (this._focusedColumnOrder === undefined) {\n      if (isRowDetails) {\n        this._focusedColumnOrder = 0;\n      } else {\n        this._focusedColumnOrder = this._getColumns(activeRowGroup, rowIndex).filter(c => !c.hidden)[columnIndex]._order;\n      }\n    }\n\n    // Find orderedColumnIndex  the index of order closest matching the\n    // original _focusedColumnOrder in the sorted array of orders\n    // of the visible columns on the destination row.\n    const dstColumns = this._getColumns(activeRowGroup, dstRowIndex).filter(c => !c.hidden);\n    const dstSortedColumnOrders = dstColumns.map(c => c._order)\n      .sort((b, a) => (b - a));\n    const maxOrderedColumnIndex = dstSortedColumnOrders.length - 1;\n    const orderedColumnIndex = dstSortedColumnOrders.indexOf(\n      dstSortedColumnOrders.slice(0).sort((b, a) =>\n        Math.abs(b - this._focusedColumnOrder) - Math.abs(a - this._focusedColumnOrder)\n      )[0]\n    );\n\n    // Index of the destination column order\n    const dstOrderedColumnIndex = (dy === 0 && isRowDetails) ? orderedColumnIndex :\n      Math.max(0, Math.min(orderedColumnIndex + dx, maxOrderedColumnIndex));\n\n    if (dstOrderedColumnIndex !== orderedColumnIndex) {\n      // Horizontal movement invalidates stored _focusedColumnOrder\n      this._focusedColumnOrder = undefined;\n    }\n\n    // Ensure correct vertical scroll position, destination row is visible\n    if (activeRowGroup === this.$.items) {\n      this._ensureScrolledToIndex(dstRowIndex);\n    }\n\n    // This has to be set after scrolling, otherwise it can be removed by\n    // `_preventScrollerRotatingCellFocus(item, index)` during scrolling.\n    this._toggleAttribute('navigating', true, this);\n\n    const columnIndexByOrder = dstColumns.reduce((acc, col, i) => (acc[col._order] = i, acc), {});\n    const dstColumnIndex = columnIndexByOrder[dstSortedColumnOrders[dstOrderedColumnIndex]];\n\n    // For body rows, use index property to find destination row, otherwise use DOM child index\n    const dstRow = activeRowGroup === this.$.items ?\n      Array.from(activeRowGroup.children).filter(el => el.index === dstRowIndex)[0] :\n      activeRowGroup.children[dstRowIndex];\n    if (!dstRow) {\n      return;\n    }\n\n    // Here we go!\n    const dstCell = dstIsRowDetails ?\n      Array.from(dstRow.children)\n        .filter(el => this._elementMatches(el, '[part~=\"details-cell\"]'))[0] :\n      dstRow.children[dstColumnIndex];\n    this._scrollHorizontallyToCell(dstCell);\n    if (activeRowGroup === this.$.items) {\n      // When scrolling with repeated keydown, sometimes FocusEvent listeners\n      // are too late to update _focusedItemIndex. Ensure next keydown\n      // listener invocation gets updated _focusedItemIndex value.\n      this._focusedItemIndex = dstRowIndex;\n    }\n\n    if (activeRowGroup === this.$.items) {\n      const dstRect = dstCell.getBoundingClientRect();\n      const footerTop = this.$.footer.getBoundingClientRect().top;\n      const headerBottom = this.$.header.getBoundingClientRect().bottom;\n      if (dstRect.bottom > footerTop) {\n        this.$.table.scrollTop += dstRect.bottom - footerTop;\n        this._scrollHandler();\n      } else if (dstRect.top < headerBottom) {\n        this.$.table.scrollTop -= headerBottom - dstRect.top;\n        this._scrollHandler();\n      }\n    }\n\n    dstCell.focus();\n  }\n\n  _parseEventPath(path) {\n    const tableIndex = path.indexOf(this.$.table);\n    return {\n      rowGroup: path[tableIndex - 1],\n      row: path[tableIndex - 2],\n      cell: path[tableIndex - 3]\n    };\n  }\n\n  _onInteractionKeyDown(e, key) {\n    const localTarget = e.composedPath()[0];\n    const localTargetIsTextInput = localTarget.localName === 'input' &&\n      !/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(localTarget.type);\n\n    let wantInteracting;\n    switch (key) {\n      case 'Enter':\n        wantInteracting = this.hasAttribute('interacting') ? !localTargetIsTextInput : true;\n        break;\n      case 'Escape':\n        wantInteracting = false;\n        break;\n      case 'F2':\n        wantInteracting = !this.hasAttribute('interacting');\n        break;\n    }\n\n    const {cell} = this._parseEventPath(e.composedPath());\n\n    if (this.hasAttribute('interacting') !== wantInteracting) {\n      if (wantInteracting) {\n        const focusTarget = cell._content.querySelector('[focus-target]') ||\n          cell._content.firstElementChild;\n        if (focusTarget) {\n          e.preventDefault();\n          focusTarget.focus();\n          this._toggleAttribute('interacting', true, this);\n          this._toggleAttribute('navigating', false, this);\n        }\n      } else {\n        e.preventDefault();\n        this._focusedColumnOrder = undefined;\n        cell.focus();\n        this._toggleAttribute('interacting', false, this);\n        this._toggleAttribute('navigating', true, this);\n      }\n    }\n  }\n\n  _predictFocusStepTarget(srcElement, step) {\n    const tabOrder = [\n      this.$.table,\n      this._headerFocusable,\n      this._itemsFocusable,\n      this._footerFocusable,\n      this.$.focusexit\n    ];\n\n    let index = tabOrder.indexOf(srcElement);\n\n    index += step;\n    while (index >= 0 && index <= tabOrder.length - 1 &&\n        (!tabOrder[index] || tabOrder[index].parentNode.hidden)) {\n      index += step;\n    }\n\n    return tabOrder[index];\n  }\n\n  _onTabKeyDown(e) {\n    const focusTarget = this._predictFocusStepTarget(e.composedPath()[0], e.shiftKey ? -1 : 1);\n\n    if (focusTarget === this.$.table) {\n      // The focus is about to exit the grid to the top.\n      this.$.table.focus();\n    } else if (focusTarget === this.$.focusexit) {\n      // The focus is about to exit the grid to the bottom.\n      this.$.focusexit.focus();\n    } else if (focusTarget === this._itemsFocusable) {\n      let itemsFocusTarget = focusTarget;\n      const targetRow = this._itemsFocusable.parentNode;\n      this._ensureScrolledToIndex(this._focusedItemIndex);\n      if (targetRow.index !== this._focusedItemIndex) {\n        // The target row, which is about to be focused next, has been\n        // assigned with a new index since last focus, probably because of\n        // scrolling. Focus the row for the stored focused item index instead.\n        const columnIndex = Array.from(targetRow.children).indexOf(this._itemsFocusable);\n        const focusedItemRow = Array.from(this.$.items.children)\n          .filter(row => row.index === this._focusedItemIndex)[0];\n        if (focusedItemRow) {\n          itemsFocusTarget = focusedItemRow.children[columnIndex];\n        }\n      }\n      e.preventDefault();\n      itemsFocusTarget.focus();\n    } else {\n      e.preventDefault();\n      focusTarget.focus();\n    }\n\n    this._toggleAttribute('navigating', true, this);\n  }\n\n  _onSpaceKeyDown(e) {\n    e.preventDefault();\n\n    const cell = e.composedPath()[0];\n    if (!cell._content || !cell._content.firstElementChild) {\n      this.dispatchEvent(new CustomEvent('cell-activate', {detail: {\n        model: this.__getRowModel(cell.parentElement)\n      }}));\n    }\n  }\n\n  /** @private */\n  _onKeyUp(e) {\n    if (!/^( |SpaceBar)$/.test(e.key)) {\n      return;\n    }\n\n    e.preventDefault();\n\n    const cell = e.composedPath()[0];\n    if (cell._content && cell._content.firstElementChild) {\n      const wasNavigating = this.hasAttribute('navigating');\n      cell._content.firstElementChild.click();\n      this._toggleAttribute('navigating', wasNavigating, this);\n    }\n  }\n\n  _onFocusIn(e) {\n    if (!this._isMousedown) {\n      this._toggleAttribute('navigating', true, this);\n    }\n\n    const rootTarget = e.composedPath()[0];\n\n    if (rootTarget === this.$.table ||\n        rootTarget === this.$.focusexit) {\n      // The focus enters the top (bottom) of the grid, meaning that user has\n      // tabbed (shift-tabbed) into the grid. Move the focus to\n      // the first (the last) focusable.\n      this._predictFocusStepTarget(\n        rootTarget,\n        rootTarget === this.$.table ? 1 : -1\n      ).focus();\n      this._toggleAttribute('interacting', false, this);\n    } else {\n      this._detectInteracting(e);\n    }\n  }\n\n  _onFocusOut(e) {\n    this._toggleAttribute('navigating', false, this);\n    this._detectInteracting(e);\n  }\n\n  _onCellFocusIn(e) {\n    this._detectInteracting(e);\n\n    if (e.composedPath().indexOf(this.$.table) === 3) {\n      const cell = e.composedPath()[0];\n      this._activeRowGroup = cell.parentNode.parentNode;\n      if (this._activeRowGroup === this.$.header) {\n        this._headerFocusable = cell;\n      } else if (this._activeRowGroup === this.$.items) {\n        this._itemsFocusable = cell;\n      } else if (this._activeRowGroup === this.$.footer) {\n        this._footerFocusable = cell;\n      }\n      // Inform cell content of the focus (used in <vaadin-grid-sorter>)\n      cell._content.dispatchEvent(new CustomEvent('cell-focusin', {bubbles: false}));\n    }\n\n    this._detectFocusedItemIndex(e);\n  }\n\n  _onCellFocusOut(e) {\n    if (e.composedPath().indexOf(this.$.table) === 3) {\n      const cell = e.composedPath()[0];\n      // Inform cell content of the focus (used in <vaadin-grid-sorter>)\n      cell._content.dispatchEvent(new CustomEvent('cell-focusout', {bubbles: false}));\n    }\n  }\n\n  _detectInteracting(e) {\n    this._toggleAttribute('interacting',\n      e.composedPath().some(el => el.localName === 'vaadin-grid-cell-content'),\n      this);\n  }\n\n  _detectFocusedItemIndex(e) {\n    const {rowGroup, row} = this._parseEventPath(e.composedPath());\n    if (rowGroup === this.$.items) {\n      this._focusedItemIndex = row.index;\n    }\n  }\n\n  _preventScrollerRotatingCellFocus(item, index) {\n    if (item.index === this._focusedItemIndex && this.hasAttribute('navigating') && this._activeRowGroup === this.$.items) {\n      // Focused item has went, hide navigation mode\n      this._navigatingIsHidden = true;\n      this._toggleAttribute('navigating', false, this);\n    }\n    if (index === this._focusedItemIndex && this._navigatingIsHidden) {\n      // Focused item is back, restore navigation mode\n      this._navigatingIsHidden = false;\n      this._toggleAttribute('navigating', true, this);\n    }\n  }\n\n  _getColumns(rowGroup, rowIndex) {\n    let columnTreeLevel = this._columnTree.length - 1;\n    if (rowGroup === this.$.header) {\n      columnTreeLevel = rowIndex;\n    } else if (rowGroup === this.$.footer) {\n      columnTreeLevel = this._columnTree.length - 1 - rowIndex;\n    }\n    return this._columnTree[columnTreeLevel];\n  }\n\n  _resetKeyboardNavigation() {\n    if (this.$.header.firstElementChild) {\n      this._headerFocusable = Array.from(this.$.header.firstElementChild.children).filter(el => !el.hidden)[0];\n    }\n\n    if (this.$.items.firstElementChild) {\n      const firstVisibleIndexRow = this._iterateItems((pidx, vidx) => {\n        if (this._firstVisibleIndex === vidx) {\n          return this.$.items.children[pidx];\n        }\n      });\n      if (firstVisibleIndexRow) {\n        this._itemsFocusable = Array.from(firstVisibleIndexRow.children).filter(el => !el.hidden)[0];\n      }\n    }\n\n    if (this.$.footer.firstElementChild) {\n      this._footerFocusable = Array.from(this.$.footer.firstElementChild.children).filter(el => !el.hidden)[0];\n    }\n  }\n\n  _scrollHorizontallyToCell(dstCell) {\n    if (dstCell.hasAttribute('frozen') || this._elementMatches(dstCell, '[part~=\"details-cell\"]')) {\n      // These cells are, by design, always visible, no need to scroll.\n      return;\n    }\n\n    const dstCellRect = dstCell.getBoundingClientRect();\n    const dstRow = dstCell.parentNode;\n    const dstCellIndex = Array.from(dstRow.children).indexOf(dstCell);\n    const tableRect = this.$.table.getBoundingClientRect();\n    let leftBoundary = tableRect.left, rightBoundary = tableRect.right;\n    for (let i = dstCellIndex - 1; i >= 0; i--) {\n      const cell = dstRow.children[i];\n      if (cell.hasAttribute('hidden') ||\n          this._elementMatches(cell, '[part~=\"details-cell\"]')) {\n        continue;\n      }\n      if (cell.hasAttribute('frozen')) {\n        leftBoundary = cell.getBoundingClientRect().right;\n        break;\n      }\n    }\n    for (let i = dstCellIndex + 1; i < dstRow.children.length; i++) {\n      const cell = dstRow.children[i];\n      if (cell.hasAttribute('hidden') ||\n          this._elementMatches(cell, '[part~=\"details-cell\"]')) {\n        continue;\n      }\n      if (cell.hasAttribute('frozen')) {\n        rightBoundary = cell.getBoundingClientRect().left;\n        break;\n      }\n    }\n\n    if (dstCellRect.left < leftBoundary) {\n      this.$.table.scrollLeft += Math.round(dstCellRect.left - leftBoundary);\n    }\n    if (dstCellRect.right > rightBoundary) {\n      this.$.table.scrollLeft += Math.round(dstCellRect.right - rightBoundary);\n    }\n  }\n\n  _elementMatches(el, query) {\n    return el.matches ? el.matches(query) :\n      Array.from(el.parentNode.querySelectorAll(query)).indexOf(el) !== -1;\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\n\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { dom } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { useShadow } from '@polymer/polymer/lib/utils/settings.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnReorderingMixin = superClass => class ColumnReorderingMixin extends GestureEventListeners(superClass) {\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to allow column reordering.\n       */\n      columnReorderingAllowed: {\n        type: Boolean,\n        value: false\n      },\n\n      _orderBaseScope: {\n        type: Number,\n        value: 10000000\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateOrders(_columnTree, _columnTree.*)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    addListener(this, 'track', this._onTrackEvent);\n    this._reorderGhost = this.shadowRoot.querySelector('[part=\"reorder-ghost\"]');\n\n    this.addEventListener('touchstart', this._onTouchStart.bind(this));\n    this.addEventListener('touchmove', this._onTouchMove.bind(this));\n    this.addEventListener('touchend', this._onTouchEnd.bind(this));\n    this.addEventListener('contextmenu', this._onContextMenu.bind(this));\n  }\n\n  _onContextMenu(e) {\n    if (this.hasAttribute('reordering')) {\n      e.preventDefault();\n    }\n  }\n\n  _onTouchStart(e) {\n    // Touch event, delay activation by 100ms\n    this._startTouchReorderTimeout = setTimeout(() => {\n      this._onTrackStart({\n        detail: {\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        }\n      });\n    }, 100);\n  }\n\n  _onTouchMove(e) {\n    if (this._draggedColumn) {\n      e.preventDefault();\n    }\n    clearTimeout(this._startTouchReorderTimeout);\n  }\n\n  _onTouchEnd() {\n    clearTimeout(this._startTouchReorderTimeout);\n    this._onTrackEnd();\n  }\n\n  _onTrackEvent(e) {\n    if (e.detail.state === 'start') {\n      const path = e.composedPath();\n      const headerCell = path[path.indexOf(this.$.header) - 2];\n      if (!headerCell || !headerCell._content) {\n        // Not a header column\n        return;\n      }\n\n      const activeElement = this.getRootNode().activeElement;\n      if (headerCell._content.contains(this.getRootNode().activeElement)\n          && (!this._ie || !this._isFocusable(activeElement))) {\n        // Something was focused inside the cell\n        return;\n      }\n\n      if (this.$.scroller.hasAttribute('column-resizing')) {\n        // Resizing is in progress\n        return;\n      }\n\n      if (!this._touchDevice) {\n        // Not a touch device\n        this._onTrackStart(e);\n      }\n    } else if (e.detail.state === 'track') {\n      this._onTrack(e);\n    } else if (e.detail.state === 'end') {\n      this._onTrackEnd(e);\n    }\n  }\n\n  _onTrackStart(e) {\n    if (!this.columnReorderingAllowed) {\n      return;\n    }\n\n    // Cancel reordering if there are draggable nodes on the event path\n    const path = e.path || dom(e).path;\n    if (path && path.filter(node => node.hasAttribute && node.hasAttribute('draggable'))[0]) {\n      return;\n    }\n\n    const headerCell = this._cellFromPoint(e.detail.x, e.detail.y);\n    if (!headerCell || headerCell.getAttribute('part').indexOf('header-cell') === -1) {\n      return;\n    }\n\n    this._toggleAttribute('reordering', true, this);\n    this._draggedColumn = headerCell._column;\n    while (this._draggedColumn.parentElement.childElementCount === 1) {\n      // This is the only column in the group, drag the whole group instead\n      this._draggedColumn = this._draggedColumn.parentElement;\n    }\n    this._setSiblingsReorderStatus(this._draggedColumn, 'allowed');\n    this._draggedColumn._reorderStatus = 'dragging';\n\n    this._updateGhost(headerCell);\n    this._reorderGhost.style.visibility = 'visible';\n    this._updateGhostPosition(e.detail.x, this._touchDevice ? e.detail.y - 50 : e.detail.y);\n    this._autoScroller();\n  }\n\n  _onTrack(e) {\n    if (!this._draggedColumn) {\n      // Reordering didnt start. Skip this event.\n      return;\n    }\n\n    const targetCell = this._cellFromPoint(e.detail.x, e.detail.y);\n    if (!targetCell) {\n      return;\n    }\n\n    const targetColumn = this._getTargetColumn(targetCell, this._draggedColumn);\n    if (this._isSwapAllowed(this._draggedColumn, targetColumn) &&\n      this._isSwappableByPosition(targetColumn, e.detail.x)) {\n      this._swapColumnOrders(this._draggedColumn, targetColumn);\n    }\n\n    this._updateGhostPosition(e.detail.x, this._touchDevice ? e.detail.y - 50 : e.detail.y);\n    this._lastDragClientX = e.detail.x;\n  }\n\n  _onTrackEnd() {\n    if (!this._draggedColumn) {\n      // Reordering didnt start. Skip this event.\n      return;\n    }\n\n    this._toggleAttribute('reordering', false, this);\n    this._draggedColumn._reorderStatus = '';\n    this._setSiblingsReorderStatus(this._draggedColumn, '');\n    this._draggedColumn = null;\n    this._lastDragClientX = null;\n    this._reorderGhost.style.visibility = 'hidden';\n\n    this.dispatchEvent(new CustomEvent('column-reorder', {detail: {\n      columns: this._getColumnsInOrder()\n    }}));\n  }\n\n  _getColumnsInOrder() {\n    return this._columnTree.slice(0).pop()\n      .filter(c => !c.hidden)\n      .sort((b, a) => (b._order - a._order));\n  }\n\n  _cellFromPoint(x, y) {\n    x = x || 0;\n    y = y || 0;\n    if (!this._draggedColumn) {\n      this._toggleAttribute('no-content-pointer-events', true, this.$.scroller);\n    }\n    let cell;\n    if (useShadow) {\n      cell = this.shadowRoot.elementFromPoint(x, y);\n    } else {\n      cell = document.elementFromPoint(x, y);\n\n      // Workaround a FF58 bug\n      if (cell.localName === 'vaadin-grid-cell-content') {\n        cell = cell.assignedSlot.parentNode;\n      }\n\n    }\n    this._toggleAttribute('no-content-pointer-events', false, this.$.scroller);\n\n    // Make sure the element is actually a cell\n    if (cell && cell._column) {\n      return cell;\n    }\n  }\n\n  _updateGhostPosition(eventClientX, eventClientY) {\n    const ghostRect = this._reorderGhost.getBoundingClientRect();\n    // // This is where we want to position the ghost\n    const targetLeft = eventClientX - ghostRect.width / 2;\n    const targetTop = eventClientY - ghostRect.height / 2;\n    // Current position\n    const _left = parseInt(this._reorderGhost._left || 0);\n    const _top = parseInt(this._reorderGhost._top || 0);\n    // Reposition the ghost\n    this._reorderGhost._left = _left - (ghostRect.left - targetLeft);\n    this._reorderGhost._top = _top - (ghostRect.top - targetTop);\n    this._reorderGhost.style.transform = `translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`;\n  }\n\n  _getInnerText(e) {\n    if (e.localName) {\n      // Custom implementation needed since IE11 doesn't respect the spec in case of hidden elements\n      if (getComputedStyle(e).display === 'none') {\n        return '';\n      } else {\n        return Array.from(e.childNodes).map(n => this._getInnerText(n)).join('');\n      }\n    } else {\n      return e.textContent;\n    }\n  }\n\n  _updateGhost(cell) {\n    const ghost = this._reorderGhost;\n    ghost.textContent = this._getInnerText(cell._content);\n    const style = window.getComputedStyle(cell);\n    ['boxSizing', 'display', 'width', 'height', 'background', 'alignItems', 'padding', 'border', 'flex-direction', 'overflow']\n      .forEach(propertyName => ghost.style[propertyName] = style[propertyName]);\n    return ghost;\n  }\n\n  _updateOrders(columnTree, splices) {\n    if (columnTree === undefined || splices === undefined) {\n      return;\n    }\n\n    // Reset all column orders\n    columnTree[0].forEach((column, index) => column._order = 0);\n    // Set order numbers to top-level columns\n    columnTree[0].forEach((column, index) => column._order = (index + 1) * this._orderBaseScope);\n  }\n\n  _setSiblingsReorderStatus(column, status) {\n    Array.from(column.parentNode.children)\n      .filter(child => /column/.test(child.localName) && this._isSwapAllowed(child, column))\n      .forEach(sibling => sibling._reorderStatus = status);\n  }\n\n  _autoScroller() {\n    if (this._lastDragClientX) {\n      const rightDiff = this._lastDragClientX - this.getBoundingClientRect().right + 50;\n      const leftDiff = this.getBoundingClientRect().left - this._lastDragClientX + 50;\n\n      if (rightDiff > 0) {\n        this.$.table.scrollLeft += rightDiff / 10;\n      } else if (leftDiff > 0) {\n        this.$.table.scrollLeft -= leftDiff / 10;\n      }\n      this._scrollHandler();\n    }\n\n    if (this._draggedColumn) {\n      this.async(this._autoScroller, 10);\n    }\n  }\n\n  _isSwapAllowed(column1, column2) {\n    if (column1 && column2) {\n      const differentColumns = column1 !== column2;\n      const sameParent = column1.parentElement === column2.parentElement;\n      const sameFrozen = column1.frozen === column2.frozen;\n      return differentColumns && sameParent && sameFrozen;\n    }\n  }\n\n  _isSwappableByPosition(targetColumn, clientX) {\n    const targetCell =\n      Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~=\"cell\"]')).filter(cell => targetColumn.contains(cell._column))[0];\n    const sourceCellRect = this.$.header.querySelector('tr:not([hidden]) [reorder-status=dragging]').getBoundingClientRect();\n    const targetRect = targetCell.getBoundingClientRect();\n    if (targetRect.left > sourceCellRect.left) {\n      return clientX > targetRect.right - sourceCellRect.width;\n    } else {\n      return clientX < targetRect.left + sourceCellRect.width;\n    }\n  }\n\n  _swapColumnOrders(column1, column2) {\n    const _order = column1._order;\n    column1._order = column2._order;\n    column2._order = _order;\n    this._updateLastFrozen();\n    this._updateFirstAndLastColumn();\n  }\n\n  _getTargetColumn(targetCell, draggedColumn) {\n    if (targetCell && draggedColumn) {\n      let candidate = targetCell._column;\n      while (candidate.parentElement !== draggedColumn.parentElement && candidate !== this) {\n        candidate = candidate.parentElement;\n      }\n      if (candidate.parentElement === draggedColumn.parentElement) {\n        return candidate;\n      } else {\n        return targetCell._column;\n      }\n    }\n  }\n\n  /**\n   * Fired when the columns in the grid are reordered.\n   *\n   * @event column-reorder\n   * @param {Object} detail\n   * @param {Object} detail.columns the columns in the new order\n   */\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\nimport { DirMixin } from '@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js';\nimport { Templatizer } from './vaadin-grid-templatizer.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnBaseMixin = superClass => class ColumnBaseMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * When set to true, the column is user-resizable.\n       * @default false\n       */\n      resizable: {\n        type: Boolean,\n        value: function() {\n          if (this.localName === 'vaadin-grid-column-group') {\n            return;\n          }\n\n          const parent = this.parentNode;\n          if (parent && parent.localName === 'vaadin-grid-column-group') {\n            return parent.resizable || false;\n          } else {\n            return false;\n          }\n        }\n      },\n\n      _headerTemplate: {\n        type: Object\n      },\n\n      _footerTemplate: {\n        type: Object\n      },\n\n      /**\n       * When true, the column is frozen. When a column inside of a column group is frozen,\n       * all of the sibling columns inside the group will get frozen also.\n       */\n      frozen: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * When set to true, the cells for this column are hidden.\n       */\n      hidden: {\n        type: Boolean\n      },\n\n      /**\n       * Text content to display in the header cell of the column.\n       */\n      header: {\n        type: String\n      },\n\n      /**\n       * Aligns the columns cell content horizontally.\n       * Supported values: \"start\", \"center\" and \"end\".\n       */\n      textAlign: {\n        type: String\n      },\n\n      _lastFrozen: {\n        type: Boolean,\n        value: false\n      },\n\n      _order: Number,\n\n      _reorderStatus: Boolean,\n\n      _emptyCells: Array,\n\n      _headerCell: Object,\n\n      _footerCell: Object,\n\n      _grid: Object,\n\n      /**\n       * Custom function for rendering the header content.\n       * Receives two arguments:\n       *\n       * - `root` The header cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       */\n      headerRenderer: Function,\n\n      /**\n       * Custom function for rendering the footer content.\n       * Receives two arguments:\n       *\n       * - `root` The footer cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       */\n      footerRenderer: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '_widthChanged(width, _headerCell, _footerCell, _cells.*)',\n      '_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)',\n      '_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)',\n      '_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)',\n      '_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)',\n      '_orderChanged(_order, _headerCell, _footerCell, _cells.*)',\n      '_lastFrozenChanged(_lastFrozen)',\n      '_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)',\n      '_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)',\n      '_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)',\n      '_resizableChanged(resizable, _headerCell)',\n      '_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)',\n      '_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)'\n    ];\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._bodyTemplate && (this._bodyTemplate.templatizer._grid = this._grid);\n    this._headerTemplate && (this._headerTemplate.templatizer._grid = this._grid);\n    this._footerTemplate && (this._footerTemplate.templatizer._grid = this._grid);\n\n    this._templateObserver.flush();\n    if (!this._bodyTemplate) {\n      // The observer might not have triggered if the tag is empty. Run manually.\n      this._templateObserver.callback();\n    }\n\n    requestAnimationFrame(() => {\n      this._allCells.forEach(cell => {\n        if (!cell._content.parentNode) {\n          this._grid && this._grid.appendChild(cell._content);\n        }\n      });\n    });\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    requestAnimationFrame(() => {\n      if (!this._findHostGrid()) {\n        this._allCells.forEach(cell => {\n          if (cell._content.parentNode) {\n            cell._content.parentNode.removeChild(cell._content);\n          }\n        });\n      }\n    });\n\n    this._gridValue = undefined;\n  }\n\n  _findHostGrid() {\n    let el = this;\n    // Custom elements extending grid must have a specific localName\n    while (el && !/^vaadin.*grid(-pro)?$/.test(el.localName)) {\n      el = el.assignedSlot ? el.assignedSlot.parentNode : el.parentNode;\n    }\n    return el || undefined;\n  }\n\n  get _grid() {\n    if (!this._gridValue) {\n      this._gridValue = this._findHostGrid();\n    }\n    return this._gridValue;\n  }\n\n  get _allCells() {\n    return []\n      .concat(this._cells || [])\n      .concat(this._emptyCells || [])\n      .concat(this._headerCell)\n      .concat(this._footerCell)\n      .filter(cell => cell);\n  }\n\n  constructor() {\n    super();\n\n    this._templateObserver = new FlattenedNodesObserver(this, info => {\n      this._headerTemplate = this._prepareHeaderTemplate();\n      this._footerTemplate = this._prepareFooterTemplate();\n      this._bodyTemplate = this._prepareBodyTemplate();\n    });\n  }\n\n  _prepareHeaderTemplate() {\n    return this._prepareTemplatizer(this._findTemplate(true) || null, {});\n  }\n\n  _prepareFooterTemplate() {\n    return this._prepareTemplatizer(this._findTemplate(false, true) || null, {});\n  }\n\n  _prepareBodyTemplate() {\n    return this._prepareTemplatizer(this._findTemplate() || null);\n  }\n\n  _prepareTemplatizer(template, instanceProps) {\n    if (template && !template.templatizer) {\n      const templatizer = new Templatizer();\n      templatizer._grid = this._grid;\n      templatizer.dataHost = this.dataHost;\n      templatizer._instanceProps = instanceProps || templatizer._instanceProps;\n      templatizer.template = template;\n      template.templatizer = templatizer;\n    }\n\n    return template;\n  }\n\n  _renderHeaderAndFooter() {\n    if (this.headerRenderer && this._headerCell) {\n      this.__runRenderer(this.headerRenderer, this._headerCell);\n    }\n    if (this.footerRenderer && this._footerCell) {\n      this.__runRenderer(this.footerRenderer, this._footerCell);\n    }\n  }\n\n  __runRenderer(renderer, cell, rowData) {\n    const args = [cell._content, this];\n    if (rowData && rowData.item) {\n      args.push(rowData);\n    }\n    renderer.apply(this, args);\n  }\n\n  __setColumnTemplateOrRenderer(template, renderer, cells) {\n    if (template && renderer) {\n      throw new Error('You should only use either a renderer or a template');\n    }\n\n    cells.forEach(cell => {\n      const model = this._grid.__getRowModel(cell.parentElement);\n\n      if (renderer) {\n        cell._renderer = renderer;\n\n        if (model.item || renderer === this.headerRenderer || renderer === this.footerRenderer) {\n          this.__runRenderer(renderer, cell, model);\n        }\n      } else if (cell._template !== template) {\n        cell._template = template;\n\n        cell._content.innerHTML = '';\n        template.templatizer._grid = template.templatizer._grid || this._grid;\n        const inst = template.templatizer.createInstance();\n        cell._content.appendChild(inst.root);\n        cell._instance = inst;\n        if (model.item) {\n          cell._instance.setProperties(model);\n        }\n      }\n    });\n  }\n\n  _setBodyTemplateOrRenderer(template, renderer, cells, splices) {\n    if ((template || renderer) && cells) {\n      this.__setColumnTemplateOrRenderer(template, renderer, cells);\n    }\n  }\n\n  _setHeaderTemplateOrRenderer(headerTemplate, headerRenderer, headerCell) {\n    if ((headerTemplate || headerRenderer) && headerCell) {\n      this.__setColumnTemplateOrRenderer(headerTemplate, headerRenderer, [headerCell]);\n    }\n  }\n\n  _setFooterTemplateOrRenderer(footerTemplate, footerRenderer, footerCell) {\n    if ((footerTemplate || footerRenderer) && footerCell) {\n      this.__setColumnTemplateOrRenderer(footerTemplate, footerRenderer, [footerCell]);\n      this._grid.__updateHeaderFooterRowVisibility(footerCell.parentElement);\n    }\n  }\n\n  _selectFirstTemplate(header = false, footer = false) {\n    return FlattenedNodesObserver.getFlattenedNodes(this)\n      .filter(node =>\n        node.localName === 'template'\n        && node.classList.contains('header') === header\n        && node.classList.contains('footer') === footer\n      )[0];\n  }\n\n  _findTemplate(header, footer) {\n    const template = this._selectFirstTemplate(header, footer);\n    if (template) {\n      if (this.dataHost) {\n        // set dataHost to the context where template has been defined\n        template._rootDataHost = this.dataHost._rootDataHost || this.dataHost;\n      }\n    }\n    return template;\n  }\n\n  _flexGrowChanged(flexGrow, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('flexGrow');\n    }\n\n    this._allCells.forEach(cell => cell.style.flexGrow = flexGrow);\n  }\n\n  _orderChanged(order, headerCell, footerCell, cells) {\n    this._allCells.forEach(cell => cell.style.order = order);\n  }\n\n  _widthChanged(width, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('width');\n    }\n\n    this._allCells.forEach(cell => cell.style.width = width);\n\n    // Force a reflow to workaround browser issues causing double scrollbars to grid\n    // https://github.com/vaadin/vaadin-grid/issues/1586\n    if (this._grid && this._grid.__forceReflow) {\n      this._grid.__forceReflow();\n    }\n  }\n\n  _frozenChanged(frozen, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('frozen', frozen);\n    }\n\n    this._allCells.forEach(cell => this._toggleAttribute('frozen', frozen, cell));\n\n    this._grid && this._grid._frozenCellsChanged && this._grid._frozenCellsChanged();\n  }\n\n  _lastFrozenChanged(lastFrozen) {\n    this._allCells.forEach(cell => this._toggleAttribute('last-frozen', lastFrozen, cell));\n\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._lastFrozen = lastFrozen;\n    }\n  }\n\n  _pathOrHeaderChanged(path, header, headerCell, footerCell, cells, renderer, headerRenderer, bodyTemplate, headerTemplate) {\n    const hasHeaderText = header !== undefined;\n    if (!headerRenderer && !headerTemplate && hasHeaderText && headerCell) {\n      this.__setTextContent(headerCell._content, header);\n    }\n\n    if (path && cells.value) {\n      if (!renderer && !bodyTemplate) {\n        const pathRenderer = (root, owner, {item}) => this.__setTextContent(root, this.get(path, item));\n        this.__setColumnTemplateOrRenderer(undefined, pathRenderer, cells.value);\n      }\n\n      if (!headerRenderer && !headerTemplate && !hasHeaderText && headerCell && header !== null) {\n        this.__setTextContent(headerCell._content, this._generateHeader(path));\n      }\n    }\n\n    if (headerCell) {\n      this._grid.__updateHeaderFooterRowVisibility(headerCell.parentElement);\n    }\n  }\n\n  __setTextContent(node, textContent) {\n    node.textContent !== textContent && (node.textContent = textContent);\n  }\n\n  _generateHeader(path) {\n    return path\n      .substr(path.lastIndexOf('.') + 1)\n      .replace(/([A-Z])/g, '-$1').toLowerCase()\n      .replace(/-/g, ' ')\n      .replace(/^./, match => match.toUpperCase());\n  }\n\n  _toggleAttribute(name, bool, node) {\n    if (node.hasAttribute(name) === !bool) {\n      if (bool) {\n        node.setAttribute(name, '');\n      } else {\n        node.removeAttribute(name);\n      }\n    }\n  }\n\n  _reorderStatusChanged(reorderStatus, headerCell, footerCell, cells) {\n    this._allCells.forEach(cell => cell.setAttribute('reorder-status', reorderStatus));\n  }\n\n  _resizableChanged(resizable, headerCell) {\n    if (resizable === undefined || headerCell === undefined) {\n      return;\n    }\n\n    if (headerCell) {\n      [headerCell].concat(this._emptyCells).forEach(cell => {\n        if (cell) {\n          const existingHandle = cell.querySelector('[part~=\"resize-handle\"]');\n          if (existingHandle) {\n            cell.removeChild(existingHandle);\n          }\n\n          if (resizable) {\n            const handle = document.createElement('div');\n            handle.setAttribute('part', 'resize-handle');\n            cell.appendChild(handle);\n          }\n        }\n      });\n    }\n  }\n\n  _textAlignChanged(textAlign, _cells, _headerCell, _footerCell) {\n    if (textAlign === undefined) {\n      return;\n    }\n    if (['start', 'end', 'center'].indexOf(textAlign) === -1) {\n      console.warn('textAlign can only be set as \"start\", \"end\" or \"center\"');\n      return;\n    }\n\n    let textAlignFallback;\n    if (getComputedStyle(this._grid).direction === 'ltr') {\n      if (textAlign === 'start') {\n        textAlignFallback = 'left';\n      } else if (textAlign === 'end') {\n        textAlignFallback = 'right';\n      }\n    } else {\n      if (textAlign === 'start') {\n        textAlignFallback = 'right';\n      } else if (textAlign === 'end') {\n        textAlignFallback = 'left';\n      }\n    }\n\n    this._allCells.forEach(cell => {\n      cell._content.style.textAlign = textAlign;\n      if (getComputedStyle(cell._content).textAlign !== textAlign) {\n        cell._content.style.textAlign = textAlignFallback;\n      }\n    });\n  }\n\n  _hiddenChanged(hidden, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('hidden', hidden);\n    }\n\n    if (!!hidden !== !!this._previousHidden && this._grid) {\n      if (hidden === true) {\n        this._allCells.forEach(cell => {\n          if (cell._content.parentNode) {\n            cell._content.parentNode.removeChild(cell._content);\n          }\n        });\n      }\n      this._grid._debouncerHiddenChanged = Debouncer.debounce(\n        this._grid._debouncerHiddenChanged,\n        animationFrame,\n        () => {\n          if (this._grid && this._grid._renderColumnTree) {\n            this._grid._renderColumnTree(this._grid._columnTree);\n          }\n        }\n      );\n\n      this._grid._updateLastFrozen && this._grid._updateLastFrozen();\n      this._grid.notifyResize && this._grid.notifyResize();\n      this._grid._resetKeyboardNavigation && this._grid._resetKeyboardNavigation();\n    }\n    this._previousHidden = hidden;\n  }\n\n};\n\n/**\n * A `<vaadin-grid-column>` is used to configure how a column in `<vaadin-grid>`\n * should look like.\n *\n * See `<vaadin-grid>` documentation and demos for instructions and examples on how\n * to configure the `<vaadin-grid-column>`.\n * ```\n *\n * @extends PolymerElement\n * @mixes Grid.ColumnBaseMixin\n */\nclass GridColumnElement extends ColumnBaseMixin(DirMixin(PolymerElement)) {\n  static get is() {\n    return 'vaadin-grid-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Width of the cells for this column.\n       */\n      width: {\n        type: String,\n        value: '100px'\n      },\n\n      /**\n       * Flex grow ratio for the cell widths. When set to 0, cell width is fixed.\n       */\n      flexGrow: {\n        type: Number,\n        value: 1\n      },\n\n      /**\n       * Custom function for rendering the cell content.\n       * Receives three arguments:\n       *\n       * - `root` The cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       * - `rowData` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `rowData.index` The index of the item.\n       *   - `rowData.item` The item.\n       *   - `rowData.expanded` Sublevel toggle state.\n       *   - `rowData.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `rowData.selected` Selected state.\n       */\n      renderer: Function,\n\n      /**\n       * Path to an item sub-property whose value gets displayed in the column body cells.\n       * The property name is also shown in the column header if an explicit header or renderer isn't defined.\n       */\n      path: {\n        type: String\n      },\n\n      /**\n       * Automatically sets the width of the column based on the column contents when this is set to `true`.\n       *\n       * For performance reasons the column width is calculated automatically only once when the grid items\n       * are rendered for the first time and the calculation only considers the rows which are currently\n       * rendered in DOM (a bit more than what is currently visible). If the grid is scrolled, or the cell\n       * content changes, the column width might not match the contents anymore.\n       *\n       * Hidden columns are ignored in the calculation and their widths are not automatically updated when\n       * you show a column that was initially hidden.\n       *\n       * You can manually trigger the auto sizing behavior again by calling `grid.recalculateColumnWidths()`.\n       *\n       * The column width may still grow larger when `flexGrow` is not 0.\n       */\n      autoWidth: {\n        type: Boolean,\n        value: false\n      },\n\n      _bodyTemplate: {\n        type: Object\n      },\n\n      _cells: Array\n\n    };\n  }\n\n}\n\ncustomElements.define(GridColumnElement.is, GridColumnElement);\nexport { GridColumnElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * This Element is used internally by vaadin-grid.\n *\n * @private\n */\nclass GridOuterScrollerElement extends (class extends PolymerElement {}) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        height: 100%;\n        width: 100%;\n        position: absolute;\n        top: 0;\n        box-sizing: border-box;\n        overflow: auto;\n      }\n\n      :host([passthrough]) {\n        pointer-events: none;\n      }\n    </style>\n\n    <slot></slot>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-outer-scroller';\n  }\n\n  static get properties() {\n    return {\n\n      scrollTarget: {\n        type: Object\n      },\n\n      scrollHandler: {\n        type: Object\n      },\n\n      passthrough: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: true\n      },\n\n      outerScrolling: Boolean,\n\n      noScrollbars: Boolean,\n\n      _touchDevice: Boolean\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('scroll', () => this._syncScrollTarget());\n    this.parentElement.addEventListener('mousemove', this._onMouseMove.bind(this));\n\n    // for some reason scroll bars are hidden in iOS if this style is\n    // added in stylesheets or before attaching.\n    this.style.webkitOverflowScrolling = 'touch';\n\n    this.addEventListener('mousedown', _ => this.outerScrolling = true);\n    this.addEventListener('mouseup', _ => {\n      this.outerScrolling = false;\n      this.scrollHandler._scrollHandler();\n    });\n  }\n\n  _onMouseMove(e) {\n    // Ignore mousemove events on touch devices\n    if (!this._touchDevice) {\n      if (this.noScrollbars && this.parentElement.hasAttribute('scroll-period')) {\n        this.passthrough = e.offsetY <= this.clientHeight - 20 && e.offsetX <= this.clientWidth - 20;\n      } else {\n        this.passthrough = e.offsetY <= this.clientHeight && e.offsetX <= this.clientWidth;\n      }\n    }\n  }\n\n  syncOuterScroller() {\n    this.scrollTop = this.scrollTarget.scrollTop;\n    this.scrollLeft = this.scrollTarget.scrollLeft;\n  }\n\n  _syncScrollTarget() {\n    requestAnimationFrame(() => {\n      this.scrollTarget.scrollTop = this.scrollTop;\n      this.scrollTarget.scrollLeft = this.scrollLeft;\n      this.scrollHandler._scrollHandler();\n    });\n\n  }\n}\n\ncustomElements.define(GridOuterScrollerElement.is, GridOuterScrollerElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/lib/elements/dom-module.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nconst VaadinGridStyles = document.createElement('dom-module');\n\n// NOTE(web-padawan): https://github.com/vaadin/vaadin-grid/issues/1514\nVaadinGridStyles.appendChild(\n  html`\n  <style>\n    @keyframes vaadin-grid-appear {\n      to {\n        opacity: 1;\n      }\n    }\n\n    :host {\n      display: block;\n      animation: 1ms vaadin-grid-appear;\n      height: 400px;\n      flex: 1 1 auto;\n      align-self: stretch;\n      position: relative;\n    }\n\n    :host([hidden]) {\n      display: none !important;\n    }\n\n    #scroller {\n      display: block;\n      transform: translateY(0);\n      width: auto;\n      height: auto;\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n    }\n\n    :host([height-by-rows]) {\n      height: auto;\n      align-self: flex-start;\n      flex-grow: 0;\n      width: 100%;\n    }\n\n    :host([height-by-rows]) #scroller {\n      width: 100%;\n      height: 100%;\n      position: relative;\n    }\n\n    #table {\n      display: block;\n      width: 100%;\n      height: 100%;\n      overflow: auto;\n      z-index: -2;\n      position: relative;\n      outline: none;\n    }\n\n    #header {\n      display: block;\n      position: absolute;\n      top: 0;\n      width: 100%;\n    }\n\n    th {\n      text-align: inherit;\n    }\n\n    /* Safari doesn't work with \"inherit\" */\n    [safari] th {\n      text-align: initial;\n    }\n\n    #footer {\n      display: block;\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n    }\n\n    #items {\n      display: block;\n      width: 100%;\n      position: relative;\n      z-index: -1;\n    }\n\n    #items,\n    #outersizer,\n    #fixedsizer {\n      border-top: 0 solid transparent;\n      border-bottom: 0 solid transparent;\n    }\n\n    [part~=\"row\"] {\n      display: flex;\n      width: 100%;\n      box-sizing: border-box;\n      margin: 0;\n    }\n\n    [part~=\"row\"][loading] [part~=\"body-cell\"] ::slotted(vaadin-grid-cell-content) {\n      opacity: 0;\n    }\n\n    #items [part~=\"row\"] {\n      position: absolute;\n    }\n\n    #items [part~=\"row\"]:empty {\n      height: 1em;\n    }\n\n    [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n      flex-shrink: 0;\n      flex-grow: 1;\n      box-sizing: border-box;\n      display: flex;\n      width: 100%;\n      position: relative;\n      align-items: center;\n      padding: 0;\n      white-space: nowrap;\n    }\n\n    [part~=\"details-cell\"] {\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n      box-sizing: border-box;\n      padding: 0;\n    }\n\n    [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      display: block;\n      width: 100%;\n      box-sizing: border-box;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    [hidden] {\n      display: none !important;\n    }\n\n    [frozen] {\n      z-index: 2;\n      will-change: transform;\n    }\n\n    #outerscroller {\n      /* Needed (at least) for Android Chrome */\n      z-index: 0;\n    }\n\n    #scroller:not([safari]) #outerscroller {\n      /* Needed for Android Chrome (#1020). Can't be applied to Safari\n      since it would re-introduce the sub-pixel overflow bug (#853) */\n      will-change: transform;\n    }\n\n    [no-scrollbars]:not([safari]):not([firefox]) #outerscroller,\n    [no-scrollbars][safari] #table,\n    [no-scrollbars][firefox] #table {\n      overflow: hidden;\n    }\n\n    [no-scrollbars]:not([safari]):not([firefox]) #outerscroller {\n      pointer-events: none;\n    }\n\n    /* Reordering styles */\n    :host([reordering]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content),\n    :host([reordering]) [part~=\"resize-handle\"],\n    #scroller[no-content-pointer-events] [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      pointer-events: none;\n    }\n\n    [part~=\"reorder-ghost\"] {\n      visibility: hidden;\n      position: fixed;\n      pointer-events: none;\n      opacity: 0.5;\n\n      /* Prevent overflowing the grid in Firefox */\n      top: 0;\n      left: 0;\n    }\n\n    :host([reordering]) {\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    #scroller[ie][column-reordering-allowed] [part~=\"header-cell\"] {\n      -ms-user-select: none;\n    }\n\n    :host([reordering]) #outerscroller {\n      -webkit-overflow-scrolling: auto !important;\n    }\n\n    /* Resizing styles */\n    [part~=\"resize-handle\"] {\n      position: absolute;\n      top: 0;\n      right: 0;\n      height: 100%;\n      cursor: col-resize;\n      z-index: 1;\n    }\n\n    [part~=\"resize-handle\"]::before {\n      position: absolute;\n      content: \"\";\n      height: 100%;\n      width: 35px;\n      transform: translateX(-50%);\n    }\n\n    [last-column] [part~=\"resize-handle\"]::before,\n    [last-frozen] [part~=\"resize-handle\"]::before {\n      width: 18px;\n      transform: none;\n      right: 0;\n    }\n\n    #scroller[column-resizing] {\n      -ms-user-select: none;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    /* Sizer styles */\n    .sizer {\n      display: flex;\n      position: relative;\n      width: 100%;\n      visibility: hidden;\n    }\n\n    .sizer [part~=\"details-cell\"] {\n      display: none !important;\n    }\n\n    .sizer [part~=\"cell\"][hidden] {\n      display: none !important;\n    }\n\n    .sizer [part~=\"cell\"] {\n      display: block;\n      flex-shrink: 0;\n      line-height: 0;\n      margin-top: -1em;\n      height: 0 !important;\n      min-height: 0 !important;\n      max-height: 0 !important;\n      padding: 0 !important;\n    }\n\n    .sizer [part~=\"cell\"]::before {\n      content: \"-\";\n    }\n\n    .sizer [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      display: none !important;\n    }\n\n    /* Fixed mode (Tablet Edge) */\n    #fixedsizer {\n      position: absolute;\n    }\n\n    :not([edge][no-scrollbars]) #fixedsizer {\n      display: none;\n    }\n\n    [edge][no-scrollbars] {\n      /* Any value other than none for the transform results in the creation of both a stacking context and\n      a containing block. The object acts as a containing block for fixed positioned descendants. */\n      transform: translateZ(0);\n      overflow: hidden;\n    }\n\n    [edge][no-scrollbars] #header,\n    [edge][no-scrollbars] #footer {\n      position: fixed;\n    }\n\n    [edge][no-scrollbars] #items {\n      position: fixed;\n      width: 100%;\n      will-change: transform;\n    }\n\n    /* RTL specific styles */\n\n    :host([dir=\"rtl\"]) [part~=\"reorder-ghost\"] {\n      left: auto;\n      right: 0;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"resize-handle\"] {\n      left: 0;\n      right: auto;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"resize-handle\"]::before {\n      transform: translateX(50%);\n    }\n\n    :host([dir=\"rtl\"]) [last-column] [part~=\"resize-handle\"]::before,\n    :host([dir=\"rtl\"]) [last-frozen] [part~=\"resize-handle\"]::before {\n      left: 0;\n      right: auto;\n    }\n  </style>\n`);\n\nconst safari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nconst firefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\nif (safari || firefox) {\n  const scrollingStyles = document.createElement('style');\n  scrollingStyles.textContent = `\n    [scrolling][safari] #outerscroller,\n    [scrolling][firefox] #outerscroller {\n      pointer-events: auto;\n    }\n\n    [ios] #outerscroller {\n      pointer-events: auto;\n      z-index: -3;\n    }\n\n    [ios][scrolling] #outerscroller {\n      z-index: 0;\n    }\n\n    [ios] [frozen] {\n      will-change: auto;\n    }\n  `;\n  VaadinGridStyles.querySelector('template').content.appendChild(scrollingStyles);\n}\n\nVaadinGridStyles.register('vaadin-grid-styles');\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ScrollerElement } from './vaadin-grid-scroller.js';\nimport { A11yMixin } from './vaadin-grid-a11y-mixin.js';\nimport { ActiveItemMixin } from './vaadin-grid-active-item-mixin.js';\nimport { ArrayDataProviderMixin } from './vaadin-grid-array-data-provider-mixin.js';\nimport { ColumnResizingMixin } from './vaadin-grid-column-resizing-mixin.js';\nimport { DataProviderMixin } from './vaadin-grid-data-provider-mixin.js';\nimport { DynamicColumnsMixin } from './vaadin-grid-dynamic-columns-mixin.js';\nimport { EventContextMixin } from './vaadin-grid-event-context-mixin.js';\nimport { FilterMixin } from './vaadin-grid-filter-mixin.js';\nimport { RowDetailsMixin } from './vaadin-grid-row-details-mixin.js';\nimport { ScrollMixin } from './vaadin-grid-scroll-mixin.js';\nimport { SelectionMixin } from './vaadin-grid-selection-mixin.js';\nimport { SortMixin } from './vaadin-grid-sort-mixin.js';\nimport { StylingMixin } from './vaadin-grid-styling-mixin.js';\nimport { DragAndDropMixin } from './vaadin-grid-drag-and-drop-mixin.js';\nimport { KeyboardNavigationMixin } from './vaadin-grid-keyboard-navigation-mixin.js';\nimport { ColumnReorderingMixin } from './vaadin-grid-column-reordering-mixin.js';\nimport './vaadin-grid-column.js';\nimport './vaadin-grid-outer-scroller.js';\nimport './vaadin-grid-styles.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { beforeNextRender, afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut, animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\nconst TOUCH_DEVICE = (() => {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n/**\n *\n * `<vaadin-grid>` is a free, high quality data grid / data table Web Component. The content of the\n * the grid can be populated in two ways: imperatively by using renderer callback function and\n * declaratively by using Polymer's Templates.\n *\n * ### Quick Start\n *\n * Start with an assigning an array to the [`items`](#/elements/vaadin-grid#property-items) property to visualize your data.\n *\n * Use the [`<vaadin-grid-column>`](#/elements/vaadin-grid-column) element to configure the grid columns. Set `path` and `header`\n * shorthand properties for the columns to define what gets rendered in the cells of the column.\n *\n * #### Example:\n * ```html\n * <vaadin-grid>\n *   <vaadin-grid-column path=\"name.first\" header=\"First name\"></vaadin-grid-column>\n *   <vaadin-grid-column path=\"name.last\" header=\"Last name\"></vaadin-grid-column>\n *   <vaadin-grid-column path=\"email\"></vaadin-grid-column>\n * </vaadin-grid>\n * ```\n *\n * For custom content `vaadin-grid-column` element provides you with three types of `renderer` callback functions: `headerRenderer`,\n * `renderer` and `footerRenderer`.\n *\n * Each of those renderer functions provides `root`, `column`, `rowData` arguments when applicable.\n * Generate DOM content, append it to the `root` element and control the state\n * of the host element by accessing `column`. Before generating new content,\n * users are able to check if there is already content in `root` for reusing it.\n *\n * Renderers are called on initialization of new column cells and each time the\n * related row data is updated. DOM generated during the renderer call can be reused\n * in the next renderer call and will be provided with the `root` argument.\n * On first call it will be empty.\n *\n * #### Example:\n * ```html\n * <vaadin-grid>\n *   <vaadin-grid-column></vaadin-grid-column>\n *   <vaadin-grid-column></vaadin-grid-column>\n *   <vaadin-grid-column></vaadin-grid-column>\n * </vaadin-grid>\n * ```\n * ```js\n * const grid = document.querySelector('vaadin-grid');\n * grid.items = [{'name': 'John', 'surname': 'Lennon', 'role': 'singer'},\n *               {'name': 'Ringo', 'surname': 'Starr', 'role': 'drums'}];\n *\n * const columns = grid.querySelectorAll('vaadin-grid-column');\n *\n * columns[0].headerRenderer = function(root) {\n *   root.textContent = 'Name';\n * };\n * columns[0].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.name;\n * };\n *\n * columns[1].headerRenderer = function(root) {\n *   root.textContent = 'Surname';\n * };\n * columns[1].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.surname;\n * };\n *\n * columns[2].headerRenderer = function(root) {\n *   root.textContent = 'Role';\n * };\n * columns[2].renderer = function(root, column, rowData) {\n *   root.textContent = rowData.item.role;\n * };\n * ```\n *\n * Alternatively, the content can be provided with Polymer's Templates:\n *\n * #### Example:\n * ```html\n * <vaadin-grid items='[{\"name\": \"John\", \"surname\": \"Lennon\", \"role\": \"singer\"},\n * {\"name\": \"Ringo\", \"surname\": \"Starr\", \"role\": \"drums\"}]'>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Name</template>\n *     <template>[[item.name]]</template>\n *   </vaadin-grid-column>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Surname</template>\n *     <template>[[item.surname]]</template>\n *   </vaadin-grid-column>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Role</template>\n *     <template>[[item.role]]</template>\n *   </vaadin-grid-column>\n * </vaadin-grid>\n * ```\n *\n * The following helper elements can be used for further customization:\n * - [`<vaadin-grid-column-group>`](#/elements/vaadin-grid-column-group)\n * - [`<vaadin-grid-filter>`](#/elements/vaadin-grid-filter)\n * - [`<vaadin-grid-sorter>`](#/elements/vaadin-grid-sorter)\n * - [`<vaadin-grid-selection-column>`](#/elements/vaadin-grid-selection-column)\n * - [`<vaadin-grid-tree-toggle>`](#/elements/vaadin-grid-tree-toggle)\n *\n * __Note that the helper elements must be explicitly imported.__\n * If you want to import everything at once you can use the `all-imports.html` bundle.\n *\n * A column template can be decorated with one the following class names to specify its purpose\n * - `header`: Marks a header template\n * - `footer`: Marks a footer template\n * - `row-details`: Marks a row details template\n *\n * The following built-in template variables can be bound to inside the column templates:\n * - `[[index]]`: Number representing the row index\n * - `[[item]]` and it's sub-properties: Data object (provided by a data provider / items array)\n * - `{{selected}}`: True if the item is selected (can be two-way bound)\n * - `{{detailsOpened}}`: True if the item has row details opened (can be two-way bound)\n * - `{{expanded}}`: True if the item has tree sublevel expanded (can be two-way bound)\n * - `[[level]]`: Number of the tree sublevel of the item, first level-items have 0\n *\n * ### Lazy Loading with Function Data Provider\n *\n * In addition to assigning an array to the items property, you can alternatively\n * provide the `<vaadin-grid>` data through the\n * [`dataProvider`](#/elements/vaadin-grid#property-dataProvider) function property.\n * The `<vaadin-grid>` calls this function lazily, only when it needs more data\n * to be displayed.\n *\n * See the [`dataProvider`](#/elements/vaadin-grid#property-dataProvider) in\n * the API reference below for the detailed data provider arguments description,\n * and the Assigning Data page in the demos.\n *\n * __Note that expanding the tree grid's item will trigger a call to the `dataProvider`.__\n *\n * __Also, note that when using function data providers, the total number of items\n * needs to be set manually. The total number of items can be returned\n * in the second argument of the data provider callback:__\n *\n * ```javascript\n * grid.dataProvider = function(params, callback) {\n *   var url = 'https://api.example/data' +\n *       '?page=' + params.page +        // the requested page index\n *       '&per_page=' + params.pageSize; // number of items on the page\n *   var xhr = new XMLHttpRequest();\n *   xhr.onload = function() {\n *     var response = JSON.parse(xhr.responseText);\n *     callback(\n *       response.employees, // requested page of items\n *       response.totalSize  // total number of items\n *     );\n *   };\n *   xhr.open('GET', url, true);\n *   xhr.send();\n * };\n * ```\n *\n * __Alternatively, you can use the `size` property to set the total number of items:__\n *\n * ```javascript\n * grid.size = 200; // The total number of items\n * grid.dataProvider = function(params, callback) {\n *   var url = 'https://api.example/data' +\n *       '?page=' + params.page +        // the requested page index\n *       '&per_page=' + params.pageSize; // number of items on the page\n *   var xhr = new XMLHttpRequest();\n *   xhr.onload = function() {\n *     var response = JSON.parse(xhr.responseText);\n *     callback(response.employees);\n *   };\n *   xhr.open('GET', url, true);\n *   xhr.send();\n * };\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `row` | Row in the internal table\n * `cell` | Cell in the internal table\n * `header-cell` | Header cell in the internal table\n * `body-cell` | Body cell in the internal table\n * `footer-cell` | Footer cell in the internal table\n * `details-cell` | Row details cell in the internal table\n * `resize-handle` | Handle for resizing the columns\n * `reorder-ghost` | Ghost element of the header cell being dragged\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `loading` | Set when the grid is loading data from data provider | :host\n * `interacting` | Keyboard navigation in interaction mode | :host\n * `navigating` | Keyboard navigation in navigation mode | :host\n * `overflow` | Set when rows are overflowing the grid viewport. Possible values: `top`, `bottom`, `left`, `right` | :host\n * `reordering` | Set when the grid's columns are being reordered | :host\n * `dragover` | Set when the grid (not a specific row) is dragged over | :host\n * `dragging-rows` : Set when grid rows are dragged  | :host\n * `reorder-status` | Reflects the status of a cell while columns are being reordered | cell\n * `frozen` | Frozen cell | cell\n * `last-frozen` | Last frozen cell | cell\n* * `first-column` | First visible cell on a row | cell\n * `last-column` | Last visible cell on a row | cell\n * `selected` | Selected row | row\n * `expanded` | Expanded row | row\n * `details-opened` | Row with details open | row\n * `loading` | Row that is waiting for data from data provider | row\n * `odd` | Odd row | row\n * `first` | The first body row | row\n * `dragstart` | Set for one frame when drag of a row is starting. The value is a number when multiple rows are dragged | row\n * `dragover` | Set when the row is dragged over | row\n * `drag-disabled` | Set to a row that isn't available for dragging | row\n * `drop-disabled` | Set to a row that can't be dropped on top of | row\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes ThemableMixin\n * @mixes Grid.A11yMixin\n * @mixes Grid.ActiveItemMixin\n * @mixes Grid.ArrayDataProviderMixin\n * @mixes Grid.ColumnResizingMixin\n * @mixes Grid.DataProviderMixin\n * @mixes Grid.DynamicColumnsMixin\n * @mixes Grid.FilterMixin\n * @mixes Grid.RowDetailsMixin\n * @mixes Grid.ScrollMixin\n * @mixes Grid.SelectionMixin\n * @mixes Grid.SortMixin\n * @mixes Grid.KeyboardNavigationMixin\n * @mixes Grid.ColumnReorderingMixin\n * @mixes Grid.EventContextMixin\n * @mixes Grid.StylingMixin\n * @mixes Grid.DragAndDropMixin\n * @demo demo/index.html\n */\nclass GridElement extends\n  ElementMixin(\n    ThemableMixin(\n      DataProviderMixin(\n        ArrayDataProviderMixin(\n          DynamicColumnsMixin(\n            ActiveItemMixin(\n              ScrollMixin(\n                SelectionMixin(\n                  SortMixin(\n                    RowDetailsMixin(\n                      KeyboardNavigationMixin(\n                        A11yMixin(\n                          FilterMixin(\n                            ColumnReorderingMixin(\n                              ColumnResizingMixin(\n                                EventContextMixin(\n                                  DragAndDropMixin(\n                                    StylingMixin(\n                                      ScrollerElement)))))))))))))))))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-grid-styles\"></style>\n\n    <div id=\"scroller\" no-scrollbars\\$=\"[[!_scrollbarWidth]]\" wheel-scrolling\\$=\"[[_wheelScrolling]]\" safari\\$=\"[[_safari]]\" ios\\$=\"[[_ios]]\" loading\\$=\"[[loading]]\" edge\\$=\"[[_edge]]\" firefox\\$=\"[[_firefox]]\" ie\\$=\"[[_ie]]\" column-reordering-allowed\\$=\"[[columnReorderingAllowed]]\">\n\n      <table id=\"table\" role=\"grid\" aria-multiselectable=\"true\" tabindex=\"0\">\n        <caption id=\"fixedsizer\" class=\"sizer\" part=\"row\"></caption>\n        <thead id=\"header\" role=\"rowgroup\"></thead>\n        <tbody id=\"items\" role=\"rowgroup\"></tbody>\n        <tfoot id=\"footer\" role=\"rowgroup\"></tfoot>\n      </table>\n\n      <div part=\"reorder-ghost\"></div>\n      <vaadin-grid-outer-scroller id=\"outerscroller\" _touch-device=\"[[_touchDevice]]\" scroll-target=\"[[scrollTarget]]\" scroll-handler=\"[[_this]]\" no-scrollbars=\"[[!_scrollbarWidth]]\">\n        <div id=\"outersizer\" class=\"sizer\" part=\"row\"></div>\n      </vaadin-grid-outer-scroller>\n    </div>\n\n    <!-- The template needs at least one slot or else shady doesn't distribute -->\n    <slot name=\"nodistribute\"></slot>\n\n    <div id=\"focusexit\" tabindex=\"0\"></div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid';\n  }\n\n  static get version() {\n    return '5.6.6';\n  }\n\n  static get observers() {\n    return [\n      '_columnTreeChanged(_columnTree, _columnTree.*)'\n    ];\n  }\n\n  static get properties() {\n    return {\n\n      _this: {\n        type: Object,\n        value: function() {\n          return this;\n        }\n      },\n\n      _safari: {\n        type: Boolean,\n        value: /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n      },\n\n      _ios: {\n        type: Boolean,\n        value: (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream)\n          || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)\n      },\n\n      _edge: {\n        type: Boolean,\n        value: typeof CSS !== 'undefined' && CSS.supports('(-ms-ime-align:auto)')\n      },\n\n      _ie: {\n        type: Boolean,\n        value: !!(navigator.userAgent.match(/Trident/) && !navigator.userAgent.match(/MSIE/))\n      },\n\n      _firefox: {\n        type: Boolean,\n        value: navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n      },\n\n      _android: {\n        type: Boolean,\n        value: /android/i.test(navigator.userAgent)\n      },\n\n      _touchDevice: {\n        type: Boolean,\n        value: TOUCH_DEVICE\n      },\n\n      /**\n       * If true, the grid's height is defined by its rows.\n       *\n       * Effectively, this disables the grid's virtual scrolling so that all the rows are rendered in the DOM at once.\n       * If the grid has a large number of items, using the feature is discouraged to avoid performance issues.\n       */\n      heightByRows: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_heightByRowsChanged'\n      },\n      _recalculateColumnWidthOnceLoadingFinished: {\n        type: Boolean,\n        value: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.addEventListener('animationend', this._onAnimationEnd);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.recalculateColumnWidths();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (name === 'dir') {\n      this.__isRTL = newValue === 'rtl';\n      this._updateScrollerMeasurements();\n    }\n  }\n\n  __hasRowsWithClientHeight() {\n    return !!Array.from(this.$.items.children).filter(row => row.clientHeight).length;\n  }\n\n  __itemsReceived() {\n    if (this._recalculateColumnWidthOnceLoadingFinished\n      && !this._cache.isLoading()\n      && this.__hasRowsWithClientHeight()) {\n      this._recalculateColumnWidthOnceLoadingFinished = false;\n      this.recalculateColumnWidths();\n    }\n  }\n\n  /**\n   * @param {Array<Vaadin.GridColumnElement>} cols the columns to auto size based on their content width\n   */\n  _recalculateColumnWidths(cols) {\n    // Note: The `cols.forEach()` loops below could be implemented as a single loop but this has been\n    // split for performance reasons to batch these similar actions [write/read] together to avoid\n    // unnecessary layout trashing.\n\n    // [write] Set automatic width for all cells (breaks column alignment)\n    cols.forEach(col => {\n      col.width = 'auto';\n      col._origFlexGrow = col.flexGrow;\n      col.flexGrow = 0;\n    });\n    // [read] Measure max cell width in each column\n    cols.forEach(col => {\n      col._currentWidth = 0;\n      // Note: _allCells only contains cells which are currently rendered in DOM\n      col._allCells.forEach(c => {\n        // Add 1px buffer to the offset width to avoid too narrow columns (sub-pixel rendering)\n        const cellWidth = c.offsetWidth + 1;\n        col._currentWidth = Math.max(col._currentWidth, cellWidth);\n      });\n    });\n    // [write] Set column widths to fit widest measured content\n    cols.forEach(col => {\n      col.width = `${col._currentWidth}px`;\n      col.flexGrow = col._origFlexGrow;\n      col._currentWidth = undefined;\n      col._origFlexGrow = undefined;\n    });\n  }\n\n  /**\n   * Updates the `width` of all columns which have `autoWidth` set to `true`.\n   */\n  recalculateColumnWidths() {\n    if (!this._columnTree) {\n      return; // No columns\n    }\n    if (this._cache.isLoading()) {\n      this._recalculateColumnWidthOnceLoadingFinished = true;\n    } else {\n      const cols = this._getColumns().filter(col => !col.hidden && col.autoWidth);\n      this._recalculateColumnWidths(cols);\n\n    }\n  }\n\n  _createScrollerRows(count) {\n    const rows = [];\n    for (var i = 0; i < count; i++) {\n      const row = document.createElement('tr');\n      row.setAttribute('part', 'row');\n      row.setAttribute('role', 'row');\n      if (this._columnTree) {\n        this._updateRow(row, this._columnTree[this._columnTree.length - 1], 'body', false, true);\n      }\n      rows.push(row);\n    }\n\n    if (this._columnTree) {\n      this._columnTree[this._columnTree.length - 1].forEach(c => c.notifyPath && c.notifyPath('_cells.*', c._cells));\n    }\n\n    beforeNextRender(this, () => {\n      this._updateFirstAndLastColumn();\n      this._resetKeyboardNavigation();\n    });\n    return rows;\n  }\n\n  _getRowTarget() {\n    return this.$.items;\n  }\n\n  _createCell(tagName) {\n    const contentId = this._contentIndex = this._contentIndex + 1 || 0;\n    const slotName = 'vaadin-grid-cell-content-' + contentId;\n\n    const cellContent = document.createElement('vaadin-grid-cell-content');\n    cellContent.setAttribute('slot', slotName);\n\n    const cell = document.createElement(tagName);\n    cell.id = slotName.replace('-content-', '-');\n    cell.setAttribute('tabindex', '-1');\n    cell.setAttribute('role', tagName === 'td' ? 'gridcell' : 'columnheader');\n\n    const slot = document.createElement('slot');\n    slot.setAttribute('name', slotName);\n\n    cell.appendChild(slot);\n\n    cell._content = cellContent;\n\n    // With native Shadow DOM, mousedown on slotted element does not focus\n    // focusable slot wrapper, that is why cells are not focused with\n    // mousedown. Workaround: listen for mousedown and focus manually.\n    cellContent.addEventListener('mousedown', () => {\n      if (window.chrome) {\n        // Chrome bug: focusing before mouseup prevents text selection, see http://crbug.com/771903\n        const mouseUpListener = () => {\n          if (!cellContent.contains(this.getRootNode().activeElement)) {\n            cell.focus();\n          }\n          // If focus is in the cell content  respect it, do not change.\n          document.removeEventListener('mouseup', mouseUpListener, true);\n        };\n        document.addEventListener('mouseup', mouseUpListener, true);\n      } else {\n        // Focus on mouseup, on the other hand, removes selection on Safari.\n        // Watch out sync focus removal issue, only async focus works here.\n        setTimeout(() => {\n          if (!cellContent.contains(this.getRootNode().activeElement)) {\n            cell.focus();\n          }\n        });\n      }\n    });\n\n    return cell;\n  }\n\n  _updateRow(row, columns, section, isColumnRow, noNotify) {\n    section = section || 'body';\n\n    const contentsFragment = document.createDocumentFragment();\n\n    Array.from(row.children).forEach(cell => cell._vacant = true);\n    row.innerHTML = '';\n    if (row.id !== 'outersizer' && row.id !== 'fixedsizer') {\n      row.hidden = true;\n    }\n    columns\n      .filter(column => !column.hidden)\n      .forEach((column, index, cols) => {\n        let cell;\n\n        if (section === 'body') {\n        // Body\n          column._cells = column._cells || [];\n          cell = column._cells.filter(cell => cell._vacant)[0];\n          if (!cell) {\n            cell = this._createCell('td');\n            column._cells.push(cell);\n          }\n          cell.setAttribute('part', 'cell body-cell');\n          row.appendChild(cell);\n\n          if (index === cols.length - 1 && (this._rowDetailsTemplate || this.rowDetailsRenderer)) {\n          // Add details cell as last cell to body rows\n            this._detailsCells = this._detailsCells || [];\n            const detailsCell = this._detailsCells.filter(cell => cell._vacant)[0] || this._createCell('td');\n            if (this._detailsCells.indexOf(detailsCell) === -1) {\n              this._detailsCells.push(detailsCell);\n            }\n            if (!detailsCell._content.parentElement) {\n              contentsFragment.appendChild(detailsCell._content);\n            }\n            this._configureDetailsCell(detailsCell);\n            row.appendChild(detailsCell);\n            this._a11ySetRowDetailsCell(row, detailsCell);\n            detailsCell._vacant = false;\n          }\n\n          if (column.notifyPath && !noNotify) {\n            column.notifyPath('_cells.*', column._cells);\n          }\n        } else {\n        // Header & footer\n          const tagName = section === 'header' ? 'th' : 'td';\n          if (isColumnRow || column.localName === 'vaadin-grid-column-group') {\n            cell = column[`_${section}Cell`] || this._createCell(tagName);\n            cell._column = column;\n            row.appendChild(cell);\n            column[`_${section}Cell`] = cell;\n          } else {\n            column._emptyCells = column._emptyCells || [];\n            cell = column._emptyCells.filter(cell => cell._vacant)[0] || this._createCell(tagName);\n            cell._column = column;\n            row.appendChild(cell);\n            if (column._emptyCells.indexOf(cell) === -1) {\n              column._emptyCells.push(cell);\n            }\n          }\n          cell.setAttribute('part', `cell ${section}-cell`);\n          this.__updateHeaderFooterRowVisibility(row);\n        }\n\n        if (!cell._content.parentElement) {\n          contentsFragment.appendChild(cell._content);\n        }\n        cell._vacant = false;\n        cell._column = column;\n      });\n\n    // Might be empty if only cache was used\n    this.appendChild(contentsFragment);\n\n    this._frozenCellsChanged();\n    this._updateFirstAndLastColumnForRow(row);\n  }\n\n  __updateHeaderFooterRowVisibility(row) {\n    if (!row) {\n      return;\n    }\n\n    const visibleRowCells = Array.from(row.children).filter(cell => {\n      const column = cell._column;\n      if (column._emptyCells && column._emptyCells.indexOf(cell) > -1) {\n        // The cell is an \"empty cell\"  -> doesn't block hiding the row\n        return false;\n      }\n      if (row.parentElement === this.$.header) {\n        if (column.headerRenderer || column._headerTemplate) {\n          // The cell is the header cell of a column that has a header renderer\n          // or a header template -> row should be visible\n          return true;\n        }\n        if (column.header === null) {\n          // The column header is explicilty set to null -> doesn't block hiding the row\n          return false;\n        }\n        if (column.path || column.header !== undefined) {\n          // The column has an explicit non-null header or a path that generates a header\n          // -> row should be visible\n          return true;\n        }\n      } else {\n        if (column.footerRenderer || column._footerTemplate) {\n          // The cell is the footer cell of a column that has a footer renderer\n          // or a footer template -> row should be visible\n          return true;\n        }\n      }\n    });\n\n    if (row.hidden !== !visibleRowCells.length) {\n      row.hidden = !visibleRowCells.length;\n      this.notifyResize();\n    }\n  }\n\n  _updateScrollerItem(row, index) {\n    this._preventScrollerRotatingCellFocus(row, index);\n\n    if (!this._columnTree) {\n      return;\n    }\n\n    this._toggleAttribute('first', index === 0, row);\n    this._toggleAttribute('odd', index % 2, row);\n    this._a11yUpdateRowRowindex(row, index);\n    this._getItem(index, row);\n  }\n\n  _columnTreeChanged(columnTree, splices) {\n    this._renderColumnTree(columnTree);\n    this.recalculateColumnWidths();\n  }\n\n  _renderColumnTree(columnTree) {\n    Array.from(this.$.items.children).forEach((row) => this._updateRow(row, columnTree[columnTree.length - 1], null, false, true));\n\n    while (this.$.header.children.length < columnTree.length) {\n      const headerRow = document.createElement('tr');\n      headerRow.setAttribute('part', 'row');\n      headerRow.setAttribute('role', 'row');\n      this.$.header.appendChild(headerRow);\n\n      const footerRow = document.createElement('tr');\n      footerRow.setAttribute('part', 'row');\n      footerRow.setAttribute('role', 'row');\n      this.$.footer.appendChild(footerRow);\n    }\n    while (this.$.header.children.length > columnTree.length) {\n      this.$.header.removeChild(this.$.header.firstElementChild);\n      this.$.footer.removeChild(this.$.footer.firstElementChild);\n    }\n\n    Array.from(this.$.header.children)\n      .forEach((headerRow, index) => this._updateRow(headerRow, columnTree[index], 'header', index === columnTree.length - 1));\n\n    Array.from(this.$.footer.children)\n      .forEach((footerRow, index) => this._updateRow(footerRow, columnTree[columnTree.length - 1 - index], 'footer', index === 0));\n\n    // Sizer rows\n    this._updateRow(this.$.outersizer, columnTree[columnTree.length - 1], null, false, true);\n    this._updateRow(this.$.fixedsizer, columnTree[columnTree.length - 1]);\n\n    this._resizeHandler();\n    this._frozenCellsChanged();\n    this._updateFirstAndLastColumn();\n    this._resetKeyboardNavigation();\n    this._a11yUpdateHeaderRows();\n    this._a11yUpdateFooterRows();\n  }\n\n  _updateItem(row, item) {\n    row._item = item;\n    const model = this.__getRowModel(row);\n\n    this._toggleAttribute('selected', model.selected, row);\n    this._a11yUpdateRowSelected(row, model.selected);\n    this._a11yUpdateRowLevel(row, model.level);\n    this._toggleAttribute('expanded', model.expanded, row);\n    if (this._rowDetailsTemplate || this.rowDetailsRenderer) {\n      this._toggleDetailsCell(row, item);\n    }\n    this._generateCellClassNames(row, model);\n    this._filterDragAndDrop(row, model);\n\n    Array.from(row.children).forEach(cell => {\n      if (cell._renderer) {\n        const owner = cell._column || this;\n        cell._renderer.call(owner, cell._content, owner, model);\n      } else if (cell._instance) {\n        cell._instance.__detailsOpened__ = model.detailsOpened;\n        cell._instance.__selected__ = model.selected;\n        cell._instance.__level__ = model.level;\n        cell._instance.__expanded__ = model.expanded;\n        cell._instance.setProperties(model);\n      }\n    });\n\n    this._debouncerUpdateHeights = Debouncer.debounce(this._debouncerUpdateHeights,\n      timeOut.after(1), () => {\n        this._updateMetrics();\n        this._positionItems();\n        this._updateScrollerSize();\n      }\n    );\n  }\n\n  _resizeHandler() {\n    this._updateDetailsCellHeights();\n    this._accessIronListAPI(super._resizeHandler, true);\n    this._updateScrollerMeasurements();\n    this._updateHeaderFooterMetrics();\n  }\n\n  _updateHeaderFooterMetrics() {\n    const headerHeight = this.$.header.clientHeight + 'px';\n    const footerHeight = this.$.footer.clientHeight + 'px';\n    [this.$.outersizer, this.$.fixedsizer, this.$.items].forEach(element => {\n      element.style.borderTopWidth = headerHeight;\n      element.style.borderBottomWidth = footerHeight;\n    });\n\n    afterNextRender(this.$.header, () => {\n      if (this._pendingScrollToIndex) {\n        this._scrollToIndex(this._pendingScrollToIndex);\n      }\n    });\n  }\n\n  _onAnimationEnd(e) {\n    // ShadyCSS applies scoping suffixes to animation names\n    if (e.animationName.indexOf('vaadin-grid-appear') === 0) {\n      this._render();\n      this._updateHeaderFooterMetrics();\n      e.stopPropagation();\n      this.notifyResize();\n      this.__itemsReceived();\n    }\n  }\n\n  _toggleAttribute(name, bool, node) {\n    if (node.hasAttribute(name) === !bool) {\n      if (bool) {\n        node.setAttribute(name, '');\n      } else {\n        node.removeAttribute(name);\n      }\n    }\n  }\n\n  __getRowModel(row) {\n    return {\n      index: row.index,\n      item: row._item,\n      level: this._getIndexLevel(row.index),\n      expanded: this._isExpanded(row._item),\n      selected: this._isSelected(row._item),\n      detailsOpened:\n        !!(this._rowDetailsTemplate || this.rowDetailsRenderer) && this._isDetailsOpened(row._item)\n    };\n  }\n\n  /**\n   * Manually invoke existing renderers for all the columns\n   * (header, footer and body cells) and opened row details.\n   */\n  render() {\n    if (this._columnTree) {\n      // header and footer renderers\n      this._columnTree.forEach(level => {\n        level.forEach(column => column._renderHeaderAndFooter());\n      });\n\n      // body and row details renderers\n      this._update();\n    }\n  }\n\n  /**\n   * Updates the computed metrics and positioning of internal grid parts\n   * (row/details cell positioning etc). Needs to be invoked whenever the sizing of grid\n   * content changes asynchronously to ensure consistent appearance (e.g. when a\n   * contained image whose bounds aren't known beforehand finishes loading).\n   */\n  notifyResize() {\n    super.notifyResize();\n  }\n\n  _heightByRowsChanged(value, oldValue) {\n    if (value || oldValue) {\n      this.notifyResize();\n    }\n  }\n\n  __forceReflow() {\n    this._debouncerForceReflow = Debouncer.debounce(this._debouncerForceReflow,\n      animationFrame, () => {\n        this.$.scroller.style.overflow = 'hidden';\n        setTimeout(() => this.$.scroller.style.overflow = '');\n      }\n    );\n  }\n}\n\ncustomElements.define(GridElement.is, GridElement);\nexport { GridElement };\n"],"sourceRoot":""}