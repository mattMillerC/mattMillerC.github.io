{"version":3,"sources":["webpack:///./lib/droll.js","webpack:///./js/dice.js","webpack:///./components/dnd-dice.js","webpack:///./components/views/dnd-dice-view.js"],"names":["droll","DrollFormula","this","numDice","numSides","modifier","minResult","maxResult","avgResult","DrollResult","rolls","total","prototype","toString","length","join","Math","abs","parse","i","t","l","match","validate","roll","o","floor","random","r","onLoad","rootEl","outputEl","querySelector","historyIndex","diceField","useNativeValidation","outputRollResult","rollResult","replace","newOutput","style","display","addRollHandler","innerHTML","value","classList","add","addEventListener","e","preventDefault","remove","focus","keyCode","which","historyCount","querySelectorAll","getAttribute","click","keyData","originalEvent","data","target","closest","super","connectedCallback","shadowRoot","customElements","define"],"mappings":"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","file":"12.bundle.js","sourcesContent":["/*! droll v0.2.1  http://github.com/thebinarypenguin/droll */\r\nvar droll={};function DrollFormula(){this.numDice=0,this.numSides=0,this.modifier=0,this.minResult=0,this.maxResult=0,this.avgResult=0}function DrollResult(){this.rolls=[],this.modifier=0,this.total=0}DrollResult.prototype.toString=function(){return 1===this.rolls.length&&0===this.modifier?this.rolls[0]+\"\":1<this.rolls.length&&0===this.modifier?this.rolls.join(\" + \")+\" = \"+this.total:1===this.rolls.length&&0<this.modifier?this.rolls[0]+\" + \"+this.modifier+\" = \"+this.total:1<this.rolls.length&&0<this.modifier?this.rolls.join(\" + \")+\" + \"+this.modifier+\" = \"+this.total:1===this.rolls.length&&this.modifier<0?this.rolls[0]+\" - \"+Math.abs(this.modifier)+\" = \"+this.total:1<this.rolls.length&&this.modifier<0?this.rolls.join(\" + \")+\" - \"+Math.abs(this.modifier)+\" = \"+this.total:void 0},droll.parse=function(i){var t,l=new DrollFormula;return!!(t=i.match(/^([1-9]\\d*)?d([1-9]\\d*)([+-]\\d+)?$/i))&&(l.numDice=+t[1]||1,l.numSides=+t[2],l.modifier=+t[3]||0,l.minResult=+l.numDice+l.modifier,l.maxResult=l.numDice*l.numSides+l.modifier,l.avgResult=(l.maxResult+l.minResult)/2,l)},droll.validate=function(i){return!!droll.parse(i)},droll.roll=function(i){var t,l=new DrollResult;if(!(t=droll.parse(i)))return!1;for(var o=0;o<t.numDice;o++)l.rolls[o]=1+Math.floor(Math.random()*t.numSides);l.modifier=t.modifier;for(var r=0;r<l.rolls.length;r++)l.total+=l.rolls[r];return l.total+=l.modifier,l};\r\nexport default droll;","import { parseHTML, jqPrepend } from './utils.js';\nimport { MDCTextField } from \"@material/textfield\";\nimport { MDCNotchedOutline } from \"@material/notched-outline\";\nimport droll from \"../lib/droll.js\";\n\nfunction onLoad(rootEl) {\n  let outputEl = rootEl.querySelector(\"div#output\");\n  let total = 0,\n  historyIndex = -1;\n  \n  let diceField = new MDCTextField(rootEl.querySelector(\".mdc-text-field\"));\n  new MDCNotchedOutline(rootEl.querySelector(\".mdc-notched-outline\"));\n  \n  diceField.useNativeValidation = false;\n  \n  let outputRollResult = (roll) => {\n    let rollResult = droll.roll(roll.replace(/\\s/g, \"\"));\n    if (rollResult) {\n      let newOutput = parseHTML(`<div>\n        <em><a class='roll' data-roll='${roll}'>${roll}</a></em> rolled for <strong>${rollResult.total}</strong>${rollResult.rolls.length > 1 ? `<br>(${rollResult.rolls.join(\", \")})` : ''}\n        </div>`)\n      \n      jqPrepend(outputEl, newOutput);\n      outputEl.style.display = null;\n      addRollHandler(newOutput);\n\n      total += rollResult.total;\n      rootEl.querySelector('#total').innerHTML = total;\n      rootEl.querySelector(\".roll-total-wrap\").style.display = null;\n      rootEl.querySelector(\".roll-clear\").style.display = null;\n      diceField.value = \"\";\n    } else {\n      rootEl.querySelector(\".dice-field-container .mdc-text-field\").classList.add(\"error\");\n    }\n  };\n  \n  rootEl.querySelector(\".roll-clear\").addEventListener(\"click\", e => {\n    e.preventDefault();\n    \n    historyIndex = -1;\n    outputEl.innerHTML = '';\n    rootEl.querySelector(\".roll-total-wrap\").style.display = 'none';\n    rootEl.querySelector(\".roll-clear\").style.display = \"none\";\n    total = 0;\n  });\n  \n  rootEl.querySelector(\".roll-submit\").addEventListener(\"click\", e => {\n    e.preventDefault();\n    \n    historyIndex = -1;\n    rootEl.querySelector(\".dice-field-container .mdc-text-field\").classList.remove(\"error\");\n    let roll = rootEl.querySelector(\".roll-field\").value;\n    if (roll) {\n      outputRollResult(roll);\n    } else {\n      rootEl.querySelector(\".dice-field-container .mdc-text-field\").classList.add(\"error\");\n    }\n    rootEl.querySelector(\".roll-field\").focus();\n  });\n  \n  rootEl.querySelector(\".roll-field\").addEventListener(\"keydown\", e => {\n    let keyCode = e.keyCode || e.which,\n    historyCount = rootEl.querySelectorAll(\"#output > div\").length;\n    \n    // up\n    if (keyCode === 38) {\n      e.preventDefault();\n      if (historyIndex + 1 < historyCount) {\n        historyIndex++;\n        diceField.value = rootEl.querySelector(`#output div:eq(${historyIndex}) a.roll`).getAttribute(\"data-roll\");\n      }\n      \n      // down\n    } else if (keyCode === 40) {\n      e.preventDefault();\n      if (historyIndex - 1 > -1) {\n        historyIndex--;\n        diceField.value = rootEl.querySelector(`#output div:eq(${historyIndex}) a.roll`).getAttribute(\"data-roll\");\n      }\n      \n      // enter\n    } else if (keyCode === 13) {\n      e.preventDefault();\n      rootEl.querySelector(\".roll-submit\").click();\n      \n      // comma or period\n    } else if (keyCode === 190 || keyCode === 188) {\n      e.preventDefault();\n      diceField.value = diceField.value + \"d\";\n    } else if (keyCode === 32 || keyCode === 189 || keyCode === 187) {\n      e.preventDefault();\n      diceField.value = diceField.value + \" + \";\n    }\n  });\n  rootEl.querySelector(\".roll-field\").addEventListener(\"submit\", e => {\n    e.preventDefault();\n    rootEl.querySelector(\".roll-submit\").click();\n  })\n  rootEl.querySelector(\".roll-field\").addEventListener(\"textInput\", e => {\n    var keyData = e.originalEvent.data;\n    if (keyData && (keyData === \".\" || keyData === \",\")) {\n      e.preventDefault();\n      diceField.value = diceField.value + \"d\";\n    } else if (keyData && (keyData === \" \" || keyData === \"+\")) {\n      e.preventDefault();\n      diceField.value = diceField.value + \"+\";\n    }\n  });\n  rootEl.querySelector(\".roll-field\").addEventListener(\"focus\", e => {\n    rootEl.querySelector(\".dice-field-label\").style.display = null;\n  });\n  rootEl.querySelector(\".roll-field\").addEventListener(\"blur\", e => {\n    rootEl.querySelector(\".dice-field-label\").style.display = 'none';\n  });\n\n  let rolls = rootEl.querySelectorAll(\".roll[data-roll]\");\n  for (let roll of rolls) {\n    addRollHandler(roll);\n  }\n  \n  function addRollHandler(roll) {\n    roll.addEventListener(\"click\", e => {\n      e.preventDefault();\n\n      let roll = e.target.closest(\".roll\").getAttribute(\"data-roll\");\n      if (roll) {\n        outputRollResult(roll);\n      }\n    });\n  }\n};\n\nexport { onLoad };","import {PolymerElement, html} from '@polymer/polymer';\nimport \"./styles/material-styles.js\";\nimport \"./styles/my-styles.js\";\nimport \"./dnd-svg.js\";\nimport { onLoad } from '../js/dice.js';\n\nclass DndDice extends PolymerElement {\n  connectedCallback() {\n    super.connectedCallback();\n    onLoad(this.shadowRoot);\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n\n      <div class=\"dice-wrapper\">\n        <div class=\"dice-field-container\">\n          <div class=\"mdc-text-field mdc-text-field--outlined mdc-text-field--with-leading-icon\">\n            <i class=\"material-icons mdc-text-field__icon mdc-theme--primary\">casino</i>\n            <input inputmode=\"numeric\" type=\"tel\" class=\"mdc-text-field__input roll-field\" />\n            <div class=\"mdc-notched-outline\">\n              <div class=\"mdc-notched-outline__leading\"></div>\n              <div class=\"mdc-notched-outline__notch\">\n                <label for=\"search-field\" class=\"mdc-floating-label\">Roll</label>\n              </div>\n              <div class=\"mdc-notched-outline__trailing\"></div>\n            </div>\n          </div>\n          <span class=\"dice-field-label\"\n            >Use period (.) or comma (,) to insert a \"d\".<br />Use space to insert a plus (+).</span\n          >\n          <button class=\"mdc-button mdc-button--raised roll-submit\">\n            <span class=\"mdc-button__label\">Roll!</span>\n          </button>\n          <button class=\"mdc-button mdc-button--raised roll-clear\" style=\"display: none;\">\n            <span class=\"mdc-button__label\">Clear</span>\n          </button>\n\n          <div class=\"roll-total-wrap\" style=\"display: none;\">Total: <span id=\"total\"></span></div>\n          <div id=\"output\"></div>\n        </div>\n\n        <div class=\"dice-list-container\">\n          <div class=\"dice-grid-item roll\" data-roll=\"1d4\">\n            <dnd-svg id=\"d4\" class=\"dice-grid-item--image\"></dnd-svg>\n          </div>\n          <div class=\"dice-grid-item roll\" data-roll=\"1d6\">\n            <dnd-svg id=\"d6\" class=\"dice-grid-item--image\"></dnd-svg>\n          </div>\n          <div class=\"dice-grid-item roll\" data-roll=\"1d8\">\n            <dnd-svg id=\"d8\" class=\"dice-grid-item--image\"></dnd-svg>\n          </div>\n          <div class=\"dice-grid-item roll\" data-roll=\"1d10\">\n            <dnd-svg id=\"d10\" class=\"dice-grid-item--image\"></dnd-svg>\n          </div>\n          <div class=\"dice-grid-item roll\" data-roll=\"1d12\">\n            <dnd-svg id=\"d12\" class=\"dice-grid-item--image\"></dnd-svg>\n          </div>\n          <div class=\"dice-grid-item roll\" data-roll=\"1d20\">\n            <dnd-svg id=\"d20\" class=\"dice-grid-item--image\"></dnd-svg>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('dnd-dice', DndDice);","import {PolymerElement, html} from '@polymer/polymer';\nimport '../styles/material-styles.js';\nimport '../styles/my-styles.js';\nimport '../dnd-dice';\n\nclass DndDiceView extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"material-styles my-styles\"></style>\n\n      <dnd-dice></dnd-dice>\n    `;\n  }\n}\n\ncustomElements.define('dnd-dice-view', DndDiceView);"],"sourceRoot":""}