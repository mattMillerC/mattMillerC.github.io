(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{104:function(e,t,s){"use strict";var r=s(2),n=s(0),a=s(5);function i(){this.wrapperTag="div",this.baseUrl="",this.setWrapperTag=function(e){this.wrapperTag=e},this.setBaseUrl=function(e){this.baseUrl=e},this.recursiveEntryRender=function(e,t,s,l,c,h){if(s=null==s?"section"===e.type?-1:0:s,l=null==l?null:l,c=null==c?null:c,(h=null!=h&&h)&&o(),"object"==typeof e){switch(void 0===e.type||"section"===e.type?"entries":e.type){case"entries":p(this,!0);break;case"options":!function(t){e.entries&&(e.entries=e.entries.sort((e,t)=>e.name&&t.name?Object(r.ascSort)(e.name,t.name):e.name?-1:t.name?1:0),p(t,!1))}(this);break;case"list":if(e.items){t.push(`<ul ${e.style?`class="${e.style}"`:""}>`);for(let a=0;a<e.items.length;a++)this.recursiveEntryRender(e.items[a],t,s+1,`<li ${Object(r.isNonstandardSource)(e.items[a].source)?`class="${n.i}"`:""}>`,"</li>");t.push("</ul>")}break;case"table":!function(r){t.push("<table class='table'>"),void 0!==e.caption&&t.push(`<caption>${e.caption}</caption>`);if(t.push("<thead>"),t.push("<tr class='table-row table-row--header'>"),e.colLabels)for(let s=0;s<e.colLabels.length;++s)t.push(`<th ${n(s)}>${e.colLabels[s]}</th>`);t.push("</tr>"),t.push("</thead>"),t.push("<tbody>");for(let n=0;n<e.rows.length;++n){t.push("<tr class='table-row'>");for(let i=0;i<e.rows[n].length;++i)t.push(`<td ${a(i)}>`),r.recursiveEntryRender(e.rows[n][i],t,s+1),t.push("</td>");t.push("</tr>")}function n(t){return void 0===e.colStyles||t>=e.colStyles.length?"class='table-cell'":`class="table-cell ${e.colStyles[t]}"`}function a(t){return void 0!==e.rowStyles?void 0===e.rowStyles||t>=e.rowStyles.length?"class='table-cell'":`class="table-cell ${e.rowStyles[t]}"`:n(t)}t.push("</tbody>"),t.push("</table>")}(this);break;case"invocation":!function(e){p(e,!0)}(this);break;case"patron":!function(e){p(e,!1)}(this);break;case"abilityDc":o(),t.push(`<span class='spell-ability'><span>${e.name} save DC</span> = 8 + your proficiency bonus + your ${Object(r.utils_makeAttChoose)(e.attributes)}</span>`),u();break;case"abilityAttackMod":null!==l&&t.push(l),t.push(`<span class='spell-ability'><span>${e.name} attack modifier</span> = your proficiency bonus + your ${Object(r.utils_makeAttChoose)(e.attributes)}</span>`),null!==c&&t.push(c);break;case"inline":if(e.entries)for(let r=0;r<e.entries.length;r++)this.recursiveEntryRender(e.entries[r],t,s);break;case"bonus":t.push((e.value<0?"":"+")+e.value);break;case"bonusSpeed":t.push((e.value<0?"":"+")+e.value+"ft.");break;case"dice":t.push(i.getEntryDice(e));break;case"link":!function(e,s){let n;if("internal"===s.href.type){if(n=`${e.baseUrl}${s.href.path}#`,void 0!==s.href.hash&&(n+=s.href.hash,void 0!==s.href.subhashes))for(let e=0;e<s.href.subhashes.length;e++){const t=s.href.subhashes[e];n+=`,${Object(r.encodeForHash)(t.key)}:${Object(r.encodeForHash)(t.value)}`}}else"external"===s.href.type&&(n=s.href.url);t.push(`<a href='${n}'>${s.text}</a>`)}(this,e);break;case"item":t.push(`<li><b>${e.name}: </b>`),this.recursiveEntryRender(e.entry,t,s),t.push("</li>");break;case"print":t.push(d(e.entry))}}else"string"==typeof e?(o(),d(this),u()):(o(),t.push(e),u());function o(){null!==l&&t.push(l)}function u(){null!==c&&t.push(c)}function p(l,c){const h=s>=2,o=c?s+1:s,u=function(){const t=[];Object(r.isNonstandardSource)(e.source)&&t.push(n.i);h&&void 0!==e.name?t.push(i.HEAD_2):t.push(-1===s?i.HEAD_NEG_1:0===s?i.HEAD_0:i.HEAD_1);"invocation"!==e.type&&"patron"!==e.type||void 0===e.subclass||t.push(n.j);return t.length>0?`class="${t.join(" ")}"`:""}(),p=function(){let t="";if("invocation"===e.type||"patron"===e.type){const s=e.source?`title="Source: ${a.a.sourceJsonToFull(e.source)}"`:"";t=void 0!==e.subclass?`${n.f}="${e.subclass.name}" ${n.g}="${e.subclass.source}" ${s}`:`${n.f}="${i.DATA_NONE}" ${n.g}="${i.DATA_NONE}" ${s}`}return t}(),d=e.prerequisite?`<span class="prerequisite">Prerequisite: ${e.prerequisite}</span>`:"",b=void 0!==e.name?`<span class="stat-name">${e.name}${Object(r.isNonstandardSource)(e.source)?" (UA)":""}${h?".":""}</span> `:"";if(e.entries||e.name){if(t.push(`<${l.wrapperTag} ${p} ${u}>${b}${d}`),e.entries)for(let s=0;s<e.entries.length;s++)l.recursiveEntryRender(e.entries[s],t,o,"<p>","</p>");t.push(`</${l.wrapperTag}>`)}}function d(l){const c=function(){let t,s,r=0,n=!1;const a=[];let i="";for(let l=0;l<e.length;++l)switch(t=e.charAt(l),s=l<e.length-1?e.charAt(l+1):null,t){case"{":"@"===s?r++>0?i+=t:(a.push(i),n=!1,i=""):i+=t;break;case"}":0==--r?(a.push(i),i=""):i+=t;break;default:i+=t}i.length>0&&a.push(i);return a}();for(let e=0;e<c.length;e++){const o=c[e];if(null!=o&&""!==o)if("@"===o.charAt(0)){const[e,c]=[(h=o).substr(0,h.indexOf(" ")),h.substr(h.indexOf(" ")+1)];if("@bold"===e||"@b"===e||"@italic"===e||"@i"===e||"@skill"===e||"@action"===e)switch(e){case"@b":case"@bold":t.push("<b>"),l.recursiveEntryRender(c,t,s),t.push("</b>");break;case"@i":case"@italic":t.push("<i>"),l.recursiveEntryRender(c,t,s),t.push("</i>");break;case"@action":t.push(`<span title="${a.a.actionToExplanation(c)}" class="explanation">${c}</span>`);break;case"@skill":t.push(`<span title="${a.a.skillToExplanation(c)}" class="explanation">${c}</span>`)}else{const[a,h,o,...u]=c.split("|"),p=`${a}${h?`${n.n}${h}`:""}`,d={type:"link",href:{type:"internal",path:"",hash:Object(r.encodeForHash)(p)},text:o||a};switch(e){case"@spell":h||(d.href.hash+=n.n+n.hb),d.href.hash="/spells/"+d.href.hash,l.recursiveEntryRender(d,t,s);break;case"@item":h||(d.href.hash+=n.n+n.T),d.href.hash="/items/"+d.href.hash,l.recursiveEntryRender(d,t,s);break;case"@condition":h||(d.href.hash+=n.n+n.hb),d.href.hash="/conditions/"+d.href.hash,l.recursiveEntryRender(d,t,s);break;case"@class":const e=i.RE_INLINE_CLASS.exec(c);e&&(d.href.hash=e[1].trim(),d.href.subhashes=[{key:"sub",value:e[2].trim()+"~phb"}]),h||(d.href.hash+=n.n+n.hb),d.href.hash="/classes/"+d.href.hash,l.recursiveEntryRender(d,t,s);break;case"@creature":h||(d.href.hash+=n.n+n.cb),d.href.hash="/bestiary/"+d.href.hash,l.recursiveEntryRender(d,t,s);break;case"@filter":t.push(a);break;case"@damage":case"@dice":case"@book":t.push(a);break;case"@5etools":h.indexOf(".")>-1?d.href.hash="/"+h.substring(0,h.indexOf(".")):d.href.hash="/"+h,l.recursiveEntryRender(d,t,s)}}}else t.push(o)}var h}h&&u()}}i.getEntryDice=function(e){let t;if(e.number&&e.faces)t=String(e.number)+"d"+e.faces;else if(e.toRoll&&e.toRoll.length){for(let s of e.toRoll)t=String(s.number)+"d"+s.faces+" + ";t=t.substring(0,t.length-3)}return"undefined"!=typeof droll&&!0===e.rollable?`<span class='roller unselectable' onclick="if (this.rolled) { this.innerHTML = this.innerHTML.split('=')[0].trim()+' = '+droll.roll('${t}').total; } else { this.rolled = true; this.innerHTML += ' = '+droll.roll('${t}').total; }">${t}</span>`:t},i.RE_INLINE_CLASS=/(.*?) \((.*?)\)/,i.HEAD_NEG_1="statsBlockSectionHead",i.HEAD_0="statsBlockHead",i.HEAD_1="statsBlockSubHead",i.HEAD_2="statsInlineHead",i.DATA_NONE="data-none",t.a=i},113:function(e,t,s){"use strict";s.r(t);var r=s(7),n=s(18),a=s(104),i=s(2);class l extends r.a{static get properties(){return{classEquipment:{type:String}}}constructor(){super(),this.renderer=new a.a}connectedCallback(){super.connectedCallback(),this.characterChangeHandler=e=>{let t=e.detail.character;this.updateFromCharacter(t)},this.updateFromCharacter(Object(n.p)()),Object(n.h)().addEventListener("character-selected",this.characterChangeHandler)}disconnectedCallback(){super.disconnectedCallback(),Object(n.h)().removeEventListener("character-selected",this.characterChangeHandler)}async updateFromCharacter(e){if(e){let t;if(e.levels&&e.levels.length>0){t=(await Object(n.i)())[e.levels[0].name],this.$.classEquipment.innerHTML=this.parseClassEquipment(t.startingEquipment)}else this.$.classEquipment.innerHTML="";if(!t||t.startingEquipment.additionalFromBackground){const e=await Object(n.e)();this.$.backgroundEquipment.innerHTML=e?this.parseBackgroundEquipment(e.entries):""}else this.$.backgroundEquipment.innerHTML=""}else this.$.backgroundEquipment.innerHTML="",this.$.classEquipment.innerHTML=""}parseClassEquipment(e){if(e){return`${e.additionalFromBackground?"<p>You start with the following items, plus anything provided by your background.</p>":""}${0===e.default.length?"":`<ul><li>${e.default.map(e=>this.renderStr(e)).join("</li><li>")}</ul>`}${void 0===e.goldAlternative?"":`<p>Alternatively, you may start with ${this.renderStr(e.goldAlternative)} gp to buy your own equipment.</p>`}`}}parseBackgroundEquipment(e){if(e){const t=Object(i.entrySearch)("Equipment",e);return`<p>${this.renderStr(t.entry)}</p>`}}renderStr(e){let t=[];return this.renderer.recursiveEntryRender(e,t,0),t.join(" ")}static get template(){return r.b`
      <style>
        :host {
          display: block;
          padding: 14px;
        }
        [hidden] {
          display: none !important;
        }
        a {
          color: var(--mdc-theme-secondary);
        }
      </style>

      <div>
        <h2>Class</h2>
        <div id="classEquipment"></div>
        <h2>Background</h2>
        <div id="backgroundEquipment"></div>
      </div>
    `}}customElements.define("dnd-character-builder-equipment",l)}}]);
//# sourceMappingURL=5.bundle.js.map