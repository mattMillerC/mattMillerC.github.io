{"version":3,"sources":["webpack:///./components/dnd-select-add.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-number-field-styles.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-number-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-integer-field.js","webpack:///./components/views/character/dnd-character-builder-attributes.js"],"names":["DndSelectAdd","test","type","Boolean","reflectToAttribute","value","options","Array","observer","model","String","addCallback","Function","choices","Number","label","placeholder","multiValue","this","listBox","remove","$","select","render","choiceArray","map","v","indexOf","filter","selectedValues","join","findIndex","i","name","super","ready","setTimeout","async","renderer","root","document","createElement","setAttribute","addEventListener","e","opened","wasPreviouslySelected","srcElement","getAttribute","length","splice","selectedOptions","o","option","item","textContent","appendChild","_assignMenuElement","valueUpdated","connectedCallback","selectChangeHandler","val","selected","undefined","disconnectedCallback","removeEventListener","a","customElements","define","$_documentContainer","head","content","memoizedTemplate","innerHTML","hasControls","min","max","step","__previousValidInput","inputElement","__onInputChange","bind","preventDefault","_decreaseValue","_increaseValue","template","cloneNode","thisTemplate","import","is","decreaseButton","querySelector","increaseButton","styles","inputField","prefixSlot","insertBefore","_createMethodObserver","required","minlength","maxlength","pattern","invalid","isNumUnset","n","_constraintsChanged","validate","_incrementValue","incr","disabled","readonly","parseFloat","_getIncrement","newValue","_incrementIsInsideTheLimits","_setValue","dispatchEvent","CustomEvent","bubbles","currentValue","multiplier","Math","_getMultiplier","margin","round","number","s","isNaN","pow","_getDecimalCount","sign","__validateByStep","__stepChangedCalled","newVal","oldVal","_valueChanged","keyCode","_onKeyDown","checkValidity","window","preventInvalidInput","_enabledCharPattern","__isInteger","console","warn","__hasOnlyDigits","_stepChanged","str","dex","con","int","wis","cha","strAdj","dexAdj","conAdj","intAdj","wisAdj","chaAdj","saves","classSkillProfOptions","Object","backgroundSkillProfOptions","defaultBackgroundSkillProf","raceAttributeOptions","defaultRaceAttribute","strProfs","dexProfs","intProfs","wisProfs","chaProfs","characterChangeHandler","character","detail","updateAttributesFromCharacter","attr","setProperties","classSkillProfSelections","classSkillProficiencies","attributeAdj","raceAttributes","choose","from","toUpperCase","raceAttributeChoices","count","raceAttributeSelections","forEach","toLowerCase","attribute","mod","asiData","asi","featSelections","featAttribute","entries","asiAttributes","adj","b","intA","parseInt","intB","base","floor","_total","arg","arguments","constructor","isArray","skills"],"mappings":"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","file":"4.bundle.js","sourcesContent":["import { PolymerElement, html } from '@polymer/polymer';\nimport { mergeFeature } from '../util/charBuilder';\nimport { jqEmpty, util_capitalizeAll } from \"../js/utils\";\nimport \"@vaadin/vaadin-select\";\nimport loadModel from \"../util/data\";\n\nclass DndSelectAdd extends PolymerElement {\n  static get properties() {\n    return {\n      test: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: false\n      },\n      options: {\n        type: Array,\n        observer: \"optionsUpdated\"\n      },\n      model: {\n        type: String\n      },\n      addCallback: {\n        type: Function\n      },\n      value: {\n        type: String,\n        value: \"\",\n        observer: \"valueUpdated\"\n      },\n      choices: {\n        type: Number,\n        observer: \"choicesUpdated\"\n      },\n      label: {\n        type: String\n      },\n      placeholder: {\n        type: String,\n      },\n      multiValue: {\n        type: String,\n        value: \"\"\n      }\n    }\n  }\n\n  choicesUpdated() {\n    if (this.listBox) {\n      this.listBox.remove();\n      delete this.listBox;\n    }\n    this.$.select.render();\n  }\n\n  optionsUpdated() {\n    if (this.listBox) {\n      this.listBox.remove();\n      delete this.listBox;\n    }\n    this.$.select.render();\n  }\n\n  valueUpdated() {\n    if (this.choices) {\n      if (this.value && this.options) {\n        const choiceArray = this.value.map(v => { return this.options.indexOf(v) }).filter(v => { return v !== -1 });\n        if (this.listBox) {\n          this.listBox.selectedValues = choiceArray;\n        }\n        this.multiValue = choiceArray.map(v => { return util_capitalizeAll(this.options[v]) }).join(\", \");\n      } else {\n        if (this.listBox) {\n          this.listBox.selectedValues = [];\n        }\n        this.multiValue = \"\";\n      }\n    } else {\n      if (this.value && this.options) {\n        this.$.select.value = this.options.findIndex(i => { return i.name === this.value || i === this.value}) + \"\";\n      } else {\n        this.$.select.value = \"\";\n      }\n    }\n  }\n\n  ready() {\n    super.ready();\n\n    setTimeout(async () => {\n      if (this.model) {\n        this.options = await loadModel(this.model);\n      }\n\n      this.$.select.renderer = (root, select) => {\n        if (!this.listBox) {\n          this.listBox = document.createElement('vaadin-list-box');\n\n          // setting up for multi-select\n          if (this.choices) {\n            this.listBox.setAttribute(\"multiple\", true);\n\n            this.listBox.addEventListener(\"click\", (e) => {\n              select.opened = true;\n              let wasPreviouslySelected = e.srcElement.getAttribute(\"selected\") !== null\n              setTimeout(() => {\n                if (this.listBox.selectedValues.length > this.choices\n                    && !wasPreviouslySelected) {\n                  this.listBox.selectedValues.splice(this.listBox.selectedValues.length - 2, 1)\n                }\n                let selectedOptions = this.listBox.selectedValues.map(v => { return this.options[v] });\n                this.multiValue = selectedOptions.map(o => { return util_capitalizeAll(o) }).join(', ');\n                if (this.addCallback) {\n                  this.addCallback(selectedOptions);\n                }\n              }, 0);\n            });\n\n          }\n\n          // Adding options\n          if (this.options && this.options.length) {\n            for (let i = 0; i < this.options.length; i ++) {\n              const option = this.options[i],\n                item = document.createElement('vaadin-item');\n              if (option.name) {\n                item.textContent = option.name;\n                item.setAttribute(\"value\", i);\n              } else {\n                item.textContent = util_capitalizeAll(option);\n                item.setAttribute(\"value\", i);\n              }\n              this.listBox.appendChild(item);\n            }\n          }\n          root.appendChild(this.listBox);\n          this.$.select._assignMenuElement();\n\n          this.valueUpdated();\n        }\n      };\n    }, 0);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.selectChangeHandler = () => {\n      const val = this.$.select.value;\n      if (val) {\n        if (!this.choices) {\n          const selected = this.options[val];\n          if (this.addCallback) {\n            this.addCallback(selected, this.model);\n          } else {\n            mergeFeature(undefined, selected, this.model);\n          }\n          if (!this.value) {\n            this.$.select.value = \"\";\n          }\n        }\n      }\n    };\n\n    this.$.select.addEventListener(\"change\", this.selectChangeHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.$.select.removeEventListener(\"change\", this.selectChangeHandler);\n  }\n\n  _exists(a) {\n    return !!a;\n  }\n  \n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: inline-block;\n        }\n        [slot=\"prefix\"] {\n          width: calc(100% - 46px);\n          padding: 12px;\n          line-height: 1.4;\n        }\n        vaadin-select {\n          width: 100%;\n        }\n      </style>\n      <vaadin-select test$=\"[[test]]\" theme=\"dark\" add id=\"select\" label=\"[[label]]\" placeholder=\"[[placeholder]]\">\n        <div hidden$=\"[[!_exists(multiValue)]]\" slot=\"prefix\">\n          [[multiValue]]\n        </div>\n      </vaadin-select>\n    `;\n  }\n}\ncustomElements.define('dnd-select-add', DndSelectAdd);","import '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-number-field\" theme-for=\"vaadin-number-field\">\n  <template>\n    <style include=\"lumo-field-button\">\n      :host {\n        width: 8em;\n      }\n\n      :host([has-controls]:not([theme~=\"align-right\"])) [part=\"value\"] {\n        text-align: center;\n      }\n\n      [part=\"decrease-button\"][disabled],\n      [part=\"increase-button\"][disabled] {\n        opacity: 0.2;\n      }\n\n      :host([has-controls]) [part=\"input-field\"] {\n        padding: 0;\n      }\n\n      [part=\"decrease-button\"],\n      [part=\"increase-button\"] {\n        cursor: pointer;\n        font-size: var(--lumo-icon-size-s);\n        width: 1.6em;\n        height: 1.6em;\n      }\n\n      [part=\"decrease-button\"]::before,\n      [part=\"increase-button\"]::before {\n        margin-top: 0.2em;\n      }\n\n      /* RTL specific styles */\n\n      :host([dir=\"rtl\"]) [part=\"value\"],\n      :host([dir=\"rtl\"]) [part=\"input-field\"] ::slotted(input) {\n        --_lumo-text-field-overflow-mask-image: linear-gradient(to left, transparent, #000 1.25em);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport { TextFieldElement } from './vaadin-text-field.js';\nimport { DomModule } from '@polymer/polymer/lib/elements/dom-module.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-number-field-template\">\n  <template>\n    <style>\n      :host([readonly]) [part\\$=\"button\"] {\n        pointer-events: none;\n      }\n\n      [part=\"decrease-button\"]::before {\n        content: \"−\";\n      }\n\n      [part=\"increase-button\"]::before {\n        content: \"+\";\n      }\n\n      [part=\"decrease-button\"],\n      [part=\"increase-button\"] {\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n      }\n\n      /* Hide the native arrow icons */\n      [part=\"value\"]::-webkit-outer-spin-button,\n      [part=\"value\"]::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n\n      [part=\"value\"] {\n        /* Older Firefox versions (v47.0) requires !important */\n        -moz-appearance: textfield !important;\n      }\n\n      :host([dir=\"rtl\"]) [part=\"input-field\"] {\n        direction: ltr;\n      }\n\n      :host([dir=\"rtl\"]) [part=\"value\"]::placeholder {\n        direction: rtl;\n      }\n\n      :host([dir=\"rtl\"]) [part=\"input-field\"] ::slotted(input)::placeholder {\n        direction: rtl;\n      }\n\n      :host([dir=\"rtl\"]) [part=\"value\"]:-ms-input-placeholder,\n      :host([dir=\"rtl\"]) [part=\"input-field\"] ::slotted(input):-ms-input-placeholder {\n        direction: rtl;\n      }\n\n      :host([dir=\"rtl\"]:not([has-controls])) [part=\"value\"]::placeholder {\n        text-align: left;\n      }\n\n      :host([dir=\"rtl\"]:not([has-controls])) [part=\"input-field\"] ::slotted(input)::placeholder {\n        text-align: left;\n      }\n\n      :host([dir=\"rtl\"]:not([has-controls])) [part=\"value\"]:-ms-input-placeholder,\n      :host([dir=\"rtl\"]:not([has-controls])) [part=\"input-field\"] ::slotted(input):-ms-input-placeholder {\n        text-align: left;\n      }\n    </style>\n\n    <div disabled\\$=\"[[!_allowed(-1, value, min, max, step)]]\" part=\"decrease-button\" on-click=\"_decreaseValue\" on-touchend=\"_decreaseButtonTouchend\" hidden\\$=\"[[!hasControls]]\">\n    </div>\n\n    <div disabled\\$=\"[[!_allowed(1, value, min, max, step)]]\" part=\"increase-button\" on-click=\"_increaseValue\" on-touchend=\"_increaseButtonTouchend\" hidden\\$=\"[[!hasControls]]\">\n    </div>\n  </template>\n\n  \n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\nlet memoizedTemplate;\n\n/**\n* `<vaadin-number-field>` is a Web Component for number field control in forms.\n*\n* ```html\n* <vaadin-number-field label=\"Number\">\n* </vaadin-number-field>\n* ```\n*\n* @extends PolymerElement\n* @demo demo/index.html\n*/\nclass NumberFieldElement extends TextFieldElement {\n  static get is() {\n    return 'vaadin-number-field';\n  }\n\n  static get version() {\n    return '2.6.2';\n  }\n\n  static get properties() {\n    return {\n      /**\n      * Set to true to display value increase/decrease controls.\n      */\n      hasControls: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n      * The minimum value of the field.\n      */\n      min: {\n        type: Number,\n        reflectToAttribute: true,\n        observer: '_minChanged'\n      },\n\n      /**\n       * The maximum value of the field.\n       */\n      max: {\n        type: Number,\n        reflectToAttribute: true,\n        observer: '_maxChanged'\n      },\n\n      /**\n       * Specifies the allowed number intervals of the field.\n       */\n      step: {\n        type: Number,\n        value: 1,\n        observer: '_stepChanged'\n      }\n\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.__previousValidInput = this.value || '';\n    this.inputElement.type = 'number';\n    this.inputElement.addEventListener('change', this.__onInputChange.bind(this));\n  }\n\n  _decreaseButtonTouchend(e) {\n    // Cancel the following click and focus events\n    e.preventDefault();\n    this._decreaseValue();\n  }\n\n  _increaseButtonTouchend(e) {\n    // Cancel the following click and focus events\n    e.preventDefault();\n    this._increaseValue();\n  }\n\n  static get template() {\n    if (!memoizedTemplate) {\n      // Clone the superclass template\n      memoizedTemplate = super.template.cloneNode(true);\n\n      // Retrieve this element's dom-module template\n      const thisTemplate = DomModule.import(this.is + '-template', 'template');\n      const decreaseButton = thisTemplate.content.querySelector('[part=\"decrease-button\"]');\n      const increaseButton = thisTemplate.content.querySelector('[part=\"increase-button\"]');\n      const styles = thisTemplate.content.querySelector('style');\n\n      // Add the buttons and styles to the text-field template\n      const inputField = memoizedTemplate.content.querySelector('[part=\"input-field\"]');\n      const prefixSlot = memoizedTemplate.content.querySelector('[name=\"prefix\"]');\n      inputField.insertBefore(decreaseButton, prefixSlot);\n      inputField.appendChild(increaseButton);\n      memoizedTemplate.content.appendChild(styles);\n    }\n\n    return memoizedTemplate;\n  }\n\n  _createConstraintsObserver() {\n    // NOTE: do not call \"super\" but instead override the method to add extra arguments\n    this._createMethodObserver('_constraintsChanged(required, minlength, maxlength, pattern, min, max, step)');\n  }\n\n  _constraintsChanged(required, minlength, maxlength, pattern, min, max, step) {\n    if (!this.invalid) {\n      return;\n    }\n\n    const isNumUnset = n => (!n && n !== 0);\n\n    if (!isNumUnset(min) || !isNumUnset(max)) {\n      this.validate();\n    } else {\n      super._constraintsChanged(required, minlength, maxlength, pattern);\n    }\n  }\n\n  _decreaseValue() {\n    this._incrementValue(-1);\n  }\n\n  _increaseValue() {\n    this._incrementValue(1);\n  }\n\n  _incrementValue(incr) {\n    if (this.disabled || this.readonly) {\n      return;\n    }\n\n    let value = parseFloat(this.value);\n\n    if (!this.value) {\n      if (this.min == 0 && incr < 0 ||\n          this.max == 0 && incr > 0 ||\n          this.max == 0 && this.min == 0) {\n        incr = 0;\n        value = 0;\n      } else if ((this.max == null || this.max >= 0) &&\n                 (this.min == null || this.min <= 0)) {\n        value = 0;\n      } else if (this.min > 0) {\n        value = this.min;\n        if (this.max < 0 && incr < 0) {\n          value = this.max;\n        }\n        incr = 0;\n      } else if (this.max < 0) {\n        value = this.max;\n        if (incr < 0) {\n          incr = 0;\n        } else {\n          // FIXME(yuriy): find a proper solution to make correct step back\n          if (this._getIncrement(1, value - this.step) > this.max) {\n            value -= 2 * this.step;\n          } else {\n            value -= this.step;\n          }\n        }\n      }\n    } else if (value < this.min) {\n      incr = 0;\n      value = this.min;\n    } else if (value > this.max) {\n      incr = 0;\n      value = this.max;\n    }\n\n    const newValue = this._getIncrement(incr, value);\n    if (!this.value || incr == 0 || this._incrementIsInsideTheLimits(incr, value)) {\n      this._setValue(newValue);\n    }\n  }\n\n  _setValue(value) {\n    this.value = this.inputElement.value = String(parseFloat(value));\n    this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n  }\n\n  _getIncrement(incr, currentValue) {\n    let step = this.step || 1,\n      min = this.min || 0;\n\n    // To avoid problems with decimal math, multiplying to operate with integers.\n    const multiplier = Math.max(this._getMultiplier(currentValue),\n      this._getMultiplier(step),\n      this._getMultiplier(min));\n\n    step *= multiplier;\n    currentValue = Math.round(currentValue * multiplier);\n    min *= multiplier;\n\n    const margin = (currentValue - min) % step;\n\n    if (incr > 0) {\n      return (currentValue - margin + step) / multiplier;\n    } else if (incr < 0) {\n      return (currentValue - (margin || step)) / multiplier;\n    } else {\n      return currentValue / multiplier;\n    }\n  }\n\n  _getDecimalCount(number) {\n    const s = String(number);\n    const i = s.indexOf('.');\n    return i === -1 ? 1 : s.length - i - 1;\n  }\n\n  _getMultiplier(number) {\n    if (!isNaN(number)) {\n      return Math.pow(10, this._getDecimalCount(number));\n    }\n  }\n\n  _incrementIsInsideTheLimits(incr, value) {\n    if (incr < 0) {\n      return this.min == null || this._getIncrement(incr, value) >= this.min;\n    } else if (incr > 0) {\n      return this.max == null || this._getIncrement(incr, value) <= this.max;\n    } else {\n      return this._getIncrement(incr, value) <= this.max && this._getIncrement(incr, value) >= this.min;\n    }\n  }\n\n  _allowed(sign) {\n    const incr = sign * (this.step || 1);\n    const value = parseFloat(this.value);\n    return !this.value || (!this.disabled && this._incrementIsInsideTheLimits(incr, value));\n  }\n\n  _stepChanged(step) {\n    // Avoid using initial value in validation\n    this.__validateByStep = this.__stepChangedCalled || this.getAttribute('step') !== null;\n    this.inputElement.step = this.__validateByStep ? step : 'any';\n\n    this.__stepChangedCalled = true;\n    this.setAttribute('step', step);\n  }\n\n  _minChanged(min) {\n    this.inputElement.min = min;\n  }\n\n  _maxChanged(max) {\n    this.inputElement.max = max;\n  }\n\n  _valueChanged(newVal, oldVal) {\n    // Validate value to be numeric\n    if (newVal && isNaN(parseFloat(newVal))) {\n      this.value = '';\n    } else if (typeof this.value !== 'string') {\n      this.value = String(this.value);\n    }\n\n    super._valueChanged(this.value, oldVal);\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode == 38) {\n      e.preventDefault();\n      this._increaseValue();\n    } else if (e.keyCode == 40) {\n      e.preventDefault();\n      this._decreaseValue();\n    }\n    super._onKeyDown(e);\n  }\n\n  __onInputChange() {\n    this.validate();\n  }\n\n  checkValidity() {\n    // text-field mixin does not check against `min`, `max` and `step`\n    if (this.min !== undefined || this.max !== undefined || this.__validateByStep) {\n      return this.inputElement.checkValidity();\n    }\n\n    return super.checkValidity();\n  }\n}\n\nwindow.customElements.define(NumberFieldElement.is, NumberFieldElement);\n\nexport { NumberFieldElement };\n","/**\n@license\nCopyright (c) 2019 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport { NumberFieldElement } from './vaadin-number-field.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-integer-field-template\">\n\n  \n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\n/**\n* `<vaadin-integer-field>` is a Web Component for integer field control in forms.\n*\n* ```html\n* <vaadin-integer-field label=\"Number\">\n* </vaadin-integer-field>\n* ```\n*\n* @extends PolymerElement\n* @demo demo/index.html\n*/\nclass IntegerFieldElement extends NumberFieldElement {\n  static get is() {\n    return 'vaadin-integer-field';\n  }\n\n  static get version() {\n    return '2.6.2';\n  }\n\n  static get properties() {\n    // Hide inherited props that don't work with <input type=\"number\"> from JSDoc.\n    return {\n      /**\n       * @private\n       */\n      pattern: String,\n      /**\n       * @private\n       */\n      preventInvalidInput: Boolean,\n      /**\n       * @private\n       */\n      minlength: Number,\n      /**\n       * @private\n       */\n      maxlength: Number\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._enabledCharPattern = '[-+\\\\d]';\n  }\n\n  _valueChanged(newVal, oldVal) {\n    if (newVal !== '' && !this.__isInteger(newVal)) {\n      console.warn(`Trying to set non-integer value \"${newVal}\" to <vaadin-integer-field>.`\n        + ` Clearing the value.`);\n      this.value = '';\n      return;\n    }\n    super._valueChanged(newVal, oldVal);\n  }\n\n  _stepChanged(newVal, oldVal) {\n    if (!this.__hasOnlyDigits(newVal)) {\n      console.warn(`Trying to set invalid step size \"${newVal}\",`\n        + ` which is not a positive integer, to <vaadin-integer-field>.`\n        + ` Resetting the default value 1.`);\n      this.step = 1;\n      return;\n    }\n    super._stepChanged(newVal, oldVal);\n  }\n\n  __isInteger(value) {\n    return /^(-\\d)?\\d*$/.test(String(value));\n  }\n\n  __hasOnlyDigits(value) {\n    return /^\\d*$/.test(String(value));\n  }\n}\n\nwindow.customElements.define(IntegerFieldElement.is, IntegerFieldElement);\n\nexport { IntegerFieldElement };\n","import {PolymerElement, html} from \"@polymer/polymer\";\nimport \"@vaadin/vaadin-text-field/vaadin-integer-field\";\nimport \"../../dnd-select-add\";\nimport { \n  getCharacterChannel,\n  getSelectedCharacter,\n  updateAttr,\n  getClassSaves,\n  getClassSkillProfOptions,\n  setClassSkillProficiencies,\n  getBackgroundSkillProfOptions,\n  setBackgroundSkillProficiencies,\n  getBackgroundSkillProfDefaults,\n  getSkillProfs,\n  getRaceAttributeOptions,\n  getRaceAttributeDefaults,\n  setRaceAttributes,\n  getASIAndFeatAttributeData\n} from \"../../../util/charBuilder\";\nimport { util_capitalizeAll, absInt } from \"../../../js/utils\";\n\nclass DndCharacterBuilderAttributes extends PolymerElement {\n  \n  static get properties() {\n    return {\n      str: {\n        type: Number\n      },\n      dex: {\n        type: Number\n      },\n      con: {\n        type: Number\n      },\n      int: {\n        type: Number\n      },\n      wis: {\n        type: Number\n      },\n      cha: {\n        type: Number\n      },\n      strAdj: {\n        type: Number,\n        value: 0\n      },\n      dexAdj: {\n        type: Number,\n        value: 0\n      },\n      conAdj: {\n        type: Number,\n        value: 0\n      },\n      intAdj: {\n        type: Number,\n        value: 0\n      },\n      wisAdj: {\n        type: Number,\n        value: 0\n      },\n      chaAdj: {\n        type: Number,\n        value: 0\n      },\n      saves: {\n        type: Array,\n        value: []\n      },\n      classSkillProfOptions: {\n        type: Object,\n        value: {}\n      },\n      backgroundSkillProfOptions: {\n        type: Object,\n        value: []\n      },\n      defaultBackgroundSkillProf: {\n        type: String,\n        value: \"\"\n      },\n      raceAttributeOptions: {\n        type: Object,\n        value: []\n      },\n      defaultRaceAttribute: {\n        type: String,\n        value: \"\"\n      },\n      strProfs: {\n        type: String,\n        value: \"\"\n      },\n      dexProfs: {\n        type: String,\n        value: \"\"\n      },\n      intProfs: {\n        type: String,\n        value: \"\"\n      },\n      wisProfs: {\n        type: String,\n        value: \"\"\n      },\n      chaProfs: {\n        type: String,\n        value: \"\"\n      }\n    };\n  }\n\n  static get observers() {\n    return [\"updateCharAttr(str, dex, con, int, wis, cha)\"]\n  }\n\n  updateCharAttr(str, dex, con, int, wis, cha) {\n    if (str && dex && con && int && wis && cha) {\n      updateAttr({str, dex, con, int, wis, cha});\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.characterChangeHandler = (e) => {\n      let character = e.detail.character;\n      this.updateAttributesFromCharacter(character);\n    };\n    \n    this.updateAttributesFromCharacter(getSelectedCharacter());\n    getCharacterChannel().addEventListener(\"character-selected\", this.characterChangeHandler);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    getCharacterChannel().removeEventListener(\"character-selected\", this.characterChangeHandler);\n  }\n\n  async updateAttributesFromCharacter(character) {\n    if (character && character.attr) {\n      const attr = character.attr;\n      if (attr.str !== this.str || attr.dex !== this.dex || attr.con !== this.con \n          || attr.int !== this.int || attr.wis !== this.wis || attr.cha !== this.cha) {\n        this.setProperties({\n          str: character.attr.str,\n          dex: character.attr.dex,\n          con: character.attr.con,\n          int: character.attr.int,\n          wis: character.attr.wis,\n          cha: character.attr.cha\n        });\n      }\n\n      this.saves = await getClassSaves();\n\n      // Skills from Class\n      this.classSkillProfOptions = await getClassSkillProfOptions();\n      this.classSkillProfSelections = character.classSkillProficiencies;\n\n      // Attributes from Race\n      let attributeAdj = {\n        str: 0,\n        dex: 0,\n        con: 0,\n        int: 0,\n        wis: 0,\n        cha: 0\n      };\n      let raceAttributes = await getRaceAttributeOptions();\n      if (raceAttributes && raceAttributes.choose) {\n        this.raceAttributeOptions = raceAttributes.choose.from.map(i => { return i.toUpperCase() });\n        this.raceAttributeChoices = raceAttributes.choose.count || 1;\n        this.raceAttributeSelections = character.raceAttributes;\n        character.raceAttributes.forEach(a => {\n          attributeAdj[a.toLowerCase()] ++;\n        });\n      } else {\n        this.raceAttributeOptions = undefined;\n        this.raceAttributeChoices = undefined;\n        this.raceAttributeSelections = undefined;\n      }\n      let defaultRaceAttribute = await getRaceAttributeDefaults(raceAttributes);\n      this.defaultRaceAttribute = defaultRaceAttribute\n        .map(e => {\n          let attribute = e[0].toLowerCase(),\n            mod = e[1];\n          attributeAdj[attribute] += mod;\n          return attribute.toUpperCase() + ' ' + absInt(mod);\n        }).join(', ');\n\n      let asiData = await getASIAndFeatAttributeData();\n      for (let asi of asiData) {\n        if (asi.featSelections) {\n          attributeAdj[asi.featSelections.toLowerCase()] += 1;\n        }\n        if (asi.featAttribute) {\n          Object.entries(asi.featAttribute).filter(e => { return e[0] !== 'choose'}).forEach(e => {\n            let attribute = e[0].toLowerCase(),\n            mod = e[1];\n            attributeAdj[attribute] += mod;\n          });\n        }\n        if (asi.asiAttributes) {\n          Object.entries(asi.asiAttributes).forEach(e => {\n            let attribute = e[0].toLowerCase(),\n            mod = e[1];\n            attributeAdj[attribute] += mod;\n          });\n        }\n      }\n      this.strAdj = attributeAdj.str;\n      this.dexAdj = attributeAdj.dex;\n      this.conAdj = attributeAdj.con;\n      this.intAdj = attributeAdj.int;\n      this.wisAdj = attributeAdj.wis;\n      this.chaAdj = attributeAdj.cha;\n\n      let strProfs = await getSkillProfs('str')\n      this.strProfs = strProfs.map(s => {return util_capitalizeAll(s)}).join(', ');\n      let dexProfs = await getSkillProfs('dex')\n      this.dexProfs = dexProfs.map(s => {return util_capitalizeAll(s)}).join(', ');\n      let intProfs = await getSkillProfs('int')\n      this.intProfs = intProfs.map(s => {return util_capitalizeAll(s)}).join(', ');\n      let wisProfs = await getSkillProfs('wis')\n      this.wisProfs = wisProfs.map(s => {return util_capitalizeAll(s)}).join(', ');\n      let chaProfs = await getSkillProfs('cha')\n      this.chaProfs = chaProfs.map(s => {return util_capitalizeAll(s)}).join(', ');\n    }\n  }\n\n  _adjustString(adj) {\n    if (adj !== 0 && adj !== undefined) {\n      return absInt(adj);\n    }\n    return \"\";\n  }\n\n  _total(a, b) {\n    let intA = parseInt(a),\n      intB = parseInt(b);\n\n    intA = isNaN(intA) ? 0 : intA;\n    intB = isNaN(intB) ? 0 : intB;\n\n    return intA + intB;\n  }\n\n  _mod(base, adj) {\n    return absInt(Math.floor((this._total(base, adj) - 10) / 2));\n  }\n\n  _contains(saves, str) {\n    return saves.indexOf(str) > -1;\n  }\n\n  _exists() {\n    for (let arg of arguments) {\n      if (!!arg && (arg.constructor !== Object || Object.entries(arg).length > 0) && (!Array.isArray(arg) || arg.length > 0)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _classSkillAddCallback(skills) {\n    setClassSkillProficiencies(skills);\n  }\n\n  _backgroundSkillAddCallback(skills) {\n    setBackgroundSkillProficiencies(skills);\n  }\n\n  _raceAttributeAddCallback(attr) {\n    setRaceAttributes(attr);\n  }\n\n  static get template() {\n    return html`\n      <style include=\"material-styles\">\n        :host {\n          display: block;\n          padding: 14px;\n        }\n        .prof-choice-wrap {\n          display: flex;\n          flex-direction: column;\n          width: 100%;\n          justify-content: space-between;\n        }\n        .prof-choice-wrap dnd-select-add {\n          width: 100%;\n        }\n\n        .prof-choice-wrap > div {\n          margin-bottom: 24px;\n        }\n\n        .default-selection {\n          font-style: italic;\n        }\n\n        .table-wrap {\n          display: flex;\n          flex-wrap: wrap;\n        }\n        .stats {\n          width: 100%;\n          margin-top: 32px;\n        }\n\n        .row {\n          height: 92px;\n        }\n\n        .data {\n          margin-top: 32px;\n          font-size: 18px;\n          padding: 10px 8px 8px;\n          display: flex;\n          justify-content: center;\n        }\n\n        .mod {\n          background: var(--lumo-contrast-10pct);\n          border-radius: 4px;\n          width: 32px;\n          margin: 32px auto 0;\n        }\n\n        .prof {\n          justify-content: flex-start;\n        }\n\n        .mobile-label .data {\n          justify-content: flex-start;\n        }\n\n        vaadin-integer-field {\n          width: 100px;\n        }\n        \n        .save {\n          width: 24px;\n        }\n\n        .save-icon {\n          width: 24px;\n        }\n\n        [hidden] {\n          visibility: hidden;\n        }\n\n        @media(min-width: 921px) {\n          .stats {\n            width: 50%;\n          }\n          .mobile-label {\n            display: none;\n          }\n          .attr-choice-wrap,\n          .prof-choice-wrap {\n            flex-direction: row;\n          }\n        }\n      </style>\n  \n      <div class=\"prof-choice-wrap\">\n        <div>\n          <div hidden$=\"[[_exists(classSkillProfOptions)]]\">Select 1st Level to add Skill Proficiencies</div>\n          <div hidden$=\"[[!_exists(classSkillProfOptions)]]\">Skill Proficiencies from Class</div>\n          <dnd-select-add hidden$=\"[[!_exists(classSkillProfOptions)]]\" choices=\"[[classSkillProfOptions.count]]\" placeholder=\"<Choose Skills>\"\n            options=\"[[classSkillProfOptions.from]]\" value=\"[[classSkillProfSelections]]\" add-callback=\"[[_classSkillAddCallback]]\"></dnd-select-add>\n        </div>\n      </div>\n\n      <div class=\"table-wrap\">\n        <table class=\"stats\">\n          <thead>\n            <tr>\n              <th></th>\n              <th>Adjust.</th>\n              <th>Total</th>\n              <th>Mod.</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr class=\"row\">\n              <td><vaadin-integer-field value={{str}} min=\"1\" max=\"20\" has-controls label=\"Strength\"></vaadin-integer-field></td>\n              <td><div class=\"adj data\">[[_adjustString(strAdj)]]</div></td>\n              <td><div class=\"total data\">[[_total(strAdj, str)]]</div></td>\n              <td><div class=\"mod data\">[[_mod(strAdj, str)]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td><vaadin-integer-field value={{dex}} min=\"1\" max=\"20\" has-controls label=\"Dexterity\"></vaadin-integer-field></td>\n              <td><div class=\"adj data\">[[_adjustString(dexAdj)]]</div></td>\n              <td><div class=\"total data\">[[_total(dexAdj, dex)]]</div></td>\n              <td><div class=\"mod data\">[[_mod(dexAdj, dex)]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td><vaadin-integer-field value={{con}} min=\"1\" max=\"20\" has-controls label=\"Constitution\"></vaadin-integer-field></td>\n              <td><div class=\"adj data\">[[_adjustString(conAdj)]]</div></td>\n              <td><div class=\"total data\">[[_total(conAdj, con)]]</div></td>\n              <td><div class=\"mod data\">[[_mod(conAdj, con)]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td><vaadin-integer-field value={{int}} min=\"1\" max=\"20\" has-controls label=\"Intellegence\"></vaadin-integer-field></td>\n              <td><div class=\"adj data\">[[_adjustString(intAdj)]]</div></td>\n              <td><div class=\"total data\">[[_total(intAdj, int)]]</div></td>\n              <td><div class=\"mod data\">[[_mod(intAdj, int)]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td><vaadin-integer-field value={{wis}} min=\"1\" max=\"20\" has-controls label=\"Wisdom\"></vaadin-integer-field></td>\n              <td><div class=\"adj data\">[[_adjustString(wisAdj)]]</div></td>\n              <td><div class=\"total data\">[[_total(wisAdj, wis)]]</div></td>\n              <td><div class=\"mod data\">[[_mod(wisAdj, wis)]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td><vaadin-integer-field value={{cha}} min=\"1\" max=\"20\" has-controls label=\"Charisma\"></vaadin-integer-field></td>\n              <td><div class=\"adj data\">[[_adjustString(chaAdj)]]</div></td>\n              <td><div class=\"total data\">[[_total(chaAdj, cha)]]</div></td>\n              <td><div class=\"mod data\">[[_mod(chaAdj, cha)]]</div></td>\n            </tr>\n          </tbody>\n        </table>\n\n        <table class=\"stats\">\n          <thead>\n            <tr>\n              <th class=\"mobile-label\">Attribute</th>\n              <th><div class=\"save\">Save</div></th>\n              <th><div class=\"prof\">Proficiencies</div></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr class=\"row\">\n              <td class=\"mobile-label\"><div class=\"data\">STR</div></td>\n              <td><div class=\"save data\">\n                <span hidden$=\"[[!_contains(saves, 'str')]]\" class=\"save-icon material-icons\">done</span>\n              </div></td>\n              <td><div class=\"prof data\">[[strProfs]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td class=\"mobile-label\"><div class=\"data\">DEX</div></td>\n              <td><div class=\"save data\">\n                <span hidden$=\"[[!_contains(saves, 'dex')]]\" class=\"save-icon material-icons\">done</span>\n              </div></td>\n              <td><div class=\"prof data\">[[dexProfs]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td class=\"mobile-label\"><div class=\"data\">CON</div></td>\n              <td><div class=\"save data\">\n                <span hidden$=\"[[!_contains(saves, 'con')]]\" class=\"save-icon material-icons\">done</span>\n              </div></td>\n              <td><div class=\"prof data\"></div></td>\n            </tr>\n            <tr class=\"row\">\n              <td class=\"mobile-label\"><div class=\"data\">INT</div></td>\n              <td><div class=\"save data\">\n                <span hidden$=\"[[!_contains(saves, 'int')]]\" class=\"save-icon material-icons\">done</span>\n              </div></td>\n              <td><div class=\"prof data\">[[intProfs]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td class=\"mobile-label\"><div class=\"data\">WIS</div></td>\n              <td><div class=\"save data\">\n                <span hidden$=\"[[!_contains(saves, 'wis')]]\" class=\"save-icon material-icons\">done</span>\n              </div></td>\n              <td><div class=\"prof data\">[[wisProfs]]</div></td>\n            </tr>\n            <tr class=\"row\">\n              <td class=\"mobile-label\"><div class=\"data\">CHA</div></td>\n              <td><div class=\"save data\">\n                <span hidden$=\"[[!_contains(saves, 'cha')]]\" class=\"save-icon material-icons\">done</span>\n              </div></td>\n              <td><div class=\"prof data\">[[chaProfs]]</div></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define(\"dnd-character-builder-attributes\", DndCharacterBuilderAttributes);"],"sourceRoot":""}